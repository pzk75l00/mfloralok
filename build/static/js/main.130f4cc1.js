/*! For license information please see main.130f4cc1.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+N(l,0):s,w(a)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),M(a,t,r,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+N(o=e[c],c);l+=M(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=M(o=o.value,t,r,u=s+N(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var i=[],r=0;return M(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},A={transition:null},L={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:A,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=a,t.PureComponent=v,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=O,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function w(e){if(m=!1,x(e),!g)if(null!==i(c))g=!0,A(_);else{var t=i(u);null!==t&&L(w,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,b(C),C=-1),p=!0;var s=f;try{for(x(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!M());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),x(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&L(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,C=-1,T=5,N=-1;function M(){return!(t.unstable_now()-N<T)}function D(){if(null!==E){var e=t.unstable_now();N=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof v)k=function(){v(D)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,I=P.port2;P.port1.onmessage=D,k=function(){I.postMessage(null)}}else k=function(){y(D,0)};function A(e){E=e,S||(S=!0,k())}function L(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,A(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(b(C),C=-1):m=!0,L(w,s-a))):(e.sortIndex=o,n(c,e),g||p||(g=!0,A(_))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var i=n(950);t.H=i.createRoot,i.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var R,j=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(yt){return e.body}}function G(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function Ee(e){if(e=xr(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=_r(t),_e(e.stateNode,e.type,t))}}function Ce(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Te(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ne(e,t){return e(t)}function Me(){}var De=!1;function Pe(e,t,n){if(De)return e(t,n);De=!0;try{return Ne(e,t,n)}finally{De=!1,(null!==ke||null!==Se)&&(Me(),Te())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ae=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Ae=!1}function Oe(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Re=!1,je=null,Fe=!1,Ve=null,ze={onError:function(e){Re=!0,je=e}};function Be(e,t,n,i,r,s,a,o,l){Re=!1,je=null,Oe.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(s(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return We(r),e;if(a===i)return We(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Qe=r.unstable_cancelCallback,Ge=r.unstable_shouldYield,$e=r.unstable_requestPaint,Xe=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=ht(o):0!==(s&=a)&&(i=ht(s))}else 0!==(a=n&~r)?i=ht(a):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var xt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,kt,St,Et,Ct,Tt=!1,Nt=[],Mt=null,Dt=null,Pt=null,It=new Map,At=new Map,Lt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function jt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=xr(t))&&kt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=vr(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xr(n))&&kt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function zt(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Mt&&Vt(Mt)&&(Mt=null),null!==Dt&&Vt(Dt)&&(Dt=null),null!==Pt&&Vt(Pt)&&(Pt=null),It.forEach(zt),At.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<Nt.length){Ut(Nt[0],e);for(var n=1;n<Nt.length;n++){var i=Nt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Mt&&Ut(Mt,e),null!==Dt&&Ut(Dt,e),null!==Pt&&Ut(Pt,e),It.forEach(t),At.forEach(t),n=0;n<Lt.length;n++)(i=Lt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Lt.shift()}var Wt=x.ReactCurrentBatchConfig,qt=!0;function Kt(e,t,n,i){var r=xt,s=Wt.transition;Wt.transition=null;try{xt=1,Qt(e,t,n,i)}finally{xt=r,Wt.transition=s}}function Yt(e,t,n,i){var r=xt,s=Wt.transition;Wt.transition=null;try{xt=4,Qt(e,t,n,i)}finally{xt=r,Wt.transition=s}}function Qt(e,t,n,i){if(qt){var r=$t(e,t,n,i);if(null===r)qi(e,t,i,Gt,n),Rt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Mt=jt(Mt,e,t,n,i,r),!0;case"dragenter":return Dt=jt(Dt,e,t,n,i,r),!0;case"mouseover":return Pt=jt(Pt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return It.set(s,jt(It.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,At.set(s,jt(At.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Rt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var s=xr(r);if(null!==s&&_t(s),null===(s=$t(e,t,n,i))&&qi(e,t,i,Gt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else qi(e,t,i,null,n)}}var Gt=null;function $t(e,t,n,i){if(Gt=null,null!==(e=vr(e=we(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,i=n.length,r="value"in Jt?Jt.value:Jt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return en=r.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=an(un),dn=j({},un,{view:0,detail:0}),fn=an(dn),pn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=an(pn),mn=an(j({},pn,{dataTransfer:0})),yn=an(j({},dn,{relatedTarget:0})),bn=an(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(vn),wn=an(j({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return En}var Tn=j({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(Tn),Mn=an(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=an(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(In),Ln=[9,13,27,32],On=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var jn=u&&"TextEvent"in window&&!Rn,Fn=u&&(!On||Rn&&8<Rn&&11>=Rn),Vn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Kn(e,t,n,i){Ce(i),0<(t=Yi(t,"onChange")).length&&(n=new hn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Yn=null,Qn=null;function Gn(e){Vi(e,0)}function $n(e){if(Y(wr(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var ei="oninput"in document;if(!ei){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),ei="function"===typeof ti.oninput}Zn=ei}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function ni(){Yn&&(Yn.detachEvent("onpropertychange",ii),Qn=Yn=null)}function ii(e){if("value"===e.propertyName&&$n(Qn)){var t=[];Kn(t,Qn,e,we(e)),Pe(Gn,t)}}function ri(e,t,n){"focusin"===e?(ni(),Qn=n,(Yn=t).attachEvent("onpropertychange",ii)):"focusout"===e&&ni()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Qn)}function ai(e,t){if("click"===e)return $n(t)}function oi(e,t){if("input"===e||"change"===e)return $n(t)}var li="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ci(e,t){if(li(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!li(e[r],t[r]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n,i=ui(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ui(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fi(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gi(e){var t=fi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=hi(n,s);var a=hi(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,yi=null,bi=null,vi=null,xi=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==yi||yi!==Q(i)||("selectionStart"in(i=yi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&ci(vi,i)||(vi=i,0<(i=Yi(bi,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=yi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Si={},Ei={};function Ci(e){if(Si[e])return Si[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ei)return Si[e]=n[t];return e}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ti=Ci("animationend"),Ni=Ci("animationiteration"),Mi=Ci("animationstart"),Di=Ci("transitionend"),Pi=new Map,Ii="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){Pi.set(e,t),l(t,[e])}for(var Li=0;Li<Ii.length;Li++){var Oi=Ii[Li];Ai(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ai(Ti,"onAnimationEnd"),Ai(Ni,"onAnimationIteration"),Ai(Mi,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(Di,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ji=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function Fi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(Be.apply(this,arguments),Re){if(!Re)throw Error(s(198));var u=je;Re=!1,je=null,Fe||(Fe=!0,Ve=u)}}(i,t,void 0,e),e.currentTarget=null}function Vi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,o,c),s=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function zi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Wi(t,e,2,!1),n.add(i))}function Bi(e,t,n){var i=0;t&&(i|=4),Wi(n,e,i,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Ui]){e[Ui]=!0,a.forEach((function(t){"selectionchange"!==t&&(ji.has(t)||Bi(t,!1,e),Bi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Bi("selectionchange",!1,t))}}function Wi(e,t,n,i){switch(Xt(t)){case 1:var r=Kt;break;case 4:r=Yt;break;default:r=Qt}n=r.bind(null,t,n,e),r=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function qi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=vr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}Pe((function(){var i=s,r=we(n),a=[];e:{var o=Pi.get(e);if(void 0!==o){var l=hn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Ti:case Ni:case Mi:l=bn;break;case Di:l=Pn;break;case"scroll":l=fn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ie(p,d))&&u.push(Ki(p,g,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[gr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=gn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:wr(l),f=null==c?o:wr(c),(o=new u(g,p+"leave",l,n,r)).target=h,o.relatedTarget=f,g=null,vr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Qi(f))p++;for(f=0,g=d;g;g=Qi(g))f++;for(;0<p-f;)u=Qi(u),p--;for(;0<f-p;)d=Qi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Qi(u),d=Qi(d)}u=null}else u=null;null!==l&&Gi(a,o,l,u,!1),null!==c&&null!==h&&Gi(a,h,c,u,!0)}if("select"===(l=(o=i?wr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Xn;else if(qn(o))if(Jn)m=oi;else{m=si;var y=ri}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ai);switch(m&&(m=m(e,i))?Kn(a,m,n,r):(y&&y(e,o,i),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=i?wr(i):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(yi=y,bi=i,vi=null);break;case"focusout":vi=bi=yi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,wi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":wi(a,n,r)}var b;if(On)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?Bn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Fn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(b=tn()):(Zt="value"in(Jt=r)?Jt.value:Jt.textContent,Hn=!0)),0<(y=Yi(i,v)).length&&(v=new wn(v,e,null,n,r),a.push({event:v,listeners:y}),b?v.data=b:null!==(b=Un(n))&&(v.data=b))),(b=jn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!On&&Bn(e,t)?(e=tn(),en=Zt=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Yi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=b))}Vi(a,t)}))}function Ki(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ie(e,n))&&i.unshift(Ki(e,s,r)),null!=(s=Ie(e,t))&&i.push(Ki(e,s,r))),e=e.return}return i}function Qi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Ie(n,s))&&a.unshift(Ki(n,l,o)):r||null!=(l=Ie(n,s))&&a.push(Ki(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $i=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Ji(e){return("string"===typeof e?e:""+e).replace($i,"\n").replace(Xi,"")}function Zi(e,t,n){if(t=Ji(t),Ji(e)!==t&&n)throw Error(s(425))}function er(){}var tr=null,nr=null;function ir(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rr="function"===typeof setTimeout?setTimeout:void 0,sr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(lr)}:rr;function lr(e){setTimeout((function(){throw e}))}function cr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),fr="__reactFiber$"+dr,pr="__reactProps$"+dr,gr="__reactContainer$"+dr,mr="__reactEvents$"+dr,yr="__reactListeners$"+dr,br="__reactHandles$"+dr;function vr(e){var t=e[fr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gr]||n[fr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hr(e);null!==e;){if(n=e[fr])return n;e=hr(e)}return t}n=(e=n).parentNode}return null}function xr(e){return!(e=e[fr]||e[gr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _r(e){return e[pr]||null}var kr=[],Sr=-1;function Er(e){return{current:e}}function Cr(e){0>Sr||(e.current=kr[Sr],kr[Sr]=null,Sr--)}function Tr(e,t){Sr++,kr[Sr]=e.current,e.current=t}var Nr={},Mr=Er(Nr),Dr=Er(!1),Pr=Nr;function Ir(e,t){var n=e.type.contextTypes;if(!n)return Nr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ar(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lr(){Cr(Dr),Cr(Mr)}function Or(e,t,n){if(Mr.current!==Nr)throw Error(s(168));Tr(Mr,t),Tr(Dr,n)}function Rr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return j({},n,i)}function jr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nr,Pr=Mr.current,Tr(Mr,e),Tr(Dr,Dr.current),!0}function Fr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Rr(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Cr(Dr),Cr(Mr),Tr(Mr,e)):Cr(Dr),Tr(Dr,n)}var Vr=null,zr=!1,Br=!1;function Ur(e){null===Vr?Vr=[e]:Vr.push(e)}function Hr(){if(!Br&&null!==Vr){Br=!0;var e=0,t=xt;try{var n=Vr;for(xt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Vr=null,zr=!1}catch(r){throw null!==Vr&&(Vr=Vr.slice(e+1)),Ye(Ze,Hr),r}finally{xt=t,Br=!1}}return null}var Wr=[],qr=0,Kr=null,Yr=0,Qr=[],Gr=0,$r=null,Xr=1,Jr="";function Zr(e,t){Wr[qr++]=Yr,Wr[qr++]=Kr,Kr=e,Yr=t}function es(e,t,n){Qr[Gr++]=Xr,Qr[Gr++]=Jr,Qr[Gr++]=$r,$r=e;var i=Xr;e=Jr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Xr=1<<32-at(t)+r|n<<r|i,Jr=s+e}else Xr=1<<s|n<<r|i,Jr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Kr;)Kr=Wr[--qr],Wr[qr]=null,Yr=Wr[--qr],Wr[qr]=null;for(;e===$r;)$r=Qr[--Gr],Qr[Gr]=null,Jr=Qr[--Gr],Qr[Gr]=null,Xr=Qr[--Gr],Qr[Gr]=null}var is=null,rs=null,ss=!1,as=null;function os(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,is=e,rs=ur(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,is=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$r?{id:Xr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,is=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=rs;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ur(n.nextSibling);var i=is;t&&ls(e,t)?os(i,n):(e.flags=-4097&e.flags|2,ss=!1,is=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,is=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;is=e}function ds(e){if(e!==is)return!1;if(!ss)return hs(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ir(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=ur(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=is?ur(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=rs;e;)e=ur(e.nextSibling)}function ps(){rs=is=null,ss=!1}function gs(e){null===as?as=[e]:as.push(e)}var ms=x.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===I&&vs(s)===t.type)?((i=r(t,n.props)).ref=ys(e,t,n),i.return=e,i):((i=Oc(n.type,n.key,n.props,null,e.mode,i)).ref=ys(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Rc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Rc(t,e.mode,n,null)).return=e,t;bs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case _:return n.key===r?u(e,t,n,i):null;case I:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||O(n))return null!==r?null:h(e,t,n,i,null);bs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case _:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case I:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||O(i))return h(t,e=e.get(n)||null,i,r,null);bs(t,i)}return null}function g(r,s,o,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(r,h,o[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),s=a(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===o.length)return n(r,h),ss&&Zr(r,g),c;if(null===h){for(;g<o.length;g++)null!==(h=d(r,o[g],l))&&(s=a(h,s,g),null===u?c=h:u.sibling=h,u=h);return ss&&Zr(r,g),c}for(h=i(r,h);g<o.length;g++)null!==(m=p(h,r,g,o[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),ss&&Zr(r,g),c}function m(r,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=o,m=o=0,y=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var v=f(r,g,b.value,c);if(null===v){null===g&&(g=y);break}e&&g&&null===v.alternate&&t(r,g),o=a(v,o,m),null===h?u=v:h.sibling=v,h=v,g=y}if(b.done)return n(r,g),ss&&Zr(r,m),u;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=d(r,b.value,c))&&(o=a(b,o,m),null===h?u=b:h.sibling=b,h=b);return ss&&Zr(r,m),u}for(g=i(r,g);!b.done;m++,b=l.next())null!==(b=p(g,r,m,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?m:b.key),o=a(b,o,m),null===h?u=b:h.sibling=b,h=b);return e&&g.forEach((function(e){return t(r,e)})),ss&&Zr(r,m),u}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&vs(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=ys(i,u,a),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===k?((s=Rc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Oc(a.type,a.key,a.props,null,i.mode,l)).ref=ys(i,s,a),l.return=i,i=l)}return o(i);case _:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Vc(a,i.mode,l)).return=i,i=s}return o(i);case I:return e(i,s,(u=a._init)(a._payload),l)}if(te(a))return g(i,s,a,l);if(O(a))return m(i,s,a,l);bs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Fc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var ws=xs(!0),_s=xs(!1),ks=Er(null),Ss=null,Es=null,Cs=null;function Ts(){Cs=Es=Ss=null}function Ns(e){var t=ks.current;Cr(ks),e._currentValue=t}function Ms(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ds(e,t){Ss=e,Cs=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=e,Ss.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Is=null;function As(e){null===Is?Is=[e]:Is.push(e)}function Ls(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,As(t)):(n.next=r.next,r.next=n),t.interleaved=n,Os(e,i)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Rs=!1;function js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Ml)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Os(e,n)}return null===(r=i.interleaved)?(t.next=t,As(i)):(t.next=r.next,r.next=t),i.interleaved=t,Os(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Us(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,i){var r=e.updateQueue;Rs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var qs={},Ks=Er(qs),Ys=Er(qs),Qs=Er(qs);function Gs(e){if(e===qs)throw Error(s(174));return e}function $s(e,t){switch(Tr(Qs,t),Tr(Ys,e),Tr(Ks,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(Ks),Tr(Ks,t)}function Xs(){Cr(Ks),Cr(Ys),Cr(Qs)}function Js(e){Gs(Qs.current);var t=Gs(Ks.current),n=le(t,e.type);t!==n&&(Tr(Ys,e),Tr(Ks,n))}function Zs(e){Ys.current===e&&(Cr(Ks),Cr(Ys))}var ea=Er(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ia(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ra=x.ReactCurrentDispatcher,sa=x.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!li(e[n],t[n]))return!1;return!0}function ma(e,t,n,i,r,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Za:eo,e=n(i,r),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(s(301));a+=1,ca=la=null,t.updateQueue=null,ra.current=to,e=n(i,r)}while(ha)}if(ra.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(s(300));return e}function ya(){var e=0!==da;return da=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function va(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(s(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=la,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,oa.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,li(i,t.memoizedState)||(xo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,oa.lanes|=a,jl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);li(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function ka(){}function Sa(e,t){var n=oa,i=va(),r=t(),a=!li(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,Ra(Ta.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,Ca.bind(null,n,i,r,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&aa)||Ea(n,t,r)}return r}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,i){t.value=n,t.getSnapshot=i,Na(t)&&Ma(e)}function Ta(e,t,n){return n((function(){Na(t)&&Ma(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!li(e,n)}catch(i){return!0}}function Ma(e){var t=Os(e,1);null!==t&&ic(t,e,1,-1)}function Da(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,oa,e),[t.memoizedState,e]}function Pa(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ia(){return va().memoizedState}function Aa(e,t,n,i){var r=ba();oa.flags|=e,r.memoizedState=Pa(1|t,n,void 0,void 0===i?null:i)}function La(e,t,n,i){var r=va();i=void 0===i?null:i;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==i&&ga(i,a.deps))return void(r.memoizedState=Pa(t,n,s,i))}oa.flags|=e,r.memoizedState=Pa(1|t,n,s,i)}function Oa(e,t){return Aa(8390656,8,e,t)}function Ra(e,t){return La(2048,8,e,t)}function ja(e,t){return La(4,2,e,t)}function Fa(e,t){return La(4,4,e,t)}function Va(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Va.bind(null,t,e),n)}function Ba(){}function Ua(e,t){var n=va();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ga(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=va();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ga(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(li(n,t)||(n=gt(),oa.lanes|=n,jl|=n,e.baseState=!0),t)}function qa(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var i=sa.transition;sa.transition={};try{e(!1),t()}finally{xt=n,sa.transition=i}}function Ka(){return va().memoizedState}function Ya(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))$a(t,n);else if(null!==(n=Ls(e,t,n,i))){ic(n,e,i,tc()),Xa(n,t,i)}}function Qa(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))$a(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,li(o,a)){var l=t.interleaved;return null===l?(r.next=r,As(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ls(e,t,r,i))&&(ic(n,e,i,r=tc()),Xa(n,t,i))}}function Ga(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function $a(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:Ps,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Ps,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Aa(4194308,4,Va.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Aa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ba();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ya.bind(null,oa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Da,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Da(!1),t=e[0];return e=qa.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=oa,r=ba();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Dl)throw Error(s(349));0!==(30&aa)||Ea(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Oa(Ta.bind(null,i,a,e),[e]),i.flags|=2048,Pa(9,Ca.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Dl.identifierPrefix;if(ss){var n=Jr;t=":"+t+"R"+(n=(Xr&~(1<<32-at(Xr)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Ua,useContext:Ps,useEffect:Ra,useImperativeHandle:za,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Ha,useReducer:wa,useRef:Ia,useState:function(){return wa(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Wa(va(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1},to={readContext:Ps,useCallback:Ua,useContext:Ps,useEffect:Ra,useImperativeHandle:za,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Ha,useReducer:_a,useRef:Ia,useState:function(){return _a(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=va();return null===la?t.memoizedState=e:Wa(t,la.memoizedState,e)},useTransition:function(){return[_a(xa)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:Sa,useId:Ka,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function io(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=Vs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(ic(t,e,r,i),Bs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=Vs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(ic(t,e,r,i),Bs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=Vs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zs(e,r,i))&&(ic(t,e,i,n),Bs(t,e,i))}};function so(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ci(n,i)||!ci(r,s))}function ao(e,t,n){var i=!1,r=Nr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(r=Ar(t)?Pr:Mr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ir(e,r):Nr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},js(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ps(s):(s=Ar(t)?Pr:Mr.current,r.context=Ir(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(io(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ro.enqueueReplaceState(r,r.state,null),Hs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",i=t;do{n+=B(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ql||(ql=!0,Kl=i),ho(0,t)},n}function go(e,t,n){(n=Vs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof i&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new fo;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vo=x.ReactCurrentOwner,xo=!1;function wo(e,t,n,i){t.child=null===e?_s(t,null,n,i):ws(t,e.child,n,i)}function _o(e,t,n,i,r){n=n.render;var s=t.ref;return Ds(t,r),i=ma(e,t,n,i,s,r),n=ya(),null===e||xo?(ss&&n&&ts(t),t.flags|=1,wo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qo(e,t,r))}function ko(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Ac(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(a,i)&&e.ref===t.ref)return qo(e,t,r)}return t.flags|=1,(e=Lc(s,i)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(ci(s,i)&&e.ref===t.ref){if(xo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,qo(e,t,r);0!==(131072&e.flags)&&(xo=!0)}}return To(e,t,n,i,r)}function Eo(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Ll,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(Ll,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(Ll,Al),Al|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Tr(Ll,Al),Al|=i;return wo(e,t,r,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,i,r){var s=Ar(n)?Pr:Mr.current;return s=Ir(t,s),Ds(t,r),n=ma(e,t,n,i,s,r),i=ya(),null===e||xo?(ss&&i&&ts(t),t.flags|=1,wo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qo(e,t,r))}function No(e,t,n,i,r){if(Ar(n)){var s=!0;jr(t)}else s=!1;if(Ds(t,r),null===t.stateNode)Wo(e,t),ao(t,n,i),lo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Ir(t,c=Ar(n)?Pr:Mr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&oo(t,a,i,c),Rs=!1;var d=t.memoizedState;a.state=d,Hs(t,i,a,r),l=t.memoizedState,o!==i||d!==l||Dr.current||Rs?("function"===typeof u&&(io(t,n,u,i),l=t.memoizedState),(o=Rs||so(t,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Ir(t,l=Ar(n)?Pr:Mr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&oo(t,a,i,l),Rs=!1,d=t.memoizedState,a.state=d,Hs(t,i,a,r);var p=t.memoizedState;o!==h||d!==p||Dr.current||Rs?("function"===typeof f&&(io(t,n,f,i),p=t.memoizedState),(c=Rs||so(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Mo(e,t,n,i,s,r)}function Mo(e,t,n,i,r,s){Co(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Fr(t,n,!1),qo(e,t,s);i=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=i.state,r&&Fr(t,n,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),$s(e,t.containerInfo)}function Po(e,t,n,i,r){return ps(),gs(r),t.flags|=256,wo(e,t,n,i),t.child}var Io,Ao,Lo,Oo,Ro={dehydrated:null,treeContext:null,retryLane:0};function jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var i,r=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Tr(ea,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=jc(l,r,0,null),e=Rc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jo(n),t.memoizedState=Ro,e):Vo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,i=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=jc({mode:"visible",children:i.children},r,0,null),(a=Rc(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=jo(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,zo(e,t,o,i=uo(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(i=Dl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Os(e,r),ic(i,e,r,-1))}return mc(),zo(e,t,o,i=uo(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,rs=ur(r.nextSibling),is=t,ss=!0,as=null,null!==e&&(Qr[Gr++]=Xr,Qr[Gr++]=Jr,Qr[Gr++]=$r,Xr=e.id,Jr=e.overflow,$r=t),t=Vo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Lc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Lc(i,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?jo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,r}return e=(o=e.child).sibling,r=Lc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vo(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,i){return null!==i&&gs(i),ws(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ms(e.return,t,n)}function Uo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ho(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(wo(e,t,i.children,n),0!==(2&(i=ea.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Tr(ea,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Uo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ta(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Uo(t,!0,n,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Qo(e,t,n){var i=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return Ar(t.type)&&Lr(),Yo(t),null;case 3:return i=t.stateNode,Xs(),Cr(Dr),Cr(Mr),ia(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(oc(as),as=null))),Ao(e,t),Yo(t),null;case 5:Zs(t);var r=Gs(Qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Yo(t),null}if(e=Gs(Ks.current),ds(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[fr]=t,i[pr]=a,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Ri.length;r++)zi(Ri[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":$(i,a),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},zi("invalid",i);break;case"textarea":re(i,a),zi("invalid",i)}for(var l in be(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zi(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":K(i),Z(i,a,!0);break;case"textarea":K(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=er)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[fr]=t,e[pr]=i,Io(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ri.length;r++)zi(Ri[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":$(e,i),r=G(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(a in be(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zi("scroll",e):null!=u&&v(e,a,u,l))}switch(n){case"input":K(e),Z(e,i,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=er)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Gs(Qs.current),Gs(Ks.current),ds(t)){if(i=t.stateNode,n=t.memoizedProps,i[fr]=t,(a=i.nodeValue!==n)&&null!==(e=is))switch(e.tag){case 3:Zi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[fr]=t,t.stateNode=i}return Yo(t),null;case 13:if(Cr(ea),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[fr]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),a=!1}else null!==as&&(oc(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return Xs(),Ao(e,t),null===e&&Hi(t.stateNode.containerInfo),Yo(t),null;case 10:return Ns(t.type._context),Yo(t),null;case 19:if(Cr(ea),null===(a=t.memoizedState))return Yo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Ko(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ko(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Hl&&(t.flags|=128,i=!0,Ko(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ta(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return Yo(t),null}else 2*Xe()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,Ko(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Tr(ea,i?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ns(t),t.tag){case 1:return Ar(t.type)&&Lr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Cr(Dr),Cr(Mr),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Cr(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(ea),null;case 4:return Xs(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Io=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Lo=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Gs(Ks.current);var s,a=null;switch(n){case"input":r=G(e,r),i=G(e,i),a=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=er)}for(u in be(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,i){n!==i&&(t.flags|=4)};var $o=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){Ec(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(t,n,s)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fr],delete t[pr],delete t[mr],delete t[yr],delete t[br])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=er));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Xo||el(n,t);case 6:var i=hl,r=dl;hl=null,fl(e,t,n),dl=r,null!==(hl=i)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?cr(e.parentNode,n):1===e.nodeType&&cr(e,n),Ht(e)):cr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),r=r.next}while(r!==i)}fl(e,t,n);break;case 1:if(!Xo&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Ec(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xo=(i=Xo)||null!==n.memoizedState,fl(e,t,n),Xo=i):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var i=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(a,o,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ec(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),bl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(m){Ec(e,e.return,m)}try{il(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ml(t,e),bl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),bl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){Ec(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(r,a),ve(l,o);var u=ve(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):v(r,h,d,u)}switch(l){case"input":J(r,a);break;case"textarea":se(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(m){Ec(e,e.return,m)}}break;case 6:if(ml(t,e),bl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(m){Ec(e,e.return,m)}}break;case 3:if(ml(t,e),bl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ml(t,e),bl(e);break;case 13:ml(t,e),bl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=Xe())),4&i&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||h,ml(t,e),Xo=u):ml(t,e),bl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Zo=e,h=e.child;null!==h;){for(d=Zo=h;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ec(i,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Zo=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){Ec(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),bl(e),4&i&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Zo=e,xl(e,t,n)}function xl(e,t,n){for(var i=0!==(1&e.mode);null!==Zo;){var r=Zo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||$o;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=$o;var c=Xo;if($o=a,(Xo=l)&&!c)for(Zo=r;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?kl(r):null!==l?(l.return=a,Zo=l):kl(r);for(;null!==s;)Zo=s,xl(s,t,n),s=s.sibling;Zo=r,$o=o,Xo=c}wl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Zo=s):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Xo)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ws(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ht(d)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&sl(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function kl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Ec(t,r,l)}}var s=t.return;try{sl(t)}catch(l){Ec(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Sl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Nl=x.ReactCurrentBatchConfig,Ml=0,Dl=null,Pl=null,Il=0,Al=0,Ll=Er(0),Ol=0,Rl=null,jl=0,Fl=0,Vl=0,zl=null,Bl=null,Ul=0,Hl=1/0,Wl=null,ql=!1,Kl=null,Yl=null,Ql=!1,Gl=null,$l=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Ml)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Il?Il&-Il:null!==ms.transition?(0===ec&&(ec=gt()),ec):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ic(e,t,n,i){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));bt(e,n,i),0!==(2&Ml)&&e===Dl||(e===Dl&&(0===(2&Ml)&&(Fl|=n),4===Ol&&lc(e,Il)),rc(e,i),1===n&&0===Ml&&0===(1&t.mode)&&(Hl=Xe()+500,zr&&Hr()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=dt(e,e===Dl?Il:0);if(0===i)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zr=!0,Ur(e)}(cc.bind(null,e)):Ur(cc.bind(null,e)),or((function(){0===(6&Ml)&&Hr()})),n=null;else{switch(wt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Dc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Ml))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var i=dt(e,e===Dl?Il:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var r=Ml;Ml|=2;var a=gc();for(Dl===e&&Il===t||(Wl=null,Hl=Xe()+500,fc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ts(),Cl.current=a,Ml=r,null!==Pl?t=0:(Dl=null,Il=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=ac(e,r))),1===t)throw n=Rl,fc(e,0),lc(e,i),rc(e,Xe()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!li(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=yc(e,i))&&(0!==(a=pt(e))&&(i=a,t=ac(e,a))),1===t))throw n=Rl,fc(e,0),lc(e,i),rc(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Bl,Wl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Ul+500-Xe())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=rr(_c.bind(null,e,Bl,Wl),t);break}_c(e,Bl,Wl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){e.timeoutHandle=rr(_c.bind(null,e,Bl,Wl),i);break}_c(e,Bl,Wl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Vl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Ml))throw Error(s(327));kc();var t=dt(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=ac(e,i))}if(1===n)throw n=Rl,fc(e,0),lc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bl,Wl),rc(e,Xe()),null}function uc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Hl=Xe()+500,zr&&Hr())}}function hc(e){null!==Gl&&0===Gl.tag&&0===(6&Ml)&&kc();var t=Ml;Ml|=1;var n=Nl.transition,i=xt;try{if(Nl.transition=null,xt=1,e)return e()}finally{xt=i,Nl.transition=n,0===(6&(Ml=t))&&Hr()}}function dc(){Al=Ll.current,Cr(Ll)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,sr(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(ns(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:Xs(),Cr(Dr),Cr(Mr),ia();break;case 5:Zs(i);break;case 4:Xs();break;case 13:case 19:Cr(ea);break;case 10:Ns(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Dl=e,Pl=e=Lc(e.current,null),Il=Al=t,Ol=0,Rl=null,Vl=Fl=jl=0,Bl=zl=null,null!==Is){for(t=0;t<Is.length;t++)if(null!==(i=(n=Is[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Is=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(Ts(),ra.current=Ja,ua){for(var i=oa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ua=!1}if(aa=0,ca=la=oa=null,ha=!1,da=0,Tl.current=null,null===n||null===n.return){Ol=1,Rl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,bo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bo(y,o,l,0,t),gs(co(c,l));break e}}a=c=co(c,l),4!==Ol&&(Ol=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Us(a,po(0,c,t));break e;case 1:l=c;var b=a.type,v=a.stateNode;if(0===(128&a.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Yl||!Yl.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t,Us(a,go(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=Ja,null===e?Ja:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Dl||0===(268435455&jl)&&0===(268435455&Fl)||lc(Dl,Il)}function yc(e,t){var n=Ml;Ml|=2;var i=gc();for(Dl===e&&Il===t||(Wl=null,fc(e,t));;)try{bc();break}catch(r){pc(e,r)}if(Ts(),Ml=n,Cl.current=i,null!==Pl)throw Error(s(261));return Dl=null,Il=0,Ol}function bc(){for(;null!==Pl;)xc(Pl)}function vc(){for(;null!==Pl&&!Ge();)xc(Pl)}function xc(e){var t=Sl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?wc(e):Pl=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Al)))return void(Pl=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ol=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var i=xt,r=Nl.transition;try{Nl.transition=null,xt=1,function(e,t,n,i){do{kc()}while(null!==Gl);if(0!==(6&Ml))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===Dl&&(Pl=Dl=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Dc(tt,(function(){return kc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var o=xt;xt=1;var l=Ml;Ml|=4,Tl.current=null,function(e,t){if(tr=qt,pi(e=fi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=o),f===a&&++h===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nr={focusedElem:e,selectionRange:n},qt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:no(t.type,m),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}g=nl,nl=!1}(e,n),yl(n,e),gi(nr),qt=!!tr,nr=tr=null,e.current=n,vl(n,e,r),$e(),Ml=l,xt=o,Nl.transition=a}else e.current=n;if(Ql&&(Ql=!1,Gl=e,$l=r),a=e.pendingLanes,0===a&&(Yl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ql)throw ql=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Hr()}(e,t,n,i)}finally{Nl.transition=r,xt=i}return null}function kc(){if(null!==Gl){var e=wt($l),t=Nl.transition,n=xt;try{if(Nl.transition=null,xt=16>e?16:e,null===Gl)var i=!1;else{if(e=Gl,Gl=null,$l=0,0!==(6&Ml))throw Error(s(331));var r=Ml;for(Ml|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var h=Zo;switch(h.tag){case 0:case 11:case 15:il(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zo=d;else for(;null!==Zo;){var f=(h=Zo).sibling,p=h.return;if(al(h),h===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var b=a.sibling;if(null!==b){b.return=a.return,Zo=b;break e}Zo=a.return}}var v=e.current;for(Zo=v;null!==Zo;){var x=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Zo=x;else e:for(o=v;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ec(l,l.return,_)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Ml=r,Hr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(_){}i=!0}return i}finally{xt=n,Nl.transition=t}}return!1}function Sc(e,t,n){e=zs(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(bt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yl||!Yl.has(i))){t=zs(t,e=go(t,e=co(n,e),1),1),e=tc(),null!==t&&(bt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Il&n)===n&&(4===Ol||3===Ol&&(130023424&Il)===Il&&500>Xe()-Ul?fc(e,0):Vl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Os(e,t))&&(bt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Tc(e,n)}function Dc(e,t){return Ye(e,t)}function Pc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,i){return new Pc(e,t,n,i)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Ac(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Rc(n.children,r,a,t);case S:o=8,r|=8;break;case E:return(e=Ic(12,n,t,2|r)).elementType=E,e.lanes=a,e;case M:return(e=Ic(13,n,t,r)).elementType=M,e.lanes=a,e;case D:return(e=Ic(19,n,t,r)).elementType=D,e.lanes=a,e;case A:return jc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case T:o=9;break e;case N:o=11;break e;case P:o=14;break e;case I:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ic(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Rc(e,t,n,i){return(e=Ic(7,e,i,t)).lanes=n,e}function jc(e,t,n,i){return(e=Ic(22,e,i,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,i,r,s,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ic(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},js(s),e}function Uc(e){if(!e)return Nr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ar(n))return Rr(e,n,t)}return t}function Hc(e,t,n,i,r,s,a,o,l){return(e=Bc(n,i,!0,e,0,s,0,o,l)).context=Uc(null),n=e.current,(s=Vs(i=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,r),e.current.lanes=r,bt(e,r,i),rc(e,i),e}function Wc(e,t,n,i){var r=t.current,s=tc(),a=nc(r);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vs(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=zs(r,t,a))&&(ic(e,r,a,s),Bs(e,r,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Dr.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Do(t),ps();break;case 5:Js(t);break;case 1:Ar(t.type)&&jr(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Tr(ks,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Tr(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(Tr(ea,1&ea.current),null!==(e=qo(e,t,n))?e.sibling:null);Tr(ea,1&ea.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ho(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(ea,ea.current),i)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return qo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,ss&&0!==(1048576&t.flags)&&es(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wo(e,t),e=t.pendingProps;var r=Ir(t,Mr.current);Ds(t,n),r=ma(null,t,i,e,r,n);var a=ya();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ar(i)?(a=!0,jr(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,js(t),r.updater=ro,t.stateNode=r,r._reactInternals=t,lo(t,i,e,n),t=Mo(null,t,i,!0,a,n)):(t.tag=0,ss&&a&&ts(t),wo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=no(i,e),r){case 0:t=To(null,t,i,e,n);break e;case 1:t=No(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=ko(null,t,i,no(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,To(e,t,i,r=t.elementType===i?r:no(i,r),n);case 1:return i=t.type,r=t.pendingProps,No(e,t,i,r=t.elementType===i?r:no(i,r),n);case 3:e:{if(Do(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Fs(e,t),Hs(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,i,n,r=co(Error(s(423)),t));break e}if(i!==r){t=Po(e,t,i,n,r=co(Error(s(424)),t));break e}for(rs=ur(t.stateNode.containerInfo.firstChild),is=t,ss=!0,as=null,n=_s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=qo(e,t,n);break e}wo(e,t,i,n)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,ir(i,r)?o=null:null!==a&&ir(i,a)&&(t.flags|=32),Co(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Fo(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ws(t,null,i,n):wo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,_o(e,t,i,r=t.elementType===i?r:no(i,r),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Tr(ks,i._currentValue),i._currentValue=o,null!==a)if(li(a.value,o)){if(a.children===r.children&&!Dr.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Vs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ms(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ms(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ds(t,n),i=i(r=Ps(r)),t.flags|=1,wo(e,t,i,n),t.child;case 14:return r=no(i=t.type,t.pendingProps),ko(e,t,i,r=no(i.type,r),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:no(i,r),Wo(e,t),t.tag=1,Ar(i)?(e=!0,jr(t)):e=!1,Ds(t,n),ao(t,i,r),lo(t,i,r,n),Mo(null,t,i,!0,e,n);case 19:return Ho(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=qc(a);o.call(e)}}Wc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=qc(a);s.call(e)}}var a=Hc(t,i,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[gr]=a.current,Hi(8===e.nodeType?e.parentNode:e),hc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=qc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[gr]=l.current,Hi(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,i)})),l}(n,t,e,r,i);return qc(a)}$c.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[gr]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Ml)&&(Hl=Xe()+500,Hr()))}break;case 13:hc((function(){var t=Os(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Yc(e,1)}},kt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)ic(t,e,134217728,tc());Yc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Os(e,t);if(null!==n)ic(n,e,t,tc());Yc(e,t)}},Et=function(){return xt},Ct=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(s(90));Y(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=uc,Me=hc;var tu={usingClientEntryPoint:!1,Events:[xr,wr,_r,Ce,Te,uc]},nu={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,i="",r=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,i,r),e[gr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,a,o),e[gr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[gr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.p="/";var i=n(43),r=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,a=s?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==o)throw new d;const l=t<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class d extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(e){return function(e){const t=u(e);return h.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return h.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const g=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,m=()=>{try{return g()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{const t=(e=>{var t,n;return null===(n=null===(t=m())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},b=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return!function(){var e;const t=null===(e=m())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(E,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new k(n,s,t)}}const E=/\{\$([^}]+)}/g;function C(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(T(n)&&T(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function T(e){return null!==e&&"object"===typeof e}function N(e){return e&&e._delegate?e._delegate:e}class M{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const D="[DEFAULT]";class P{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new v;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===D?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class I{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const A=[];var L;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(L||(L={}));const O={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},R=L.INFO,j={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},F=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=j[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class V{constructor(e){this.name=e,this._logLevel=R,this._logHandler=F,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?O[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...t),this._logHandler(this,L.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...t),this._logHandler(this,L.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.INFO,...t),this._logHandler(this,L.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.WARN,...t),this._logHandler(this,L.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.ERROR,...t),this._logHandler(this,L.ERROR,...t)}}let z,B;const U=new WeakMap,H=new WeakMap,W=new WeakMap,q=new WeakMap,K=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||W.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Q(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(X(this),n),$(U.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return $(e.apply(X(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(X(this),t,...i);return W.set(s,t.sort?t.sort():[t]),$(s)}}function G(e){return"function"===typeof e?Q(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));H.set(e,t)}(e),t=e,(z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Y):e);var t}function $(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t($(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&U.set(t,e)})).catch((()=>{})),K.set(t,e),t}(e);if(q.has(e))return q.get(e);const t=G(e);return t!==e&&(q.set(e,t),K.set(t,e)),t}const X=e=>K.get(e);const J=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],ee=new Map;function te(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ee.get(t))return ee.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Z.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!J.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&t.done]))[0]};return ee.set(t,s),s}!function(e){Y=e(Y)}((e=>c(c({},e),{},{get:(t,n,i)=>te(t,n)||e.get(t,n,i),has:(t,n)=>!!te(t,n)||e.has(t,n)})));class ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ie="@firebase/app",re="0.10.13",se=new V("@firebase/app"),ae="@firebase/app-compat",oe="@firebase/analytics-compat",le="@firebase/analytics",ce="@firebase/app-check-compat",ue="@firebase/app-check",he="@firebase/auth",de="@firebase/auth-compat",fe="@firebase/database",pe="@firebase/data-connect",ge="@firebase/database-compat",me="@firebase/functions",ye="@firebase/functions-compat",be="@firebase/installations",ve="@firebase/installations-compat",xe="@firebase/messaging",we="@firebase/messaging-compat",_e="@firebase/performance",ke="@firebase/performance-compat",Se="@firebase/remote-config",Ee="@firebase/remote-config-compat",Ce="@firebase/storage",Te="@firebase/storage-compat",Ne="@firebase/firestore",Me="@firebase/vertexai-preview",De="@firebase/firestore-compat",Pe="firebase",Ie="[DEFAULT]",Ae={[ie]:"fire-core",[ae]:"fire-core-compat",[le]:"fire-analytics",[oe]:"fire-analytics-compat",[ue]:"fire-app-check",[ce]:"fire-app-check-compat",[he]:"fire-auth",[de]:"fire-auth-compat",[fe]:"fire-rtdb",[pe]:"fire-data-connect",[ge]:"fire-rtdb-compat",[me]:"fire-fn",[ye]:"fire-fn-compat",[be]:"fire-iid",[ve]:"fire-iid-compat",[xe]:"fire-fcm",[we]:"fire-fcm-compat",[_e]:"fire-perf",[ke]:"fire-perf-compat",[Se]:"fire-rc",[Ee]:"fire-rc-compat",[Ce]:"fire-gcs",[Te]:"fire-gcs-compat",[Ne]:"fire-fst",[De]:"fire-fst-compat",[Me]:"fire-vertex","fire-js":"fire-js",[Pe]:"fire-js-all"},Le=new Map,Oe=new Map,Re=new Map;function je(e,t){try{e.container.addComponent(t)}catch(n){se.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Fe(e){const t=e.name;if(Re.has(t))return se.debug("There were multiple attempts to register component ".concat(t,".")),!1;Re.set(t,e);for(const n of Le.values())je(n,e);for(const n of Oe.values())je(n,e);return!0}function Ve(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ze=new S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Be{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new M("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ze.create("app-deleted",{appName:this._name})}}function Ue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Ie,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw ze.create("bad-app-name",{appName:String(r)});if(n||(n=b()),!n)throw ze.create("no-options");const s=Le.get(r);if(s){if(C(n,s.options)&&C(i,s.config))return s;throw ze.create("duplicate-app",{appName:r})}const a=new I(r);for(const l of Re.values())a.addComponent(l);const o=new Be(n,i,a);return Le.set(r,o),o}function He(e,t,n){var i;let r=null!==(i=Ae[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void se.warn(e.join(" "))}Fe(new M("".concat(r,"-version"),(()=>({library:r,version:t})),"VERSION"))}const We="firebase-heartbeat-store";let qe=null;function Ke(){return qe||(qe=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=$(a);return i&&a.addEventListener("upgradeneeded",(e=>{i($(a.result),e.oldVersion,e.newVersion,$(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(We)}catch(n){console.warn(n)}}}).catch((e=>{throw ze.create("idb-open",{originalErrorMessage:e.message})}))),qe}async function Ye(e,t){try{const n=(await Ke()).transaction(We,"readwrite"),i=n.objectStore(We);await i.put(t,Qe(e)),await n.done}catch(n){if(n instanceof k)se.warn(n.message);else{const e=ze.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});se.warn(e.message)}}}function Qe(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ge{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$e();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){se.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=$e(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Je(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Je(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=f(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return se.warn(t),""}}}function $e(){return(new Date).toISOString().substring(0,10)}class Xe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ke()).transaction(We),n=await t.objectStore(We).get(Qe(e));return await t.done,n}catch(t){if(t instanceof k)se.warn(t.message);else{const e=ze.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});se.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Je(e){return f(JSON.stringify({version:2,heartbeats:e})).length}var Ze;Ze="",Fe(new M("platform-logger",(e=>new ne(e)),"PRIVATE")),Fe(new M("heartbeat",(e=>new Ge(e)),"PRIVATE")),He(ie,re,Ze),He(ie,re,"esm2017"),He("fire-js","");var et,tt,nt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},it={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],a=t+(s^n&(r^s))+i[0]+3614090360&4294967295;a=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=s+((a=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=i;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,r),s=0;break}}else for(;a<t;)if(r[s++]=e[a++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function s(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new i([0|e],0>e?-1:0)})):new i([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(o,o);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;0>=i.l(e);)n=y(n),i=y(i);var r=b(n,1),s=b(i,1);for(i=b(i,2),n=b(n,2);!u(i);){var c=s.add(i);0>=c.l(e)&&(r=r.add(n),s=c),i=b(i,1),n=b(n,1)}return t=f(e,r.j(t)),new g(r,t)}for(r=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=a(n)).j(t);h(c)||0<c.l(e);)c=(s=a(n-=i)).j(t);u(s)&&(s=l),r=r.add(s),e=f(e,c)}return new g(r,e)}function y(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function b(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],a=0;a<r;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,i="";;){var r=m(n,t).g,s=((0<(n=f(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var a=r+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=e.i(s)>>>16,m=65535&e.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,tt=it.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=a,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=a(Math.pow(n,8)),r=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),r=r.j(l).add(a(c))):r=(r=r.j(i)).add(a(c))}return r},et=it.Integer=i}).apply("undefined"!==typeof nt?nt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var rt,st,at,ot,lt,ct,ut,ht,dt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ft={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof dt&&dt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in r))break e;r=r[a]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e,t){return t}))}}));var i=i||{},r=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function b(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function v(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){r.setTimeout((()=>{throw e}),0)}function S(){var e=M;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new C),(e=>e.reset()));class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,N=!1,M=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=r.Promise.resolve(void 0);T=()=>{e.then(P)}};var P=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function I(){this.s=this.s,this.C=this.C}function A(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},A.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(A.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:R[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}h(O,A);var R={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function U(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}B.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=H(e,t,i,r);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,i,r){if(i&&i.once)return Q(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,i,r);return null}return n=te(n),e&&e[j]?e.K(t,n,a(i)?!!i.capture:!!i,r):Y(e,t,n,!1,i,r)}function Y(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=a(r)?!!r.capture:!!r,l=Z(e);if(l||(e[W]=l=new B(e)),(n=l.add(t,n,i,o,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)L||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(X(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Q(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,i,r);return null}return n=te(n),e&&e[j]?e.L(t,n,a(i)?!!i.capture:!!i,r):Y(e,t,n,!0,i,r)}function G(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,i,r);else i=a(i)?!!i.capture:!!i,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,i,r))&&(z(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,i,r)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])U(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(X(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Z(t))?(U(n,e),0==n.h&&(n.src=null,t[W]=null)):z(e)}}}function X(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&$(e),e=n.call(i,t)}return e}function Z(e){return(e=e[W])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){I.call(this),this.i=new B(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new A(t,e);else if(t instanceof A)t.target=t.target||e;else{var r=t;w(t=new A(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];r=re(a,i,!0,t)&&r}if(r=re(a=t.g=e,i,!0,t)&&r,r=re(a,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=re(a=t.g=n[s],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&U(e.i,a),r=!1!==o.call(l,i)&&r}}return r&&!i.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,I),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,i){G(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)z(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class oe extends I{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){I.call(this),this.h=e,this.g={}}h(le,I);var ce=[];function ue(e){b(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=r.JSON.stringify,de=r.JSON.parse,fe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function be(){A.call(this,"d")}function ve(){A.call(this,"c")}h(be,A),h(ve,A);var xe={},we=null;function _e(){return we=we||new ne}function ke(e){A.call(this,xe.La,e)}function Se(e){const t=_e();ie(t,new ke(t))}function Ee(e,t){A.call(this,xe.STAT_EVENT,e),this.stat=t}function Ce(e){const t=_e();ie(t,new Ee(t,e))}function Te(e,t){A.call(this,xe.Ma,e),this.size=t}function Ne(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){e()}),t)}function Me(){this.g=!0}function De(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<r.length;a++)r[a]=""}}}return he(n)}catch(o){return t}}(e,n)+(i?" "+i:"")}))}xe.La="serverreachability",h(ke,A),xe.STAT_EVENT="statevent",h(Ee,A),xe.Ma="timingevent",h(Te,A),Me.prototype.xa=function(){this.g=!1},Me.prototype.info=function(){};var Pe,Ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function Oe(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}h(Le,pe),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},Pe=new Le;var je={},Fe={};function Ve(e,t,n){e.L=1,e.v=kt(bt(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),He(e),e.A=bt(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),jt(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Re,e.g=En(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(ce[0]=r.toString()),r=ce);for(var s=0;s<r.length;s++){var a=K(n,r[s],i||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?v(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ue(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Fe:(n=Number(t.substring(n,i)),isNaN(n)?je:(i+=1)+n>t.length?Fe:(t=t.slice(i,i+n),e.C=i+n,t))}function He(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ne(c(e.ba,e),t)}function qe(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||xn(e.j,e)}function Ye(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),cn(n)}mn(n),Ce(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ne(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else _n(n,11)}else if((e.K||n.g==e)&&vn(n),!p(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,_t(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((i=n).qa=Sn(i,i.J?i.ia:null,i.W),a.K){tt(i.h,a);var o=a,l=i.L;l&&(o.I=l),o.B&&(qe(o),He(o)),i.g=a}else gn(i);0<n.i.length&&hn(n)}else"stop"!=c[0]&&"close"!=c[0]||_n(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?_n(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const d=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=d||7==t||Se(),qe(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var i=sn(this.g);e="";var s=i.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ye(this),Ke(this);var o="";break t}this.h.i=new r.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(a&&t==s-1)});i.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,s,a){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ye(this),Ke(this);break e}De(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ue(this,o),e==Fe){4==d&&(this.s=4,Ce(14),n=!1),De(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Ce(15),De(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}De(this.i,this.l,e,null),Qe(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),yn(h),h.M=!0,Ce(11))}}else De(this.i,this.l,o,"[Invalid Chunked Response]"),Ye(this),Ke(this)}else De(this.i,this.l,o,null),Qe(this,o);4==d&&Ye(this),this.o&&!this.J&&(4==d?xn(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(p(e[i]))continue;var n=_(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ye(this),Ke(this)}}}catch(pt){}},Oe.prototype.cancel=function(){this.J=!0,Ye(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),Ce(17)),Ye(this),this.s=2,Ke(this)):We(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,a=0;a<r;a++)t.call(void 0,i[a],n&&n[a],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,vt(this,e.j),this.o=e.o,this.g=e.g,xt(this,e.s),this.l=e.l;var t=e.i,n=new At;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,vt(this,t[1]||"",!0),this.o=St(t[2]||""),this.g=St(t[3]||"",!0),xt(this,t[4]),this.l=St(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=St(t[7]||"")):(this.h=!1,this.i=new At(null,this.h))}function bt(e){return new mt(e)}function vt(e,t,n){e.j=n?St(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function xt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof At?(e.i=t,function(e,t){t&&!e.j&&(Lt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ot(this,t),jt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Et(t,Pt)),e.i=new At(t,e.h))}function _t(e,t,n){e.i.set(t,n)}function kt(e){return _t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Et(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Et(t,Nt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Et(t,Nt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Et(n,"/"==n.charAt(0)?Dt:Mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Et(n,It)),e.join("")};var Tt,Nt=/[#\/\?@]/g,Mt=/[#\?:]/g,Dt=/[#\?]/g,Pt=/[#\?@]/g,It=/#/g;function At(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ot(e,t){Lt(e),t=Ft(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rt(e,t){return Lt(e),t=Ft(e,t),e.g.has(t)}function jt(e,t,n){Ot(e,t),0<n.length&&(e.i=null,e.g.set(Ft(e,t),d(n)),e.h+=n.length)}function Ft(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Vt(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function zt(){this.g=new fe}function Bt(e,t,n){const i=n||"";try{it(e,(function(e,n){let r=e;a(e)&&(r=he(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Ut(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ht(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Wt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Yt(e){let t="";return b(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Qt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Yt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_t(e,t,n))}function Gt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=At.prototype).add=function(e,t){Lt(this),this.i=null,e=Ft(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Lt(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},e.na=function(){Lt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){Lt(this);let t=[];if("string"===typeof e)Rt(this,e)&&(t=t.concat(this.g.get(Ft(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Lt(this),this.i=null,Rt(this,e=Ft(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),a=this.V(i);for(i=0;i<a.length;i++){var r=s;""!==a[i]&&(r+="="+encodeURIComponent(String(a[i]))),e.push(r)}}return this.i=e.join("&")},h(Ut,pe),Ut.prototype.g=function(){return new Ht(this.l,this.j)},Ut.prototype.i=(Tt={},function(){return Tt}),h(Ht,ne),(e=Ht.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Kt(this),3==this.readyState&&Wt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ht.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Gt,ne);var $t=/^https?$/i,Xt=["POST","PUT"];function Jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof i&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))se(e.Ea,0,e);else if(ie(e,"readystatechange"),4==rn(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===i){var a=String(e.D).match(gt)[1]||null;!a&&r.self&&r.self.location&&(a=r.self.location.protocol.slice(0,-1)),s=!$t.test(a?a.toLowerCase():"")}n=s}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var o=2<rn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const i=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{i.onreadystatechange=r}catch(n){}}}function nn(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(yt){return null}}function an(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new Me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,e),this.cb=an("retryDelaySeedMs",1e4,e),this.Wa=an("forwardChannelMaxRetries",2,e),this.wa=an("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new zt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=bt(e.I);if(_t(n,"SID",e.K),_t(n,"RID",t),_t(n,"TYPE","terminate"),fn(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=kt(bt(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=En(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}kn(e)}function cn(e){e.g&&(yn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(r.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function hn(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||D(),N||(T(),N=!0),M.add(t,e),e.B=0}}function dn(e,t){var n;n=t?t.l:e.U++;const i=bt(e.I);_t(i,"SID",e.K),_t(i,"RID",n),_t(i,"AID",e.T),fn(e,i),e.m&&e.o&&Qt(i,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=pn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,i,t)}function fn(e,t){e.H&&b(e.H,(function(e,n){_t(t,n,e)})),e.l&&it({},(function(e,n){_t(t,n,e)}))}function pn(e,t,n){n=Math.min(e.i.length,n);var i=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=r[a].g;const o=r[a].map;if(n-=t,0>n)t=Math.max(0,r[a].g-100),s=!1;else try{Bt(o,e,"req"+n+"_")}catch(pt){i&&i(o)}}if(s){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function gn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||D(),N||(T(),N=!0),M.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ne(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function yn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function bn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=bt(e.qa);_t(t,"RID","rpc"),_t(t,"SID",e.K),_t(t,"AID",e.T),_t(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&_t(t,"TO",e.ja),_t(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=kt(bt(t)),n.m=null,n.P=!0,ze(n,e)}function vn(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function xn(e,t){var n=null;if(e.g==t){vn(e),yn(e),e.g=null;var i=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=_e(),new Te(i,n)),hn(e)}else gn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ne(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==i&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:_n(e,5);break;case 4:_n(e,10);break;case 3:_n(e,6);break;default:_n(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function _n(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),i=e.Xa;const t=!i;i=new mt(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||vt(i,"https"),kt(i),t?function(e,t){const n=new Me;if(r.Image){const i=new Image;i.onload=u(Vt,n,"TestLoadImage: loaded",!0,t,i),i.onerror=u(Vt,n,"TestLoadImage: error",!1,t,i),i.onabort=u(Vt,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=u(Vt,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new Me;const n=new AbortController,i=setTimeout((()=>{n.abort(),Vt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(i),e.ok?Vt(0,0,!0,t):Vt(0,0,!1,t)})).catch((()=>{clearTimeout(i),Vt(0,0,!1,t)}))}(i.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),kn(e),un(e)}function kn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function Sn(e,t,n){var i=n instanceof mt?bt(n):new mt(n);if(""!=i.g)t&&(i.g=t+"."+i.g),xt(i,i.s);else{var s=r.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new mt(null);i&&vt(a,i),t&&(a.g=t),s&&xt(a,s),n&&(a.l=n),i=a}return n=e.D,t=e.ya,n&&t&&_t(i,n,t),_t(i,"VER",e.la),fn(e,i),i}function En(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Ut({eb:n})):new Gt(e.pa)).Ha(e.J),t}function Cn(){}function Tn(){}function Nn(e,t){ne.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pn(this)}function Mn(e){be.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Dn(){ve.call(this),this.status=1}function Pn(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?ge(this.o):ge(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Jt(this,a)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Xt,t,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(Tt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Tt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){Ce(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=Sn(this,null,this.W),hn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=v(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pn(this,r,t),_t(n=bt(this.I),"RID",e),_t(n,"CVER",22),this.D&&_t(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Yt(s)))+"&"+t:this.m&&Qt(n,this.m,s)),et(this.h,r),this.Ua&&_t(n,"TYPE","init"),this.P?(_t(n,"$req",t),_t(n,"SID","null"),r.T=!0,Ve(r,n,null)):Ve(r,n,t),this.G=2}}else 3==this.G&&(e?dn(this,e):0==this.i.length||Xe(this.h)||dn(this))},e.Fa=function(){if(this.u=null,bn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ne(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),cn(this),bn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),mn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Cn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Tn.prototype.g=function(e,t){return new Nn(e,t)},h(Nn,ne),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){ln(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&hn(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,Nn.aa.N.call(this)},h(Mn,be),h(Dn,ve),h(Pn,Cn),Pn.prototype.ua=function(){ie(this.g,"a")},Pn.prototype.ta=function(e){ie(this.g,new Mn(e))},Pn.prototype.sa=function(e){ie(this.g,new Dn)},Pn.prototype.ra=function(){ie(this.g,"b")},Tn.prototype.createWebChannel=Tn.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,ht=ft.createWebChannelTransport=function(){return new Tn},ut=ft.getStatEventTarget=function(){return _e()},ct=ft.Event=xe,lt=ft.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,ot=ft.ErrorCode=Ie,Ae.COMPLETE="complete",at=ft.EventType=Ae,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,st=ft.WebChannel=me,ft.FetchXmlHttpFactory=Ut,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,rt=ft.XhrIo=Gt}).apply("undefined"!==typeof dt?dt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const pt="@firebase/firestore";class gt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");let mt="10.14.0";const yt=new V("@firebase/firestore");function bt(){return yt.logLevel}function vt(e){if(yt.logLevel<=L.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(_t);yt.debug("Firestore (".concat(mt,"): ").concat(e),...r)}}function xt(e){if(yt.logLevel<=L.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(_t);yt.error("Firestore (".concat(mt,"): ").concat(e),...r)}}function wt(e){if(yt.logLevel<=L.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(_t);yt.warn("Firestore (".concat(mt,"): ").concat(e),...r)}}function _t(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(mt,") INTERNAL ASSERTION FAILED: ")+e;throw xt(t),new Error(t)}function St(e,t){e||kt()}function Et(e,t){return e}const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends k{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Nt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Mt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Dt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gt.UNAUTHENTICATED)))}shutdown(){}}class Pt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class It{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){St(void 0===this.o);let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Nt;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Nt,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},a=e=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Nt)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(St("string"==typeof t.accessToken),new Mt(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new gt(e)}}class At{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Lt{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new At(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ot{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rt{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){St(void 0===this.o);const n=e=>{null!=e.error&&vt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,vt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(St("string"==typeof e.token),this.R=e.token,new Ot(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function jt(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class Ft{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=jt(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function Vt(e,t){return e<t?-1:e>t?1:0}function zt(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Bt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Tt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Bt(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new Bt(0,0))}static max(){return new Ut(new Bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ht{constructor(e,t,n){void 0===t?t=0:t>e.length&&kt(),void 0===n?n=e.length-t:n>e.length-t&&kt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ht.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ht?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends Ht{construct(e,t,n){return new Wt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Tt(Ct.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter((e=>e.length>0)))}return new Wt(e)}static emptyPath(){return new Wt([])}}const qt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Ht{construct(e,t,n){return new Kt(e,t,n)}static isValidIdentifier(e){return qt.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Tt(Ct.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new Tt(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Tt(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new Tt(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}class Yt{constructor(e){this.path=e}static fromPath(e){return new Yt(Wt.fromString(e))}static fromName(e){return new Yt(Wt.fromString(e).popFirst(5))}static empty(){return new Yt(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yt(new Wt(e.slice()))}}class Qt{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}Qt.UNKNOWN_ID=-1;function Gt(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Ut.fromTimestamp(1e9===i?new Bt(n+1,0):new Bt(n,i));return new Xt(r,Yt.empty(),t)}function $t(e){return new Xt(e.readTime,e.key,-1)}class Xt{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Xt(Ut.min(),Yt.empty(),-1)}static max(){return new Xt(Ut.max(),Yt.empty(),-1)}}function Jt(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Yt.comparator(e.documentKey,t.documentKey),0!==n?n:Vt(e.largestBatchId,t.largestBatchId))}const Zt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class en{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tn(e){if(e.code!==Ct.FAILED_PRECONDITION||e.message!==Zt)throw e;vt("LocalStore","Unexpectedly lost primary lease")}class nn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nn(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof nn?t:nn.resolve(t)}catch(e){return nn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):nn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):nn.reject(t)}static resolve(e){return new nn(((t,n)=>{t(e)}))}static reject(e){return new nn(((t,n)=>{n(e)}))}static waitFor(e){return new nn(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=nn.resolve(!1);for(const n of e)t=t.next((e=>e?nn.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new nn(((n,i)=>{const r=e.length,s=new Array(r);let a=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new nn(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function rn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sn(e){return"IndexedDbTransactionError"===e.name}class an{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function on(e){return null==e}function ln(e){return 0===e&&1/e==-1/0}function cn(e){return"number"==typeof e&&Number.isInteger(e)&&!ln(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}an.oe=-1;const un=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dn=hn,fn=[...dn,"indexConfiguration","indexState","indexEntries"];function pn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function gn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function mn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class yn{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bn(this.root,e,this.comparator,!1)}getReverseIterator(){return new bn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bn(this.root,e,this.comparator,!0)}}class bn{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:vn.RED,this.left=null!=i?i:vn.EMPTY,this.right=null!=r?r:vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new vn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return vn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kt();if(this.right.isRed())throw kt();const e=this.left.check();if(e!==this.right.check())throw kt();return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1,vn.EMPTY=new class{constructor(){this.size=0}get key(){throw kt()}get value(){throw kt()}get color(){throw kt()}get left(){throw kt()}get right(){throw kt()}copy(e,t,n,i,r){return this}insert(e,t,n){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wn(this.data.getIterator())}getIteratorFrom(e){return new wn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof xn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xn(this.comparator);return t.data=e,t}}class wn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _n{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new _n([])}unionWith(e){let t=new xn(Kt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zt(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class kn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new kn("Invalid base64 string: "+e):e}}(e);return new Sn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const En=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(e){if(St(!!e),"string"==typeof e){let t=0;const n=En.exec(e);if(St(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Tn(e.seconds),nanos:Tn(e.nanos)}}function Tn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nn(e){return"string"==typeof e?Sn.fromBase64String(e):Sn.fromUint8Array(e)}function Mn(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Dn(e){const t=e.mapValue.fields.__previous_value__;return Mn(t)?Dn(t):t}function Pn(e){const t=Cn(e.mapValue.fields.__local_write_time__.timestampValue);return new Bt(t.seconds,t.nanos)}class In{constructor(e,t,n,i,r,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class An{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new An("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof An&&e.projectId===this.projectId&&e.database===this.database}}const Ln={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function On(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Mn(e)?4:$n(e)?9007199254740991:Qn(e)?10:11:kt()}function Rn(e,t){if(e===t)return!0;const n=On(e);if(n!==On(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Pn(e).isEqual(Pn(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Cn(e.timestampValue),i=Cn(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Nn(e.bytesValue).isEqual(Nn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Tn(e.geoPointValue.latitude)===Tn(t.geoPointValue.latitude)&&Tn(e.geoPointValue.longitude)===Tn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Tn(e.integerValue)===Tn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Tn(e.doubleValue),i=Tn(t.doubleValue);return n===i?ln(n)===ln(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return zt(e.arrayValue.values||[],t.arrayValue.values||[],Rn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(pn(n)!==pn(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Rn(n[r],i[r])))return!1;return!0}(e,t);default:return kt()}}function jn(e,t){return void 0!==(e.values||[]).find((e=>Rn(e,t)))}function Fn(e,t){if(e===t)return 0;const n=On(e),i=On(t);if(n!==i)return Vt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Tn(e.integerValue||e.doubleValue),i=Tn(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Vn(e.timestampValue,t.timestampValue);case 4:return Vn(Pn(e),Pn(t));case 5:return Vt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Nn(e),i=Nn(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Vt(n[r],i[r]);if(0!==e)return e}return Vt(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Vt(Tn(e.latitude),Tn(t.latitude));return 0!==n?n:Vt(Tn(e.longitude),Tn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return zn(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,i,r,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(i=o.value)||void 0===i?void 0:i.arrayValue,u=Vt((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:zn(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ln.mapValue&&t===Ln.mapValue)return 0;if(e===Ln.mapValue)return 1;if(t===Ln.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let a=0;a<i.length&&a<s.length;++a){const e=Vt(i[a],s[a]);if(0!==e)return e;const t=Fn(n[i[a]],r[s[a]]);if(0!==t)return t}return Vt(i.length,s.length)}(e.mapValue,t.mapValue);default:throw kt()}}function Vn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Vt(e,t);const n=Cn(e),i=Cn(t),r=Vt(n.seconds,i.seconds);return 0!==r?r:Vt(n.nanos,i.nanos)}function zn(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Fn(n[r],i[r]);if(e)return e}return Vt(n.length,i.length)}function Bn(e){return Un(e)}function Un(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Cn(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Nn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Yt.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Un(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(Un(e.fields[r]));return n+"}"}(e.mapValue):kt()}function Hn(e){return!!e&&"integerValue"in e}function Wn(e){return!!e&&"arrayValue"in e}function qn(e){return!!e&&"nullValue"in e}function Kn(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Yn(e){return!!e&&"mapValue"in e}function Qn(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gn(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return gn(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gn(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gn(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $n(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Yn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gn(t)}setAll(e){let t=Kt.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Gn(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());Yn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Yn(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){gn(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new Xn(Gn(this.value))}}function Jn(e){const t=[];return gn(e.fields,((e,n)=>{const i=new Kt([e]);if(Yn(n)){const e=Jn(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new _n(t)}class Zn{constructor(e,t,n,i,r,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Zn(e,0,Ut.min(),Ut.min(),Ut.min(),Xn.empty(),0)}static newFoundDocument(e,t,n,i){return new Zn(e,1,t,Ut.min(),n,i,0)}static newNoDocument(e,t){return new Zn(e,2,t,Ut.min(),Ut.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new Zn(e,3,t,Ut.min(),Ut.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ei{constructor(e,t){this.position=e,this.inclusive=t}}function ti(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(i=s.field.isKeyField()?Yt.comparator(Yt.fromName(a.referenceValue),n.key):Fn(a,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ni(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Rn(e.position[n],t.position[n]))return!1;return!0}class ii{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ri(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class si{}class ai extends si{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new pi(e,t,n):"array-contains"===t?new bi(e,n):"in"===t?new vi(e,n):"not-in"===t?new xi(e,n):"array-contains-any"===t?new wi(e,n):new ai(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new gi(e,n):new mi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fn(t,this.value)):null!==t&&On(this.value)===On(t)&&this.matchesComparison(Fn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends si{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new oi(e,t)}matches(e){return li(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function li(e){return"and"===e.op}function ci(e){return ui(e)&&li(e)}function ui(e){for(const t of e.filters)if(t instanceof oi)return!1;return!0}function hi(e){if(e instanceof ai)return e.field.canonicalString()+e.op.toString()+Bn(e.value);if(ci(e))return e.filters.map((e=>hi(e))).join(",");{const t=e.filters.map((e=>hi(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function di(e,t){return e instanceof ai?function(e,t){return t instanceof ai&&e.op===t.op&&e.field.isEqual(t.field)&&Rn(e.value,t.value)}(e,t):e instanceof oi?function(e,t){return t instanceof oi&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&di(n,t.filters[i])),!0)}(e,t):void kt()}function fi(e){return e instanceof ai?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Bn(e.value))}(e):e instanceof oi?function(e){return e.op.toString()+" {"+e.getFilters().map(fi).join(" ,")+"}"}(e):"Filter"}class pi extends ai{constructor(e,t,n){super(e,t,n),this.key=Yt.fromName(n.referenceValue)}matches(e){const t=Yt.comparator(e.key,this.key);return this.matchesComparison(t)}}class gi extends ai{constructor(e,t){super(e,"in",t),this.keys=yi("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mi extends ai{constructor(e,t){super(e,"not-in",t),this.keys=yi("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Yt.fromName(e.referenceValue)))}class bi extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wn(t)&&jn(t.arrayValue,this.value)}}class vi extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jn(this.value.arrayValue,t)}}class xi extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(jn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jn(this.value.arrayValue,t)}}class wi extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wn(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>jn(this.value.arrayValue,e)))}}class _i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=a,this.ue=null}}function ki(e){return new _i(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Si(e){const t=Et(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>hi(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),on(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Bn(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Bn(e))).join(",")),t.ue=e}return t.ue}function Ei(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ri(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!di(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ni(e.startAt,t.startAt)&&ni(e.endAt,t.endAt)}function Ci(e){return Yt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ti{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ni(e,t,n,i,r,s,a,o){return new Ti(e,t,n,i,r,s,a,o)}function Mi(e){return new Ti(e)}function Di(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Pi(e){return null!==e.collectionGroup}function Ii(e){const t=Et(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new xn(Kt.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.ce.push(new ii(i,n))})),e.has(Kt.keyField().canonicalString())||t.ce.push(new ii(Kt.keyField(),n))}return t.ce}function Ai(e){const t=Et(e);return t.le||(t.le=Li(t,Ii(e))),t.le}function Li(e,t){if("F"===e.limitType)return ki(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ii(e.field,t)}));const n=e.endAt?new ei(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ei(e.startAt.position,e.startAt.inclusive):null;return ki(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Oi(e,t,n){return new Ti(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ri(e,t){return Ei(Ai(e),Ai(t))&&e.limitType===t.limitType}function ji(e){return"".concat(Si(Ai(e)),"|lt:").concat(e.limitType)}function Fi(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>fi(e))).join(", "),"]")),on(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Bn(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Bn(e))).join(",")),"Target(".concat(t,")")}(Ai(e)),"; limitType=").concat(e.limitType,")")}function Vi(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yt.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ii(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=ti(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Ii(e),t))&&!(e.endAt&&!function(e,t,n){const i=ti(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Ii(e),t))}(e,t)}function zi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bi(e){return(t,n)=>{let i=!1;for(const r of Ii(e)){const e=Ui(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function Ui(e,t,n){const i=e.field.isKeyField()?Yt.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Fn(i,r):kt()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return kt()}}class Hi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gn(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return mn(this.inner)}size(){return this.innerSize}}const Wi=new yn(Yt.comparator);function qi(){return Wi}const Ki=new yn(Yt.comparator);function Yi(){let e=Ki;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function Qi(e){let t=Ki;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Gi(){return Xi()}function $i(){return Xi()}function Xi(){return new Hi((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ji=new yn(Yt.comparator),Zi=new xn(Yt.comparator);function er(){let e=Zi;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const tr=new xn(Vt);function nr(){return tr}function ir(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ln(t)?"-0":t}}function rr(e){return{integerValue:""+e}}function sr(e,t){return cn(t)?rr(t):ir(e,t)}class ar{constructor(){this._=void 0}}function or(e,t,n){return e instanceof ur?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Mn(t)&&(t=Dn(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof hr?dr(e,t):e instanceof fr?pr(e,t):function(e,t){const n=cr(e,t),i=mr(n)+mr(e.Pe);return Hn(n)&&Hn(e.Pe)?rr(i):ir(e.serializer,i)}(e,t)}function lr(e,t,n){return e instanceof hr?dr(e,t):e instanceof fr?pr(e,t):n}function cr(e,t){return e instanceof gr?function(e){return Hn(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ur extends ar{}class hr extends ar{constructor(e){super(),this.elements=e}}function dr(e,t){const n=yr(t);for(const i of e.elements)n.some((e=>Rn(e,i)))||n.push(i);return{arrayValue:{values:n}}}class fr extends ar{constructor(e){super(),this.elements=e}}function pr(e,t){let n=yr(t);for(const i of e.elements)n=n.filter((e=>!Rn(e,i)));return{arrayValue:{values:n}}}class gr extends ar{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function mr(e){return Tn(e.integerValue||e.doubleValue)}function yr(e){return Wn(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class br{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class wr{}function _r(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ir(e.key,vr.none()):new Tr(e.key,e.data,vr.none());{const n=e.data,i=Xn.empty();let r=new xn(Kt.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new Nr(e.key,i,new _n(r.toArray()),vr.none())}}function kr(e,t,n){e instanceof Tr?function(e,t,n){const i=e.value.clone(),r=Dr(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Nr?function(e,t,n){if(!xr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Dr(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Mr(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Sr(e,t,n,i){return e instanceof Tr?function(e,t,n,i){if(!xr(e.precondition,t))return n;const r=e.value.clone(),s=Pr(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof Nr?function(e,t,n,i){if(!xr(e.precondition,t))return n;const r=Pr(e.fieldTransforms,i,t),s=t.data;return s.setAll(Mr(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return xr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Er(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=cr(i.transform,e||null);null!=r&&(null===n&&(n=Xn.empty()),n.set(i.field,r))}return n||null}function Cr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zt(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof hr&&t instanceof hr||e instanceof fr&&t instanceof fr?zt(e.elements,t.elements,Rn):e instanceof gr&&t instanceof gr?Rn(e.Pe,t.Pe):e instanceof ur&&t instanceof ur}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Tr extends wr{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nr extends wr{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Mr(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Dr(e,t,n){const i=new Map;St(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,o=t.data.field(s.field);i.set(s.field,lr(a,o,n[r]))}return i}function Pr(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,or(e,s,t))}return i}class Ir extends wr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ar extends wr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Lr{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&kr(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Sr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Sr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=$i();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let a=this.applyToLocalView(s,r.mutatedFields);a=t.has(i.key)?null:a;const o=_r(s,a);null!==o&&n.set(i.key,o),s.isValidDocument()||s.convertToNoDocument(Ut.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),er())}isEqual(e){return this.batchId===e.batchId&&zt(this.mutations,e.mutations,((e,t)=>Cr(e,t)))&&zt(this.baseMutations,e.baseMutations,((e,t)=>Cr(e,t)))}}class Or{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){St(e.mutations.length===n.length);let i=Ji;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Or(e,t,n,i)}}class Rr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class jr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fr,Vr;function zr(e){switch(e){default:return kt();case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0}}function Br(e){if(void 0===e)return xt("GRPC error has no .code"),Ct.UNKNOWN;switch(e){case Fr.OK:return Ct.OK;case Fr.CANCELLED:return Ct.CANCELLED;case Fr.UNKNOWN:return Ct.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return Ct.INTERNAL;case Fr.UNAVAILABLE:return Ct.UNAVAILABLE;case Fr.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case Fr.NOT_FOUND:return Ct.NOT_FOUND;case Fr.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case Fr.ABORTED:return Ct.ABORTED;case Fr.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case Fr.DATA_LOSS:return Ct.DATA_LOSS;default:return kt()}}(Vr=Fr||(Fr={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";let Ur=null;function Hr(){return new TextEncoder}const Wr=new et([4294967295,4294967295],0);function qr(e){const t=Hr().encode(e),n=new tt;return n.update(t),new Uint8Array(n.digest())}function Kr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new et([n,i],0),new et([r,s],0)]}class Yr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Qr("Invalid padding: ".concat(t));if(n<0)throw new Qr("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Qr("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Qr("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=et.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(et.fromNumber(n)));return 1===i.compare(Wr)&&(i=new et([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=qr(e),[n,i]=Kr(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);if(!this.de(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new Yr(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=qr(e),[n,i]=Kr(t);for(let r=0;r<this.hashCount;r++){const e=this.Ee(n,i,r);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gr{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,$r.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gr(Ut.min(),i,new yn(Vt),qi(),er())}}class $r{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new $r(n,t,er(),er(),er())}}class Xr{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class Jr{constructor(e,t){this.targetId=e,this.me=t}}class Zr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sn.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class es{constructor(){this.fe=0,this.ge=is(),this.pe=Sn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=er(),t=er(),n=er();return this.ge.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:kt()}})),new $r(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=is()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,St(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ts{constructor(e){this.Le=e,this.Be=new Map,this.ke=qi(),this.qe=ns(),this.Qe=new yn(Vt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:kt()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,i=this.Je(t);if(i){const r=i.target;if(Ci(r))if(0===n){const e=new Yt(r.path);this.Ue(t,e,Zn.newNoDocument(e,Ut.min()))}else St(1===n);else{const i=this.Ye(t);if(i!==n){const n=this.Ze(e),r=n?this.Xe(n,e,i):1;if(0!==r){this.je(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Ur||Ur.et(function(e,t,n,i,r){var s,a,o,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==i?void 0:i.mightContain(e))&&void 0!==t&&t}}),h}(i,e.me,this.Le.tt(),n,r))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=t;let s,a;try{s=Nn(n).toUint8Array()}catch(e){if(e instanceof kn)return wt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Yr(s,i,r)}catch(e){return wt(e instanceof Qr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Le.tt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((n,i)=>{const r=this.Je(i);if(r){if(n.current&&Ci(r.target)){const t=new Yt(r.target.path);null!==this.ke.get(t)||this.it(i,t)||this.Ue(i,t,Zn.newNoDocument(t,e))}n.be&&(t.set(i,n.ve()),n.Ce())}}));let n=er();this.qe.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const i=new Gr(e,t,this.Qe,this.ke,n);return this.ke=qi(),this.qe=ns(),this.Qe=new yn(Vt),i}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new es,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xn(Vt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||vt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new es),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ns(){return new yn(Yt.comparator)}function is(){return new yn(Yt.comparator)}const rs={asc:"ASCENDING",desc:"DESCENDING"},ss={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},as={and:"AND",or:"OR"};class os{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ls(e,t){return e.useProto3Json||on(t)?t:{value:t}}function cs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function us(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hs(e,t){return cs(e,t.toTimestamp())}function ds(e){return St(!!e),Ut.fromTimestamp(function(e){const t=Cn(e);return new Bt(t.seconds,t.nanos)}(e))}function fs(e,t){return ps(e,t).canonicalString()}function ps(e,t){const n=function(e){return new Wt(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function gs(e){const t=Wt.fromString(e);return St(Os(t)),t}function ms(e,t){return fs(e.databaseId,t.path)}function ys(e,t){const n=gs(t);if(n.get(1)!==e.databaseId.projectId)throw new Tt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Tt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yt(ws(n))}function bs(e,t){return fs(e.databaseId,t)}function vs(e){const t=gs(e);return 4===t.length?Wt.emptyPath():ws(t)}function xs(e){return new Wt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ws(e){return St(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function _s(e,t,n){return{name:ms(e,t),fields:n.value.mapValue.fields}}function ks(e,t){let n;if(t instanceof Tr)n={update:_s(e,t.key,t.value)};else if(t instanceof Ir)n={delete:ms(e,t.key)};else if(t instanceof Nr)n={update:_s(e,t.key,t.data),updateMask:Ls(t.fieldMask)};else{if(!(t instanceof Ar))return kt();n={verify:ms(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ur)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gr)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw kt()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:kt()}(e,t.precondition)),n}function Ss(e,t){return{documents:[bs(e,t.path)]}}function Es(e,t){const n={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=bs(e,r);const s=function(e){if(0!==e.length)return As(oi.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ps(e.field),direction:Ns(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ls(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:r}}function Cs(e){let t=vs(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){St(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ts(e);return t instanceof oi&&ci(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new ii(Is(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,on(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ei(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ei(n,t)}(n.endAt)),Ni(t,r,a,s,o,"F",l,c)}function Ts(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Is(e.unaryFilter.field);return ai.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Is(e.unaryFilter.field);return ai.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Is(e.unaryFilter.field);return ai.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Is(e.unaryFilter.field);return ai.create(r,"!=",{nullValue:"NULL_VALUE"});default:return kt()}}(e):void 0!==e.fieldFilter?function(e){return ai.create(Is(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kt()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return oi.create(e.compositeFilter.filters.map((e=>Ts(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return kt()}}(e.compositeFilter.op))}(e):kt()}function Ns(e){return rs[e]}function Ms(e){return ss[e]}function Ds(e){return as[e]}function Ps(e){return{fieldPath:e.canonicalString()}}function Is(e){return Kt.fromServerFormat(e.fieldPath)}function As(e){return e instanceof ai?function(e){if("=="===e.op){if(Kn(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NAN"}};if(qn(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Kn(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NOT_NAN"}};if(qn(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ps(e.field),op:Ms(e.op),value:e.value}}}(e):e instanceof oi?function(e){const t=e.getFilters().map((e=>As(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ds(e.op),filters:t}}}(e):kt()}function Ls(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Os(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Rs{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ut.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ut.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sn.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class js{constructor(e){this.ct=e}}function Fs(e){const t=Cs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Oi(t,t.limit,"L"):t}class Vs{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Tn(e.integerValue));else if("doubleValue"in e){const n=Tn(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),ln(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Cn(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Nn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?$n(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Qn(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):kt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const i of Object.keys(n))this.Vt(i,t),this.Tt(n[i],t)}wt(e,t){var n,i;const r=e.fields||{};this.dt(t,53);const s="value",a=(null===(i=null===(n=r[s].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Tn(a)),this.Vt(s,t),this.Tt(r[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const i of n)this.Tt(i,t)}yt(e,t){this.dt(t,37),Yt.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Vs.vt=new Vs;class zs{constructor(){this.un=new Bs}addToCollectionParentIndex(e,t){return this.un.add(t),nn.resolve()}getCollectionParents(e,t){return nn.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return nn.resolve()}deleteFieldIndex(e,t){return nn.resolve()}deleteAllFieldIndexes(e){return nn.resolve()}createTargetIndexes(e,t){return nn.resolve()}getDocumentsMatchingTarget(e,t){return nn.resolve(null)}getIndexType(e,t){return nn.resolve(0)}getFieldIndexes(e,t){return nn.resolve([])}getNextCollectionGroupToUpdate(e){return nn.resolve(null)}getMinOffset(e,t){return nn.resolve(Xt.min())}getMinOffsetFromCollectionGroup(e,t){return nn.resolve(Xt.min())}updateCollectionGroup(e,t,n){return nn.resolve()}updateIndexEntries(e,t){return nn.resolve()}}class Bs{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new xn(Wt.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new xn(Wt.comparator)).toArray()}}new Uint8Array(0);class Us{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Us(e,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Us.DEFAULT_COLLECTION_PERCENTILE=10,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Us.DEFAULT=new Us(41943040,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Us.DISABLED=new Us(-1,0,0);class Hs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Hs(0)}static kn(){return new Hs(-1)}}class Ws{constructor(){this.changes=new Hi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?nn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qs{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ks{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Sr(n.mutation,e,_n.empty(),Bt.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,er()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:er();const i=Gi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=Yi();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Gi();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,er())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=qi();const s=Xi(),a=Xi();return t.forEach(((e,t)=>{const a=n.get(t.key);i.has(t.key)&&(void 0===a||a.mutation instanceof Nr)?r=r.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Sr(a.mutation,t,a.mutation.getFieldMask(),Bt.now())):s.set(t.key,_n.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new qs(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Xi();let i=new yn(((e,t)=>e-t)),r=er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||_n.empty();a=r.applyToLocalView(s,a),n.set(e,a);const o=(i.get(r.batchId)||er()).add(e);i=i.insert(r.batchId,o)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),o=i.key,l=i.value,c=$i();l.forEach((e=>{if(!r.has(e)){const i=_r(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return nn.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return Yt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):nn.resolve(Gi());let a=-1,o=r;return s.next((t=>nn.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(t)?nn.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,o,t,er()))).next((e=>({batchId:a,changes:Qi(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yt(t)).next((e=>{let t=Yi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=Yi();return this.indexManager.getCollectionParents(e,r).next((a=>nn.forEach(a,(a=>{const o=function(e,t){return new Ti(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,Zn.newInvalidDocument(i)))}));let n=Yi();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Sr(s.mutation,i,_n.empty(),Bt.now()),Vi(t,i)&&(n=n.insert(e,i))})),n}))}}class Ys{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return nn.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ds(e.createTime)}}(t)),nn.resolve()}getNamedQuery(e,t){return nn.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Fs(e.bundledQuery),readTime:ds(e.readTime)}}(t)),nn.resolve()}}class Qs{constructor(){this.overlays=new yn(Yt.comparator),this.Ir=new Map}getOverlay(e,t){return nn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Gi();return nn.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),nn.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Ir.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),nn.resolve()}getOverlaysForCollection(e,t,n){const i=Gi(),r=t.length+1,s=new Yt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return nn.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new yn(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Gi(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Gi(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=i)););return nn.resolve(a)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Rr(t,n));let r=this.Ir.get(t);void 0===r&&(r=er(),this.Ir.set(t,r)),this.Ir.set(t,r.add(n.key))}}class Gs{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return nn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nn.resolve()}}class $s{constructor(){this.Tr=new xn(Xs.Er),this.dr=new xn(Xs.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Xs(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Xs(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new Yt(new Wt([])),n=new Xs(t,e),i=new Xs(t,e+1),r=[];return this.dr.forEachInRange([n,i],(e=>{this.Vr(e),r.push(e.key)})),r}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Yt(new Wt([])),n=new Xs(t,e),i=new Xs(t,e+1);let r=er();return this.dr.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Xs(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Xs{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Yt.comparator(e.key,t.key)||Vt(e.wr,t.wr)}static Ar(e,t){return Vt(e.wr,t.wr)||Yt.comparator(e.key,t.key)}}class Js{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new xn(Xs.Er)}checkEmpty(e){return nn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Lr(r,t,n,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Xs(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return nn.resolve(s)}lookupMutationBatch(e,t){return nn.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.vr(n),r=i<0?0:i;return nn.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return nn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return nn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xs(t,0),i=new Xs(t,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([n,i],(e=>{const t=this.Dr(e.wr);r.push(t)})),nn.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xn(Vt);return t.forEach((e=>{const t=new Xs(e,0),i=new Xs(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,i],(e=>{n=n.add(e.wr)}))})),nn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;Yt.isDocumentKey(r)||(r=r.child(""));const s=new Xs(new Yt(r),0);let a=new xn(Vt);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.wr)),!0)}),s),nn.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){St(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return nn.forEach(t.mutations,(i=>{const r=new Xs(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Xs(t,0),i=this.br.firstAfterOrEqual(n);return nn.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,nn.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zs{constructor(e){this.Mr=e,this.docs=new yn(Yt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return nn.resolve(n?n.document.mutableCopy():Zn.newInvalidDocument(t))}getEntries(e,t){let n=qi();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Zn.newInvalidDocument(e))})),nn.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=qi();const s=t.path,a=new Yt(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Jt($t(a),n)<=0||(i.has(a.key)||Vi(t,a))&&(r=r.insert(a.key,a.mutableCopy()))}return nn.resolve(r)}getAllFromCollectionGroup(e,t,n,i){kt()}Or(e,t){return nn.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ea(this)}getSize(e){return nn.resolve(this.size)}}class ea extends Ws{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),nn.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class ta{constructor(e){this.persistence=e,this.Nr=new Hi((e=>Si(e)),Ei),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $s,this.targetCount=0,this.kr=Hs.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),nn.resolve()}getLastRemoteSnapshotVersion(e){return nn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nn.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),nn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),nn.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Hs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,nn.resolve()}updateTargetData(e,t){return this.Kn(t),nn.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,nn.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Nr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),nn.waitFor(r).next((()=>i))}getTargetCount(e){return nn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return nn.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),nn.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),nn.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),nn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return nn.resolve(n)}containsKey(e,t){return nn.resolve(this.Br.containsKey(t))}}class na{constructor(e,t){this.qr={},this.overlays={},this.Qr=new an(0),this.Kr=!1,this.Kr=!0,this.$r=new Gs,this.referenceDelegate=e(this),this.Ur=new ta(this),this.indexManager=new zs,this.remoteDocumentCache=function(e){return new Zs(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new js(t),this.Gr=new Ys(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qs,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Js(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){vt("MemoryPersistence","Starting transaction:",e);const i=new ia(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((e=>this.referenceDelegate.jr(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Hr(e,t){return nn.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class ia extends en{constructor(e){super(),this.currentSequenceNumber=e}}class ra{constructor(e){this.persistence=e,this.Jr=new $s,this.Yr=null}static Zr(e){return new ra(e)}get Xr(){if(this.Yr)return this.Yr;throw kt()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),nn.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),nn.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),nn.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nn.forEach(this.Xr,(n=>{const i=Yt.fromPath(n);return this.ei(e,i).next((e=>{e||t.removeEntry(i,Ut.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return nn.or([()=>nn.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class sa{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=i}static Wi(e,t){let n=er(),i=er();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new sa(e,t.fromCache,n,i)}}class aa{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oa{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=w()?8:rn(x())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.Yi(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.Zi(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new aa;return this.Xi(e,t,n).next((i=>{if(r.result=i,this.zi)return this.es(e,t,n,i.size)}))})).next((()=>r.result))}es(e,t,n,i){return n.documentReadCount<this.ji?(bt()<=L.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",Fi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),nn.resolve()):(bt()<=L.DEBUG&&vt("QueryEngine","Query:",Fi(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(bt()<=L.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",Fi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(t))):nn.resolve())}Yi(e,t){if(Di(t))return nn.resolve(null);let n=Ai(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Oi(t,null,"F"),n=Ai(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=er(...i);return this.Ji.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,i);return this.ns(t,s,r,n.readTime)?this.Yi(e,Oi(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,i){return Di(t)||i.isEqual(Ut.min())?nn.resolve(null):this.Ji.getDocuments(e,n).next((r=>{const s=this.ts(t,r);return this.ns(t,s,n,i)?nn.resolve(null):(bt()<=L.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fi(t)),this.rs(e,s,t,Gt(i,-1)).next((e=>e)))}))}ts(e,t){let n=new xn(Bi(e));return t.forEach(((t,i)=>{Vi(e,i)&&(n=n.add(i))})),n}ns(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Xi(e,t,n){return bt()<=L.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",Fi(t)),this.Ji.getDocumentsMatchingQuery(e,t,Xt.min(),n)}rs(e,t,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class la{constructor(e,t,n,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new yn(Vt),this._s=new Hi((e=>Si(e)),Ei),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ks(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function ca(e,t,n,i){return new la(e,t,n,i)}async function ua(e,t){const n=Et(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let a=er();for(const e of i){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function ha(e){const t=Et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function da(e,t,n){let i=er(),r=er();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=qi();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Ut.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):vt("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Ps:i,Is:r}}))}function fa(e,t){const n=Et(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function pa(e,t){const n=Et(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Ur.getTargetData(e,t).next((r=>r?(i=r,nn.resolve(i)):n.Ur.allocateTargetId(e).next((r=>(i=new Rs(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.os.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function ga(e,t,n){const i=Et(e),r=i.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!sn(e))throw e;vt("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}i.os=i.os.remove(t),i._s.delete(r.target)}function ma(e,t,n){const i=Et(e);let r=Ut.min(),s=er();return i.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const i=Et(e),r=i._s.get(n);return void 0!==r?nn.resolve(i.os.get(r)):i.Ur.getTargetData(t,n)}(i,e,Ai(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.ss.getDocumentsMatchingQuery(e,t,n?r:Ut.min(),n?s:er()))).next((e=>(ya(i,zi(t),e),{documents:e,Ts:s})))))}function ya(e,t,n){let i=e.us.get(t)||Ut.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.us.set(t,i)}class ba{constructor(){this.activeTargetIds=nr()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class va{constructor(){this.so=new ba,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ba,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xa{_o(e){}shutdown(){}}class wa{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){vt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){vt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _a=null;function ka(){return null===_a?_a=268435456+Math.round(2147483648*Math.random()):_a++,"0x"+_a.toString(16)}const Sa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ea{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ca="WebChannelConnection";class Ta extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(i),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get Fo(){return!1}Mo(e,t,n,i,r){const s=ka(),a=this.xo(e,t.toUriEncodedString());vt("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,i,r),this.No(e,a,o,n).then((t=>(vt("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw wt("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t}))}Lo(e,t,n,i,r,s){return this.Mo(e,t,n,i,r)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+mt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=Sa[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,i){const r=ka();return new Promise(((s,a)=>{const o=new rt;o.setWithCredentials(!0),o.listenOnce(at.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case ot.NO_ERROR:const t=o.getResponseJson();vt(Ca,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),s(t);break;case ot.TIMEOUT:vt(Ca,"RPC '".concat(e,"' ").concat(r," timed out")),a(new Tt(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case ot.HTTP_ERROR:const n=o.getStatus();if(vt(Ca,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(t)>=0?t:Ct.UNKNOWN}(t.status);a(new Tt(e,t.message))}else a(new Tt(Ct.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Tt(Ct.UNAVAILABLE,"Connection failed."));break;default:kt()}}finally{vt(Ca,"RPC '".concat(e,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);vt(Ca,"RPC '".concat(e,"' ").concat(r," sending request:"),i),o.send(t,"POST",l,n,15)}))}Bo(e,t,n){const i=ka(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ht(),a=ut(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=r.join("");vt(Ca,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),o);const u=s.createWebChannel(c,o);let h=!1,d=!1;const f=new Ea({Io:t=>{d?vt(Ca,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(vt(Ca,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),h=!0),vt(Ca,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,st.EventType.OPEN,(()=>{d||(vt(Ca,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),f.yo())})),p(u,st.EventType.CLOSE,(()=>{d||(d=!0,vt(Ca,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.So())})),p(u,st.EventType.ERROR,(t=>{d||(d=!0,wt(Ca,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),f.So(new Tt(Ct.UNAVAILABLE,"The operation could not be completed")))})),p(u,st.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];St(!!r);const s=r,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){vt(Ca,"RPC '".concat(e,"' stream ").concat(i," received error:"),a);const t=a.status;let n=function(e){const t=Fr[e];if(void 0!==t)return Br(t)}(t),r=a.message;void 0===n&&(n=Ct.INTERNAL,r="Unknown error status: "+t+" with message "+a.message),d=!0,f.So(new Tt(n,r)),u.close()}else vt(Ca,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.bo(r)}})),p(a,ct.STAT_EVENT,(t=>{t.stat===lt.PROXY?vt(Ca,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===lt.NOPROXY&&vt(Ca,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.wo()}),0),f}}function Na(){return"undefined"!=typeof document?document:null}function Ma(e){return new os(e,!0)}class Da{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=i,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-n);i>0&&vt("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Pa{constructor(e,t,n,i,r,s,a,o){this.ui=e,this.Ho=n,this.Jo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Da(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Ct.RESOURCE_EXHAUSTED?(xt(t.toString()),xt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ct.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,i]=e;this.Yo===t&&this.P_(n,i)}),(t=>{e((()=>{const e=new Tt(Ct.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return vt("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(vt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ia extends Pa{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:kt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(St(void 0===t||"string"==typeof t),Sn.fromBase64String(t||"")):(St(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Sn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Ct.UNKNOWN:Br(e.code);return new Tt(t,e.message||"")}(a);n=new Zr(i,r,s,o||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=ys(e,i.document.name),s=ds(i.document.updateTime),a=i.document.createTime?ds(i.document.createTime):Ut.min(),o=new Xn({mapValue:{fields:i.document.fields}}),l=Zn.newFoundDocument(r,s,a,o),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Xr(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=ys(e,i.document),s=i.readTime?ds(i.readTime):Ut.min(),a=Zn.newNoDocument(r,s),o=i.removedTargetIds||[];n=new Xr([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=ys(e,i.document),s=i.removedTargetIds||[];n=new Xr([],s,r,null)}else{if(!("filter"in t))return kt();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new jr(i,r),a=e.targetId;n=new Jr(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ut.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ut.min():t.readTime?ds(t.readTime):Ut.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=xs(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=Ci(i)?{documents:Ss(e,i)}:{query:Es(e,i)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=us(e,t.resumeToken);const i=ls(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Ut.min())>0){n.readTime=cs(e,t.snapshotVersion.toTimestamp());const i=ls(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=xs(this.serializer),t.removeTarget=e,this.a_(t)}}class Aa extends Pa{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return St(!!e.streamToken),this.lastStreamToken=e.streamToken,St(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(St(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ds(e.updateTime):ds(t);return n.isEqual(Ut.min())&&(n=ds(t)),new br(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ds(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=xs(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>ks(this.serializer,e)))};this.a_(t)}}class La extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Tt(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,a]=r;return this.connection.Mo(e,ps(t,n),i,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tt(Ct.UNKNOWN,e.toString())}))}Lo(e,t,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Lo(e,ps(t,n),i,a,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tt(Ct.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Oa{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(xt(t),this.D_=!1):vt("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Ra{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o((e=>{n.enqueueAndForget((async()=>{qa(this)&&(vt("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Et(e);t.L_.add(4),await Fa(t),t.q_.set("Unknown"),t.L_.delete(4),await ja(t)}(this))}))})),this.q_=new Oa(n,i)}}async function ja(e){if(qa(e))for(const t of e.B_)await t(!0)}async function Fa(e){for(const t of e.B_)await t(!1)}function Va(e,t){const n=Et(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Wa(n)?Ha(n):uo(n).r_()&&Ba(n,t))}function za(e,t){const n=Et(e),i=uo(n);n.N_.delete(t),i.r_()&&Ua(n,t),0===n.N_.size&&(i.r_()?i.o_():qa(n)&&n.q_.set("Unknown"))}function Ba(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ut.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}uo(e).A_(t)}function Ua(e,t){e.Q_.xe(t),uo(e).R_(t)}function Ha(e){e.Q_=new ts({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),uo(e).start(),e.q_.v_()}function Wa(e){return qa(e)&&!uo(e).n_()&&e.N_.size>0}function qa(e){return 0===Et(e).L_.size}function Ka(e){e.Q_=void 0}async function Ya(e){e.q_.set("Online")}async function Qa(e){e.N_.forEach(((t,n)=>{Ba(e,t)}))}async function Ga(e,t){Ka(e),Wa(e)?(e.q_.M_(t),Ha(e)):e.q_.set("Unknown")}async function $a(e,t,n){if(e.q_.set("Online"),t instanceof Zr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.N_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.N_.delete(i),e.Q_.removeTarget(i))}(e,t)}catch(n){vt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Xa(e,n)}else if(t instanceof Xr?e.Q_.Ke(t):t instanceof Jr?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ut.min()))try{const t=await ha(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.N_.get(i);r&&e.N_.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.N_.get(t);if(!i)return;e.N_.set(t,i.withResumeToken(Sn.EMPTY_BYTE_STRING,i.snapshotVersion)),Ua(e,t);const r=new Rs(i.target,t,n,i.sequenceNumber);Ba(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){vt("RemoteStore","Failed to raise snapshot:",t),await Xa(e,t)}}async function Xa(e,t,n){if(!sn(t))throw t;e.L_.add(1),await Fa(e),e.q_.set("Offline"),n||(n=()=>ha(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{vt("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await ja(e)}))}function Ja(e,t){return t().catch((n=>Xa(e,n,t)))}async function Za(e){const t=Et(e),n=ho(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;eo(t);)try{const e=await fa(t.localStore,i);if(null===e){0===t.O_.length&&n.o_();break}i=e.batchId,to(t,e)}catch(e){await Xa(t,e)}no(t)&&io(t)}function eo(e){return qa(e)&&e.O_.length<10}function to(e,t){e.O_.push(t);const n=ho(e);n.r_()&&n.V_&&n.m_(t.mutations)}function no(e){return qa(e)&&!ho(e).n_()&&e.O_.length>0}function io(e){ho(e).start()}async function ro(e){ho(e).p_()}async function so(e){const t=ho(e);for(const n of e.O_)t.m_(n.mutations)}async function ao(e,t,n){const i=e.O_.shift(),r=Or.from(i,t,n);await Ja(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Za(e)}async function oo(e,t){t&&ho(e).V_&&await async function(e,t){if(function(e){return zr(e)&&e!==Ct.ABORTED}(t.code)){const n=e.O_.shift();ho(e).s_(),await Ja(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Za(e)}}(e,t),no(e)&&io(e)}async function lo(e,t){const n=Et(e);n.asyncQueue.verifyOperationInProgress(),vt("RemoteStore","RemoteStore received new credentials");const i=qa(n);n.L_.add(3),await Fa(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await ja(n)}async function co(e,t){const n=Et(e);t?(n.L_.delete(2),await ja(n)):t||(n.L_.add(2),await Fa(n),n.q_.set("Unknown"))}function uo(e){return e.K_||(e.K_=function(e,t,n){const i=Et(e);return i.w_(),new Ia(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Ya.bind(null,e),Ro:Qa.bind(null,e),mo:Ga.bind(null,e),d_:$a.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),Wa(e)?Ha(e):e.q_.set("Unknown")):(await e.K_.stop(),Ka(e))}))),e.K_}function ho(e){return e.U_||(e.U_=function(e,t,n){const i=Et(e);return i.w_(),new Aa(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ro.bind(null,e),mo:oo.bind(null,e),f_:so.bind(null,e),g_:ao.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Za(e)):(await e.U_.stop(),e.O_.length>0&&(vt("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))}))),e.U_}class fo{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,a=new fo(e,t,s,i,r);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tt(Ct.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function po(e,t){if(xt("AsyncQueue","".concat(t,": ").concat(e)),sn(e))return new Tt(Ct.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class go{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Yt.comparator(t.key,n.key):(e,t)=>Yt.comparator(e.key,t.key),this.keyedMap=Yi(),this.sortedSet=new yn(this.comparator)}static emptySet(e){return new go(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof go))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new go;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class mo{constructor(){this.W_=new yn(Yt.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):kt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class yo{constructor(e,t,n,i,r,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new yo(e,t,go.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ri(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class bo{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class vo{constructor(){this.queries=xo(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Et(e),i=n.queries;n.queries=xo(),i.forEach(((e,n)=>{for(const i of n.j_)i.onError(t)}))}(this,new Tt(Ct.ABORTED,"Firestore shutting down"))}}function xo(){return new Hi((e=>ji(e)),Ri)}async function wo(e,t){const n=Et(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.H_()&&t.J_()&&(i=2):(s=new bo,i=t.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(e){const n=po(e,"Initialization of query '".concat(Fi(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Eo(n)}async function _o(e,t){const n=Et(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?r=t.J_()?0:1:!s.H_()&&t.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ko(e,t){const n=Et(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(r)&&(i=!0);t.z_=r}}i&&Eo(n)}function So(e,t,n){const i=Et(e),r=i.queries.get(t);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(t)}function Eo(e){e.Y_.forEach((e=>{e.next()}))}var Co,To;(To=Co||(Co={})).ea="default",To.Cache="cache";class No{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new yo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Co.Cache}}class Mo{constructor(e){this.key=e}}class Do{constructor(e){this.key=e}}class Po{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=er(),this.mutatedKeys=er(),this.Aa=Bi(e),this.Ra=new go(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new mo,i=t?t.Ra:this.Ra;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const o="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const c=i.get(e),u=Vi(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:r}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const r=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),i=null!=i&&i;const a=t&&!i?this.ya():[],o=0===this.da.size&&this.current&&!i?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new yo(this.query,e.Ra,r,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mo,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=er(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new Do(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Mo(n))})),t}ba(e){this.Ta=e.Ts,this.da=er();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Io{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ao{constructor(e){this.key=e,this.va=!1}}class Lo{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Hi((e=>ji(e)),Ri),this.Ma=new Map,this.xa=new Set,this.Oa=new yn(Yt.comparator),this.Na=new Map,this.La=new $s,this.Ba={},this.ka=new Map,this.qa=Hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Oo(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=nl(e);let r;const s=i.Fa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await jo(i,t,n,!0),r}async function Ro(e,t){const n=nl(e);await jo(n,t,!0,!1)}async function jo(e,t,n,i){const r=await pa(e.localStore,Ai(t)),s=r.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await Fo(e,t,s,"current"===a,r.resumeToken)),e.isPrimaryClient&&n&&Va(e.remoteStore,r),o}async function Fo(e,t,n,i,r){e.Ka=(t,n,i)=>async function(e,t,n,i){let r=t.view.ma(n);r.ns&&(r=await ma(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,r)})));const s=i&&i.targetChanges.get(t.targetId),a=i&&null!=i.targetMismatches.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,s,a);return $o(e,t.targetId,o.wa),o.snapshot}(e,t,n,i);const s=await ma(e.localStore,t,!0),a=new Po(t,s.Ts),o=a.ma(s.documents),l=$r.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),c=a.applyChanges(o,e.isPrimaryClient,l);$o(e,n,c.wa);const u=new Io(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Vo(e,t,n){const i=Et(e),r=i.Fa.get(t),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter((e=>!Ri(e,t)))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ga(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&za(i.remoteStore,r.targetId),Qo(i,r.targetId)})).catch(tn)):(Qo(i,r.targetId),await ga(i.localStore,r.targetId,!0))}async function zo(e,t){const n=Et(e),i=n.Fa.get(t),r=n.Ma.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),za(n.remoteStore,i.targetId))}async function Bo(e,t){const n=Et(e);try{const e=await function(e,t){const n=Et(e),i=t.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];t.targetChanges.forEach(((s,o)=>{const l=r.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Sn.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(e,c))}));let o=qi(),l=er();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),a.push(da(e,s,t.documentUpdates).next((e=>{o=e.Ps,l=e.Is}))),!i.isEqual(Ut.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,i)));a.push(t)}return nn.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.os=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Na.get(t);i&&(St(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.va=!0:e.modifiedDocuments.size>0?St(i.va):e.removedDocuments.size>0&&(St(i.va),i.va=!1))})),await Zo(n,e,t)}catch(e){await tn(e)}}function Uo(e,t,n){const i=Et(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Fa.forEach(((n,i)=>{const r=i.view.Z_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=Et(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.j_)r.Z_(t)&&(i=!0)})),i&&Eo(n)}(i.eventManager,t),e.length&&i.Ca.d_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Ho(e,t,n){const i=Et(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Na.get(t),s=r&&r.key;if(s){let e=new yn(Yt.comparator);e=e.insert(s,Zn.newNoDocument(s,Ut.min()));const n=er().add(s),r=new Gr(Ut.min(),new Map,new yn(Vt),e,n);await Bo(i,r),i.Oa=i.Oa.remove(s),i.Na.delete(t),Jo(i)}else await ga(i.localStore,t,!1).then((()=>Qo(i,t,n))).catch(tn)}async function Wo(e,t){const n=Et(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Et(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let a=nn.resolve();return s.forEach((e=>{a=a.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);St(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=er();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);Yo(n,i,null),Ko(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zo(n,e)}catch(e){await tn(e)}}async function qo(e,t,n){const i=Et(e);try{const e=await function(e,t){const n=Et(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(St(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);Yo(i,t,n),Ko(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Zo(i,e)}catch(n){await tn(n)}}function Ko(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function Yo(e,t,n){const i=Et(e);let r=i.Ba[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function Qo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Ma.get(t))e.Fa.delete(i),n&&e.Ca.$a(i,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||Go(e,t)}))}function Go(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(za(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Jo(e))}function $o(e,t,n){for(const i of n)i instanceof Mo?(e.La.addReference(i.key,t),Xo(e,i)):i instanceof Do?(vt("SyncEngine","Document no longer in limbo: "+i.key),e.La.removeReference(i.key,t),e.La.containsKey(i.key)||Go(e,i.key)):kt()}function Xo(e,t){const n=t.key,i=n.path.canonicalString();e.Oa.get(n)||e.xa.has(i)||(vt("SyncEngine","New document in limbo: "+n),e.xa.add(i),Jo(e))}function Jo(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Yt(Wt.fromString(t)),i=e.qa.next();e.Na.set(i,new Ao(n)),e.Oa=e.Oa.insert(n,i),Va(e.remoteStore,new Rs(Ai(Mi(n.path)),i,"TargetPurposeLimboResolution",an.oe))}}async function Zo(e,t,n){const i=Et(e),r=[],s=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach(((e,o)=>{a.push(i.Ka(o,t,n).then((e=>{var t;if((e||n)&&i.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(e){r.push(e);const t=sa.Wi(o.targetId,e);s.push(t)}})))})),await Promise.all(a),i.Ca.d_(r),await async function(e,t){const n=Et(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>nn.forEach(t,(t=>nn.forEach(t.$i,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>nn.forEach(t.Ui,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!sn(e))throw e;vt("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.os.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.os=n.os.insert(e,r)}}}(i.localStore,s))}async function el(e,t){const n=Et(e);if(!n.currentUser.isEqual(t)){vt("SyncEngine","User change. New user:",t.toKey());const e=await ua(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new Tt(Ct.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zo(n,e.hs)}}function tl(e,t){const n=Et(e),i=n.Na.get(t);if(i&&i.va)return er().add(i.key);{let e=er();const i=n.Ma.get(t);if(!i)return e;for(const t of i){const i=n.Fa.get(t);e=e.unionWith(i.view.Va)}return e}}function nl(e){const t=Et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ho.bind(null,t),t.Ca.d_=ko.bind(null,t.eventManager),t.Ca.$a=So.bind(null,t.eventManager),t}function il(e){const t=Et(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Wo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qo.bind(null,t),t}class rl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ma(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return ca(this.persistence,new oa,e.initialUser,this.serializer)}Ga(e){return new na(ra.Zr,this.serializer)}Wa(e){return new va}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rl.provider={build:()=>new rl};class sl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Uo(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=el.bind(null,this.syncEngine),await co(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vo}createDatastore(e){const t=Ma(e.databaseInfo.databaseId),n=function(e){return new Ta(e)}(e.databaseInfo);return function(e,t,n,i){return new La(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new Ra(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,(e=>Uo(this.syncEngine,e,0)),wa.D()?new wa:new xa)}createSyncEngine(e,t){return function(e,t,n,i,r,s,a){const o=new Lo(e,t,n,i,r,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Et(e);vt("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Fa(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}sl.provider={build:()=>new sl};class al{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class ol{constructor(e,t,n,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=Ft.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async e=>{vt("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(vt("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=po(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ll(e,t){e.asyncQueue.verifyOperationInProgress(),vt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await ua(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function cl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ul(e);vt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>lo(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>lo(t.remoteStore,n))),e._onlineComponents=t}async function ul(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt("FirestoreClient","Using user provided OfflineComponentProvider");try{await ll(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ct.FAILED_PRECONDITION||e.code===Ct.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;wt("Error using user provided cache. Falling back to memory cache: "+n),await ll(e,new rl)}}else vt("FirestoreClient","Using default OfflineComponentProvider"),await ll(e,new rl);return e._offlineComponents}async function hl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt("FirestoreClient","Using user provided OnlineComponentProvider"),await cl(e,e._uninitializedComponentsProvider._online)):(vt("FirestoreClient","Using default OnlineComponentProvider"),await cl(e,new sl))),e._onlineComponents}function dl(e){return hl(e).then((e=>e.syncEngine))}async function fl(e){const t=await hl(e),n=t.eventManager;return n.onListen=Oo.bind(null,t.syncEngine),n.onUnlisten=Vo.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ro.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=zo.bind(null,t.syncEngine),n}function pl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Nt;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new al({next:o=>{s.Za(),t.enqueueAndForget((()=>_o(e,a)));const l=o.docs.has(n);!l&&o.fromCache?r.reject(new Tt(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&i&&"server"===i.source?r.reject(new Tt(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:e=>r.reject(e)}),a=new No(Mi(n.path),s,{includeMetadataChanges:!0,_a:!0});return wo(e,a)}(await fl(e),e.asyncQueue,t,n,i))),i.promise}function gl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Nt;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new al({next:n=>{s.Za(),t.enqueueAndForget((()=>_o(e,a))),n.fromCache&&"server"===i.source?r.reject(new Tt(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),a=new No(n,s,{includeMetadataChanges:!0,_a:!0});return wo(e,a)}(await fl(e),e.asyncQueue,t,n,i))),i.promise}function ml(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const yl=new Map;function bl(e,t,n){if(!n)throw new Tt(Ct.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function vl(e){if(!Yt.isDocumentKey(e))throw new Tt(Ct.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function xl(e){if(Yt.isDocumentKey(e))throw new Tt(Ct.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function wl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":kt()}function _l(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Tt(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wl(e);throw new Tt(Ct.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class kl{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Tt(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tt(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new Tt(Ct.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ml(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Tt(Ct.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Tt(Ct.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Tt(Ct.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sl{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kl({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tt(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kl(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Dt;switch(e.type){case"firstParty":return new Lt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Tt(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yl.get(e);t&&(vt("ComponentProvider","Removing Datastore"),yl.delete(e),t.terminate())}(this),Promise.resolve()}}function El(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=_l(e,Sl))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&wt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=gt.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Tt(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new gt(s)}e._authCredentials=new Pt(new Mt(t,n))}}class Cl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Cl(this.firestore,e,this._query)}}class Tl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tl(this.firestore,e,this._key)}}class Nl extends Cl{constructor(e,t,n){super(e,t,Mi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tl(this.firestore,null,new Yt(e))}withConverter(e){return new Nl(this.firestore,e,this._path)}}function Ml(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=N(e),bl("collection","path",t),e instanceof Sl){const n=Wt.fromString(t,...i);return xl(n),new Nl(e,null,n)}{if(!(e instanceof Tl||e instanceof Nl))throw new Tt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Wt.fromString(t,...i));return xl(n),new Nl(e.firestore,null,n)}}function Dl(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=N(e),1===arguments.length&&(t=Ft.newId()),bl("doc","path",t),e instanceof Sl){const n=Wt.fromString(t,...i);return vl(n),new Tl(e,null,new Yt(n))}{if(!(e instanceof Tl||e instanceof Nl))throw new Tt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Wt.fromString(t,...i));return vl(n),new Tl(e.firestore,e instanceof Nl?e.converter:null,new Yt(n))}}class Pl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Da(this,"async_queue_retry"),this.Vu=()=>{const e=Na();e&&vt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Na();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Na();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Nt;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sn(e))throw e;vt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xt("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=fo.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(i),i}fu(){this.Eu&&kt()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Il(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"==typeof n[i])return!0;return!1}(e,["next","error","complete"])}class Al extends Sl{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Pl,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pl(e),this._firestoreClient=void 0,await e}}}function Ll(e){if(e._terminated)throw new Tt(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ol(e),e._firestoreClient}function Ol(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new In(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,ml(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new ol(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(Sn.fromBase64String(e))}catch(e){throw new Tt(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Rl(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new Tt(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fl{constructor(e){this._methodName=e}}class Vl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tt(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tt(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}class zl{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Bl=/^__.*__$/;class Ul{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tr(e,this.data,t,this.fieldTransforms)}}class Hl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt()}}class ql{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ql(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Wl(this.Cu)&&Bl.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Kl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ma(e)}Qu(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ql({Cu:e,methodName:t,qu:n,path:Kt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yl(e){const t=e._freezeSettings(),n=Ma(e._databaseId);return new Kl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ql(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,r);tc("Data must be an object, but it was:",a,i);const o=Zl(i,a);let l,c;if(s.merge)l=new _n(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=nc(t,i,n);if(!a.contains(r))throw new Tt(Ct.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));ac(e,r)||e.push(r)}l=new _n(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Ul(new Xn(o),l,c)}class Gl extends Fl{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gl}}function $l(e,t,n,i){const r=e.Qu(1,t,n);tc("Data must be an object, but it was:",r,i);const s=[],a=Xn.empty();gn(i,((e,i)=>{const o=rc(t,e,n);i=N(i);const l=r.Nu(o);if(i instanceof Gl)s.push(o);else{const e=Jl(i,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new _n(s);return new Hl(a,o,r.fieldTransforms)}function Xl(e,t,n,i,r,s){const a=e.Qu(1,t,n),o=[nc(t,i,n)],l=[r];if(s.length%2!=0)throw new Tt(Ct.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)o.push(nc(t,s[d])),l.push(s[d+1]);const c=[],u=Xn.empty();for(let d=o.length-1;d>=0;--d)if(!ac(c,o[d])){const e=o[d];let t=l[d];t=N(t);const n=a.Nu(e);if(t instanceof Gl)c.push(e);else{const i=Jl(t,n);null!=i&&(c.push(e),u.set(e,i))}}const h=new _n(c);return new Hl(u,h,a.fieldTransforms)}function Jl(e,t){if(ec(e=N(e)))return tc("Unsupported field value:",t,e),Zl(e,t);if(e instanceof Fl)return function(e,t){if(!Wl(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Jl(r,t.Lu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=N(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Bt.fromDate(e);return{timestampValue:cs(t.serializer,n)}}if(e instanceof Bt){const n=new Bt(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cs(t.serializer,n)}}if(e instanceof Vl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Rl)return{bytesValue:us(t.serializer,e._byteString)};if(e instanceof Tl){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Bu("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:fs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof zl)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return ir(t.serializer,e)}))}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(wl(e)))}(e,t)}function Zl(e,t){const n={};return mn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gn(e,((e,i)=>{const r=Jl(i,t.Mu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function ec(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bt||e instanceof Vl||e instanceof Rl||e instanceof Tl||e instanceof Fl||e instanceof zl)}function tc(e,t,n){if(!ec(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=wl(n);throw"an object"===i?t.Bu(e+" a custom object"):t.Bu(e+" "+i)}}function nc(e,t,n){if((t=N(t))instanceof jl)return t._internalPath;if("string"==typeof t)return rc(e,t);throw sc("Field path arguments must be of type string or ",e,!1,void 0,n)}const ic=new RegExp("[~\\*/\\[\\]]");function rc(e,t,n){if(t.search(ic)>=0)throw sc("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new jl(...t.split("."))._internalPath}catch(i){throw sc("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function sc(e,t,n,i,r){const s=i&&!i.isEmpty(),a=void 0!==r;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(i)),a&&(l+=" in document ".concat(r)),l+=")"),new Tt(Ct.INVALID_ARGUMENT,o+e+l)}function ac(e,t){return e.some((e=>e.isEqual(t)))}class oc{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Tl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lc extends oc{data(){return super.data()}}function cc(e,t){return"string"==typeof t?rc(e,t):t instanceof jl?t._internalPath:t._delegate._internalPath}function uc(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Tt(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hc{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(On(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw kt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return gn(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertVectorValue(e){var t,n,i;const r=null===(i=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.map((e=>Tn(e.doubleValue)));return new zl(r)}convertGeoPoint(e){return new Vl(Tn(e.latitude),Tn(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Dn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Pn(e));default:return null}}convertTimestamp(e){const t=Cn(e);return new Bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Wt.fromString(e);St(Os(n));const i=new An(n.get(1),n.get(3)),r=new Yt(n.popFirst(5));return i.isEqual(t)||xt("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}function dc(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pc extends oc{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(cc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gc extends pc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class mc{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fc(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new gc(this._firestore,this._userDataWriter,n.key,n,new fc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Tt(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new gc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new fc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new gc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new fc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:yc(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function yc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt()}}class bc extends hc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tl(this.firestore,null,t)}}function vc(e,t,n){e=_l(e,Tl);const i=_l(e.firestore,Al),r=dc(e.converter,t,n);return kc(i,[Ql(Yl(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,vr.none())])}function xc(e){return kc(_l(e.firestore,Al),[new Ir(e._key,vr.none())])}function wc(e,t){const n=_l(e.firestore,Al),i=Dl(e),r=dc(e.converter,t);return kc(n,[Ql(Yl(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,vr.exists(!1))]).then((()=>i))}function _c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,s,a;e=N(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Il(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Il(n[l])){const e=n[l];n[l]=null===(r=e.next)||void 0===r?void 0:r.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,h,d;if(e instanceof Tl)h=_l(e.firestore,Al),d=Mi(e._key.path),u={next:t=>{n[l]&&n[l](Sc(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=_l(e,Cl);h=_l(t.firestore,Al),d=t._query;const i=new bc(h);u={next:e=>{n[l]&&n[l](new mc(h,i,t,e))},error:n[l+1],complete:n[l+2]},uc(e._query)}return function(e,t,n,i){const r=new al(i),s=new No(t,r,n);return e.asyncQueue.enqueueAndForget((async()=>wo(await fl(e),s))),()=>{r.Za(),e.asyncQueue.enqueueAndForget((async()=>_o(await fl(e),s)))}}(Ll(h),d,c,u)}function kc(e,t){return function(e,t){const n=new Nt;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=il(e);try{const e=await function(e,t){const n=Et(e),i=Bt.now(),r=t.reduce(((e,t)=>e.add(t.key)),er());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=qi(),l=er();return n.cs.getEntries(e,r).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((r=>{s=r;const a=[];for(const e of t){const t=Er(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Nr(e.key,t,Jn(t.value.mapValue),vr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,a,t)})).next((t=>{a=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:a.batchId,changes:Qi(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Ba[e.currentUser.toKey()];i||(i=new yn(Vt)),i=i.insert(t,n),e.Ba[e.currentUser.toKey()]=i}(i,e.batchId,n),await Zo(i,e.changes),await Za(i.remoteStore)}catch(e){const t=po(e,"Failed to persist write");n.reject(t)}}(await dl(e),t,n))),n.promise}(Ll(e),t)}function Sc(e,t,n){const i=n.docs.get(t._key),r=new bc(e);return new pc(e,r,t._key,i,new fc(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){mt=e}("10.14.1"),Fe(new M("firestore",((e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),a=new Al(new It(e.getProvider("auth-internal")),new Rt(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Tt(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new An(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),He(pt,"4.7.3",e),He(pt,"4.7.3","esm2017")}();He("firebase","10.14.1","app");const Ec=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;const t=Le.get(e);if(!t&&e===Ie&&b())return Ue();if(!t)throw ze.create("no-app",{appName:e});return t}(),i="string"==typeof e?e:t||"(default)",r=Ve(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const e=y("firestore");e&&El(r,...e)}return r}(Ue({apiKey:"AIzaSyDd0MHG0qZlUu4GPC8UHA5XhDMGVw__1dc",authDomain:"mfloralok.firebaseapp.com",databaseURL:"https://mfloralok-default-rtdb.firebaseio.com",projectId:"mfloralok",storageBucket:"mfloralok.appspot.com",messagingSenderId:"426630649514",appId:"1:426630649514:web:fa3839e750d4b5230fa2d3",measurementId:"G-P9S4FP71WH"}));var Cc=n(579);const Tc={name:"",type:"",stock:0,basePrice:0,purchasePrice:0,purchaseDate:"",supplier:""},Nc=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(Tc),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!1),[u,h]=(0,i.useState)("cards"),[d,f]=(0,i.useState)("");(0,i.useEffect)((()=>{const e=_c(Ml(Ec,"plants"),(e=>{const n=e.docs.map((e=>c({id:e.id},e.data())));t(n)}));return()=>e()}),[]);const p=e=>{const{name:t,value:n}=e.target;r((e=>c(c({},e),{},{[t]:"stock"===t||"basePrice"===t||"purchasePrice"===t?Number(n):n})))},g=e=>{r({name:e.name,type:e.type,stock:e.stock,basePrice:e.basePrice,purchasePrice:e.purchasePrice,purchaseDate:e.purchaseDate,supplier:e.supplier}),a(e.id),l(!0)},m=async e=>{window.confirm("\xbfEliminar esta planta?")&&await xc(Dl(Ml(Ec,"plants"),e))},y=e.filter((e=>{var t,n,i;const r=d.trim().toLowerCase();return!r||((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(n=e.type)||void 0===n?void 0:n.toLowerCase().includes(r))||String(e.stock).includes(r)||String(e.basePrice).includes(r)||String(e.purchasePrice).includes(r)||(null===(i=e.supplier)||void 0===i?void 0:i.toLowerCase().includes(r))||"")}));return(0,Cc.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Cc.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Cc.jsx)("div",{className:"mb-4 max-w-md mx-auto",children:(0,Cc.jsx)("input",{type:"text",className:"border rounded p-2 w-full",placeholder:"Buscar por nombre, tipo, proveedor...",value:d,onChange:e=>f(e.target.value)})}),(0,Cc.jsxs)("div",{className:"flex justify-center mb-2 gap-2",children:[(0,Cc.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("cards"===u?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>h("cards"),children:"Vista de tarjetas"}),(0,Cc.jsx)("button",{className:"px-3 py-1 rounded font-semibold text-sm ".concat("table"===u?"bg-green-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>h("table"),children:"Vista de tabla"})]}),(0,Cc.jsx)("button",{type:"button",className:"fixed bottom-20 right-4 z-50 bg-green-600 text-white rounded-full shadow-lg p-4 text-3xl md:hidden hover:bg-green-700 transition",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:()=>l(!0),"aria-label":"Nuevo producto",children:"+"}),o&&(0,Cc.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-30",children:(0,Cc.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!n.name.trim()||!n.type.trim()||n.stock<0||n.basePrice<0||n.purchasePrice<0)return void alert("Todos los campos son obligatorios y deben ser v\xe1lidos.");if(n.basePrice>n.purchasePrice)return void alert("El precio de compra no puede ser mayor al precio de venta.");const i=new Date,o=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),u=String(i.getDate()).padStart(2,"0"),h="".concat(o,"-").concat(c,"-").concat(u),d={id:s||(Math.max(0,...e.map((e=>Number(e.id)||0)))+1).toString(),name:n.name,type:n.type,stock:n.stock,basePrice:n.basePrice,purchasePrice:n.purchasePrice,purchaseDate:n.purchaseDate||h,supplier:n.supplier||""};try{await vc(Dl(Ml(Ec,"plants"),d.id),d),r(Tc),a(null),l(!1)}catch(f){alert("Error guardando la planta.")}},className:"bg-white rounded-lg shadow p-4 mb-4 grid grid-cols-1 gap-3 w-full max-w-md relative",style:{paddingBottom:120,marginBottom:0,maxHeight:"90vh",overflowY:"auto"},children:[(0,Cc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Nombre"}),(0,Cc.jsx)("input",{name:"name",value:n.name,onChange:p,className:"border rounded p-2 w-full",placeholder:"Nombre",required:!0}),(0,Cc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Tipo"}),(0,Cc.jsxs)("select",{name:"type",value:n.type,onChange:p,className:"border rounded p-2 w-full",required:!0,children:[(0,Cc.jsx)("option",{value:"",children:"Tipo..."}),(0,Cc.jsx)("option",{value:"Plantas de Interior",children:"Plantas de Interior"}),(0,Cc.jsx)("option",{value:"Plantas de Exterior",children:"Plantas de Exterior"}),(0,Cc.jsx)("option",{value:"Macetas",children:"Macetas"}),(0,Cc.jsx)("option",{value:"Otros",children:"Otros"})]}),(0,Cc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Stock"}),(0,Cc.jsx)("input",{name:"stock",type:"number",min:"0",value:n.stock,onChange:p,className:"border rounded p-2 w-full",placeholder:"Stock",required:!0}),(0,Cc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Precio de Venta"}),(0,Cc.jsx)("input",{name:"purchasePrice",type:"number",min:"0",value:n.purchasePrice,onChange:p,className:"border rounded p-2 w-full",placeholder:"Precio de Venta",required:!0}),(0,Cc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Precio de Compra"}),(0,Cc.jsx)("input",{name:"basePrice",type:"number",min:"0",value:n.basePrice,onChange:p,className:"border rounded p-2 w-full",placeholder:"Precio de Compra",required:!0}),(0,Cc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Fecha de Compra"}),(0,Cc.jsx)("input",{name:"purchaseDate",type:"date",value:n.purchaseDate,onChange:p,className:"border rounded p-2 w-full"}),(0,Cc.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Proveedor (opcional)"}),(0,Cc.jsx)("input",{name:"supplier",value:n.supplier,onChange:p,className:"border rounded p-2 w-full",placeholder:"Proveedor (opcional)"}),(0,Cc.jsxs)("div",{className:"fixed left-0 right-0 bottom-0 z-[110] flex gap-2 p-4 bg-white border-t border-gray-300 shadow-lg",style:{height:70},children:[(0,Cc.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-3 rounded flex-1 text-lg font-semibold shadow",children:s?"Actualizar":"Agregar"}),(0,Cc.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-3 rounded flex-1 text-lg font-semibold shadow",onClick:()=>{r(Tc),a(null),l(!1)},children:"Cancelar"})]})]})}),"cards"===u?(0,Cc.jsx)("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4",children:y.slice().sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>{const t=Number(e.stock)<=1,n=t?"bg-red-100 border-red-300":"bg-green-50 border-green-200";return(0,Cc.jsxs)("div",{className:"rounded-lg shadow p-3 flex flex-col items-start border ".concat(n," transition-colors duration-300"),children:[(0,Cc.jsx)("div",{className:"font-bold text-base text-green-700 mb-1",children:e.name}),(0,Cc.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.type}),(0,Cc.jsxs)("div",{className:"text-sm mb-1 ".concat(t?"text-red-700 font-bold":"text-green-800"),children:["Stock: ",(0,Cc.jsx)("b",{children:e.stock})]}),(0,Cc.jsxs)("div",{className:"text-sm mb-1",children:["Venta: ",(0,Cc.jsxs)("b",{children:["$",e.purchasePrice]})]}),(0,Cc.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Cc.jsx)("button",{className:"text-blue-600 underline text-xs",onClick:()=>g(e),children:"Editar"}),(0,Cc.jsx)("button",{className:"text-red-600 underline text-xs",onClick:()=>m(e.id),children:"Eliminar"})]})]},e.id)}))}):(0,Cc.jsx)("div",{className:"bg-white rounded-lg shadow p-2",children:(0,Cc.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Cc.jsx)("thead",{children:(0,Cc.jsxs)("tr",{className:"bg-green-100",children:[(0,Cc.jsx)("th",{className:"p-1",children:"Nombre"}),(0,Cc.jsx)("th",{className:"p-1",children:"Tipo"}),(0,Cc.jsx)("th",{className:"p-1",children:"Stock"}),(0,Cc.jsx)("th",{className:"p-1",children:"Venta"}),(0,Cc.jsx)("th",{className:"p-1",children:"Compra"}),(0,Cc.jsx)("th",{className:"p-1",children:"Acciones"})]})}),(0,Cc.jsx)("tbody",{children:y.slice().sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>(0,Cc.jsxs)("tr",{className:"border-t",children:[(0,Cc.jsx)("td",{className:"p-1",children:e.name}),(0,Cc.jsx)("td",{className:"p-1",children:e.type}),(0,Cc.jsx)("td",{className:"p-1",children:e.stock}),(0,Cc.jsxs)("td",{className:"p-1",children:["$",e.purchasePrice]}),(0,Cc.jsxs)("td",{className:"p-1",children:["$",e.basePrice]}),(0,Cc.jsxs)("td",{className:"p-1 flex gap-1",children:[(0,Cc.jsx)("button",{className:"text-blue-600 underline text-xs",onClick:()=>g(e),children:"Editar"}),(0,Cc.jsx)("button",{className:"text-red-600 underline text-xs",onClick:()=>m(e.id),children:"Eliminar"})]})]},e.id)))})]})})]})})},Mc={name:"",type:"",stock:0,basePrice:0,purchasePrice:0,purchaseDate:"",supplier:""},Dc=()=>{const[e,t]=(0,i.useState)(window.innerWidth<768),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(Mc),[o,l]=(0,i.useState)(null),[u,h]=(0,i.useState)("");(0,i.useEffect)((()=>{const e=()=>t(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,i.useEffect)((()=>{const e=_c(Ml(Ec,"plants"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));r(t)}));return()=>e()}),[]);const d=n.filter((e=>{var t,n,i;const r=u.trim().toLowerCase();return!r||((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(n=e.type)||void 0===n?void 0:n.toLowerCase().includes(r))||String(e.stock).includes(r)||String(e.basePrice).includes(r)||String(e.purchasePrice).includes(r)||(null===(i=e.supplier)||void 0===i?void 0:i.toLowerCase().includes(r))||"")})),f=e=>{const{name:t,value:n}=e.target;a((e=>c(c({},e),{},{[t]:"stock"===t||"basePrice"===t||"purchasePrice"===t?Number(n):n})))};return e?(0,Cc.jsx)(Nc,{}):(0,Cc.jsxs)("div",{className:"relative",children:[(0,Cc.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Inventario de Plantas"}),(0,Cc.jsx)("div",{className:"mb-4 max-w-md",children:(0,Cc.jsx)("input",{type:"text",className:"border rounded p-2 w-full",placeholder:"Buscar por nombre, tipo, proveedor...",value:u,onChange:e=>h(e.target.value)})}),(0,Cc.jsxs)("form",{id:"form-alta-producto",onSubmit:async e=>{if(e.preventDefault(),!s.name.trim()||!s.type.trim()||s.stock<0||s.basePrice<0||s.purchasePrice<0)return void alert("Todos los campos son obligatorios y deben ser v\xe1lidos.");if(s.basePrice>s.purchasePrice)return void alert("El precio de compra no puede ser mayor al precio de venta.");const t=new Date,i=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),u="".concat(i,"-").concat(r,"-").concat(c),h={id:o||(Math.max(0,...n.map((e=>Number(e.id)||0)))+1).toString(),name:s.name,type:s.type,stock:s.stock,basePrice:s.basePrice,purchasePrice:s.purchasePrice,purchaseDate:s.purchaseDate||u,supplier:s.supplier||""};try{await vc(Dl(Ml(Ec,"plants"),h.id),h),a(Mc),l(null)}catch(d){alert("Error guardando la planta.")}},className:"mb-6 grid grid-cols-1 md:grid-cols-7 gap-4 items-end",children:[(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium",children:"Nombre"}),(0,Cc.jsx)("input",{name:"name",value:s.name,onChange:f,className:"border rounded p-2 w-full",required:!0})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium",children:"Tipo"}),(0,Cc.jsxs)("select",{name:"type",value:s.type,onChange:f,className:"border rounded p-2 w-full",required:!0,children:[(0,Cc.jsx)("option",{value:"",children:"Seleccionar..."}),(0,Cc.jsx)("option",{value:"Plantas de Interior",children:"Plantas de Interior"}),(0,Cc.jsx)("option",{value:"Plantas de Exterior",children:"Plantas de Exterior"}),(0,Cc.jsx)("option",{value:"Macetas",children:"Macetas"}),(0,Cc.jsx)("option",{value:"Otros",children:"Otros"})]})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium",children:"Stock"}),(0,Cc.jsx)("input",{name:"stock",type:"number",min:"0",value:s.stock,onChange:f,className:"border rounded p-2 w-full",required:!0})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium",children:"Precio de Compra"}),(0,Cc.jsx)("input",{name:"basePrice",type:"number",min:"0",value:s.basePrice,onChange:f,className:"border rounded p-2 w-full",required:!0})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium",children:"Precio de Venta"}),(0,Cc.jsx)("input",{name:"purchasePrice",type:"number",min:"0",value:s.purchasePrice,onChange:f,className:"border rounded p-2 w-full",required:!0})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium",children:"Fecha de Compra"}),(0,Cc.jsx)("input",{name:"purchaseDate",type:"date",value:s.purchaseDate,onChange:f,className:"border rounded p-2 w-full"})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium",children:"Proveedor"}),(0,Cc.jsx)("input",{name:"supplier",value:s.supplier,onChange:f,className:"border rounded p-2 w-full",placeholder:"(opcional)"})]}),(0,Cc.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded mt-2 md:mt-0",children:o?"Actualizar":"Agregar"}),o&&(0,Cc.jsx)("button",{type:"button",className:"ml-2 text-sm text-gray-600 underline",onClick:()=>{a(Mc),l(null)},children:"Cancelar"})]}),(0,Cc.jsxs)("table",{className:"min-w-full bg-white border rounded shadow text-sm",children:[(0,Cc.jsx)("thead",{children:(0,Cc.jsxs)("tr",{className:"bg-green-100",children:[(0,Cc.jsx)("th",{className:"p-2",children:"Nombre"}),(0,Cc.jsx)("th",{className:"p-2",children:"Tipo"}),(0,Cc.jsx)("th",{className:"p-2",children:"Stock"}),(0,Cc.jsx)("th",{className:"p-2",children:"Precio de Venta"}),(0,Cc.jsx)("th",{className:"p-2",children:"Precio de Compra"}),(0,Cc.jsx)("th",{className:"p-2",children:"Fecha de Compra"}),(0,Cc.jsx)("th",{className:"p-2",children:"Proveedor"}),(0,Cc.jsx)("th",{className:"p-2",children:"Acciones"})]})}),(0,Cc.jsx)("tbody",{children:d.slice().sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>(0,Cc.jsxs)("tr",{className:"border-t",children:[(0,Cc.jsx)("td",{className:"p-2",children:e.name}),(0,Cc.jsx)("td",{className:"p-2",children:e.type}),(0,Cc.jsx)("td",{className:"p-2",children:e.stock}),(0,Cc.jsxs)("td",{className:"p-2",children:["$",e.purchasePrice]}),(0,Cc.jsxs)("td",{className:"p-2",children:["$",e.basePrice]}),(0,Cc.jsx)("td",{className:"p-2",children:e.purchaseDate||"-"}),(0,Cc.jsx)("td",{className:"p-2",children:e.supplier||"-"}),(0,Cc.jsxs)("td",{className:"p-2 flex gap-2",children:[(0,Cc.jsx)("button",{className:"text-blue-600 underline",onClick:()=>(e=>{a({name:e.name,type:e.type,stock:e.stock,basePrice:e.basePrice,purchasePrice:e.purchasePrice,purchaseDate:e.purchaseDate,supplier:e.supplier}),l(e.id)})(e),children:"Editar"}),(0,Cc.jsx)("button",{className:"text-red-600 underline",onClick:()=>(async e=>{window.confirm("\xbfEliminar esta planta?")&&await xc(Dl(Ml(Ec,"plants"),e))})(e.id),children:"Eliminar"})]})]},e.id)))})]}),(0,Cc.jsx)("button",{type:"button",className:"fixed bottom-20 right-4 z-50 bg-green-600 text-white rounded-full shadow-lg p-4 text-3xl md:hidden hover:bg-green-700 transition",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},onClick:()=>{const e=document.getElementById("form-alta-producto");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},"aria-label":"Nuevo producto",children:"+"})]})},Pc=e=>{let{initialData:t,onSubmit:n,onCancel:r}=e;const[s,a]=(0,i.useState)(t||{name:"",basePrice:"",purchasePrice:"",stock:"",type:"interior"}),o=e=>{const{name:t,value:n}=e.target;a((e=>c(c({},e),{},{[t]:"name"===t?n:Number(n)})))};return(0,Cc.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(s)},className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Cc.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t?"Editar Producto":"Nuevo Producto"}),(0,Cc.jsxs)("div",{className:"space-y-4",children:[(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,Cc.jsx)("input",{type:"text",name:"name",value:s.name,onChange:o,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),(0,Cc.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Precio Venta"}),(0,Cc.jsx)("input",{type:"number",name:"basePrice",value:s.basePrice,onChange:o,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Precio Compra"}),(0,Cc.jsx)("input",{type:"number",name:"purchasePrice",value:s.purchasePrice,onChange:o,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock"}),(0,Cc.jsx)("input",{type:"number",name:"stock",value:s.stock,onChange:o,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),(0,Cc.jsx)("input",{type:"text",name:"type",value:s.type,onChange:o,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),(0,Cc.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,Cc.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancelar"}),(0,Cc.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:t?"Actualizar":"Guardar"})]})]})]})},Ic=e=>{let{plants:t=[],value:n,onChange:r,label:s="Producto",required:a=!1,disabled:o=!1}=e;const[l,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(t),[d,f]=(0,i.useState)(!1),p=(0,i.useRef)(),g=(0,i.useRef)();(0,i.useEffect)((()=>{const e=t.find((e=>String(e.id)===String(n)));c(e?e.name:"")}),[n,t]),(0,i.useEffect)((()=>{h(""===l?t:t.filter((e=>e.name.toLowerCase().includes(l.toLowerCase()))))}),[l,t]),(0,i.useEffect)((()=>{function e(e){p.current&&!p.current.contains(e.target)&&f(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);return(0,Cc.jsxs)("div",{ref:p,className:"relative",children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s}),(0,Cc.jsx)("input",{type:"text",value:l,onChange:e=>{c(e.target.value),f(!0)},onFocus:()=>f(!0),onBlur:e=>{setTimeout((()=>f(!1)),100)},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Buscar producto...",disabled:o,autoComplete:"off",required:a}),d&&l&&u.length>0&&(0,Cc.jsx)("ul",{className:"border border-gray-200 rounded bg-white max-h-40 overflow-y-auto mt-1 absolute z-10 w-full shadow-lg",children:u.slice(0,8).map((e=>(0,Cc.jsxs)("li",{className:"px-3 py-1 hover:bg-blue-100 cursor-pointer text-sm",onMouseDown:()=>(e=>{c(e.name),r(e.id),f(!1),g.current&&g.current.focus()})(e),children:[e.name," (Stock: ",e.stock,")"]},e.id)))}),(0,Cc.jsxs)("select",{ref:g,className:"mt-2 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:n||"",onChange:e=>(e=>{const t=e.target.value;r(t),f(!1)})(e),required:a,disabled:o,children:[(0,Cc.jsx)("option",{value:"",children:"Seleccionar producto"}),u.map((e=>(0,Cc.jsxs)("option",{value:e.id,children:[e.name," (Stock: ",e.stock,")"]},e.id)))]})]})};function Ac(e,t){const n=function(e){Oc[e]||(Oc[e]=jc?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return Oc[e]}(t);return"formatToParts"in n?function(e,t){try{const n=e.formatToParts(t),i=[];for(let e=0;e<n.length;e++){const t=Lc[n[e].type];void 0!==t&&(i[t]=parseInt(n[e].value,10))}return i}catch(n){if(n instanceof RangeError)return[NaN];throw n}}(n,e):function(e,t){const n=e.format(t),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(i[3],10),parseInt(i[1],10),parseInt(i[2],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10)]}(n,e)}const Lc={year:0,month:1,day:2,hour:3,minute:4,second:5};const Oc={},Rc=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),jc="06/25/2014, 00:00:00"===Rc||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===Rc;function Fc(e,t,n,i,r,s,a){const o=new Date(0);return o.setUTCFullYear(e,t,n),o.setUTCHours(i,r,s,a),o}const Vc=36e5,zc={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Bc(e,t,n){if(!e)return 0;let i,r,s=zc.timezoneZ.exec(e);if(s)return 0;if(s=zc.timezoneHH.exec(e),s)return i=parseInt(s[1],10),Hc(i)?-i*Vc:NaN;if(s=zc.timezoneHHMM.exec(e),s){i=parseInt(s[2],10);const e=parseInt(s[3],10);return Hc(i,e)?(r=Math.abs(i)*Vc+6e4*e,"+"===s[1]?-r:r):NaN}if(function(e){if(Wc[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Wc[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());const i=n?t:function(e){return Fc(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),r=Uc(i,e),s=n?r:function(e,t,n){const i=e.getTime();let r=i-t;const s=Uc(new Date(r),n);if(t===s)return t;r-=s-t;const a=Uc(new Date(r),n);if(s===a)return s;return Math.max(s,a)}(t,r,e);return-s}return NaN}function Uc(e,t){const n=Ac(e,t),i=Fc(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let r=e.getTime();const s=r%1e3;return r-=s>=0?s:1e3+s,i-r}function Hc(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}const Wc={};function qc(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const Kc=36e5,Yc=6e4,Qc={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function Gc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);const n=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"===typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);const i=function(e){const t={};let n,i=Qc.dateTimePattern.exec(e);i?(t.date=i[1],n=i[3]):(i=Qc.datePattern.exec(e),i?(t.date=i[1],n=i[2]):(t.date=null,n=e));if(n){const e=Qc.timeZone.exec(n);e?(t.time=n.replace(e[1],""),t.timeZone=e[1].trim()):t.time=n}return t}(e),{year:r,restDateString:s}=function(e,t){if(e){const n=Qc.YYY[t],i=Qc.YYYYY[t];let r=Qc.YYYY.exec(e)||i.exec(e);if(r){const t=r[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(r=Qc.YY.exec(e)||n.exec(e),r){const t=r[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(i.date,n),a=function(e,t){if(null===t)return null;let n,i,r;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let s=Qc.MM.exec(e);if(s)return n=new Date(0),i=parseInt(s[1],10)-1,eu(t,i)?(n.setUTCFullYear(t,i),n):new Date(NaN);if(s=Qc.DDD.exec(e),s){n=new Date(0);const e=parseInt(s[1],10);return function(e,t){if(t<1)return!1;const n=Zc(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,e)?(n.setUTCFullYear(t,0,e),n):new Date(NaN)}if(s=Qc.MMDD.exec(e),s){n=new Date(0),i=parseInt(s[1],10)-1;const e=parseInt(s[2],10);return eu(t,i,e)?(n.setUTCFullYear(t,i,e),n):new Date(NaN)}if(s=Qc.Www.exec(e),s)return r=parseInt(s[1],10)-1,tu(r)?$c(t,r):new Date(NaN);if(s=Qc.WwwD.exec(e),s){r=parseInt(s[1],10)-1;const e=parseInt(s[2],10)-1;return tu(r,e)?$c(t,r,e):new Date(NaN)}return null}(s,r);if(null===a||isNaN(a.getTime()))return new Date(NaN);if(a){const e=a.getTime();let n,r=0;if(i.time&&(r=function(e){let t,n,i=Qc.HH.exec(e);if(i)return t=parseFloat(i[1].replace(",",".")),nu(t)?t%24*Kc:NaN;if(i=Qc.HHMM.exec(e),i)return t=parseInt(i[1],10),n=parseFloat(i[2].replace(",",".")),nu(t,n)?t%24*Kc+n*Yc:NaN;if(i=Qc.HHMMSS.exec(e),i){t=parseInt(i[1],10),n=parseInt(i[2],10);const e=parseFloat(i[3].replace(",","."));return nu(t,n,e)?t%24*Kc+n*Yc+1e3*e:NaN}return null}(i.time),null===r||isNaN(r)))return new Date(NaN);if(i.timeZone||t.timeZone){if(n=Bc(i.timeZone||t.timeZone,new Date(e+r)),isNaN(n))return new Date(NaN)}else n=qc(new Date(e+r)),n=qc(new Date(e+r+n));return new Date(e+r+n)}return new Date(NaN)}function $c(e,t,n){t=t||0,n=n||0;const i=new Date(0);i.setUTCFullYear(e,0,4);const r=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+r),i}const Xc=[31,28,31,30,31,30,31,31,30,31,30,31],Jc=[31,29,31,30,31,30,31,31,30,31,30,31];function Zc(e){return e%400===0||e%4===0&&e%100!==0}function eu(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;const i=Zc(e);if(i&&n>Jc[t])return!1;if(!i&&n>Xc[t])return!1}return!0}function tu(e,t){return!(e<0||e>52)&&(null==t||!(t<0||t>6))}function nu(e,t,n){return!(e<0||e>=25)&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}function iu(e,t,n){const i=Bc(t,e=Gc(e,n),!0),r=new Date(e.getTime()-i),s=new Date(0);return s.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),s.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),s}async function ru(e){let{plantId:t,quantity:n,price:i,paymentMethod:r,date:s,location:a,notes:o}=e;const l=Dl(Ec,"plants",String(t)),c=await function(e){e=_l(e,Tl);const t=_l(e.firestore,Al);return pl(Ll(t),e._key).then((n=>Sc(t,e,n)))}(l);if(!c.exists())return{ok:!1,error:"Planta no encontrada"};const u=c.data();if(Number(n)>Number(u.stock))return{ok:!1,error:"Stock insuficiente"};const h=Number(n),d=Number(i),f=Number((h*d).toFixed(2)),p={plantId:Number(t),quantity:h,salePrice:d,paymentMethod:r,date:s,location:a,notes:o,total:f};await wc(Ml(Ec,"sales"),p);const g={type:"venta",detail:u.name,plantId:Number(t),quantity:h,price:d,total:f,paymentMethod:r,date:s,location:a,notes:o};return await wc(Ml(Ec,"movements"),g),await function(e,t,n){e=_l(e,Tl);const i=_l(e.firestore,Al),r=Yl(i);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=N(t))||t instanceof jl?Xl(r,"updateDoc",e._key,t,n,o):$l(r,"updateDoc",e._key,t),kc(i,[s.toMutation(e._key,vr.exists(!0))])}(l,{stock:Number(u.stock)-h}),{ok:!0}}const su=[{value:"venta",label:"Venta"},{value:"compra",label:"Compra"},{value:"ingreso",label:"Ingreso"},{value:"egreso",label:"Egreso"}],au=[{value:"efectivo",label:"Efectivo (E)"},{value:"mercadoPago",label:"Mercado Pago (MP)"}],ou=e=>{let{plants:t,hideForm:n,showOnlyForm:r,renderTotals:s}=e;const[a,o]=(0,i.useState)(t||[]),[l,u]=(0,i.useState)([]),[h,d]=(0,i.useState)({type:"venta",detail:"",plantId:"",quantity:1,price:"",total:"",paymentMethod:"efectivo",date:(new Date).toISOString().slice(0,16),location:"",notes:""}),[f,p]=(0,i.useState)(!1),[g,m]=(0,i.useState)(""),[y,b]=(0,i.useState)(!1),[v,x]=(0,i.useState)(!1),[w,_]=(0,i.useState)(""),[k,S]=(0,i.useState)(null),[E,C]=(0,i.useState)(!1),[T,N]=(0,i.useState)(0),M=new Date,D=M.getMonth(),P=M.getFullYear(),I=l.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return!isNaN(t.getTime())&&(t.getMonth()===D&&t.getFullYear()===P)}));(0,i.useEffect)((()=>{const e=_c(Ml(Ec,"movements"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));u(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))))}));return()=>e()}),[T]),(0,i.useEffect)((()=>{const e=_c(Ml(Ec,"plants"),(e=>{const t=e.docs.map((e=>c({id:e.id},e.data())));o(t)}));return()=>e()}),[]);const A=()=>{N((e=>e+1))},L=e=>{const{name:t,value:n}=e.target;d((e=>c(c({},e),{},{[t]:n})))},O=l.filter((e=>"efectivo"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),R=l.filter((e=>"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),j=async e=>{e.preventDefault(),_("");let t=h.total,n=h.price;if("venta"===h.type||"compra"===h.type?(!t&&h.price&&h.quantity&&(t=(Number(h.price)*Number(h.quantity)).toFixed(2)),n=Number(h.price).toFixed(2)):(!t&&h.price&&(t=Number(h.price).toFixed(2)),n=h.price?Number(h.price).toFixed(2):""),"venta"===h.type){if(!h.price||Number(h.price)<=0)return void _("Debe ingresar un precio v\xe1lido para la venta.");if(!h.plantId)return void _("Debe seleccionar un producto (planta, maceta u otro) para la venta.")}if("compra"===h.type||"egreso"===h.type){const e=Number("ingreso"===h.type||"egreso"===h.type?h.price:t);if("mercadoPago"===h.paymentMethod&&e>R)return _("No hay saldo suficiente en Mercado Pago para realizar esta operaci\xf3n."),ne({type:"error",text:"No hay saldo suficiente en Mercado Pago para realizar esta operaci\xf3n."}),void C(!0);if("efectivo"===h.paymentMethod&&e>O)return _("No hay saldo suficiente en Efectivo para realizar esta operaci\xf3n."),ne({type:"error",text:"No hay saldo suficiente en Efectivo para realizar esta operaci\xf3n."}),void C(!0)}let i,r=h.date;if("venta"===h.type&&ee){const e=iu((new Date).toISOString().slice(0,16),"America/Argentina/Buenos_Aires");i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}else if(r&&10===r.length){const e=iu(r+"T00:00","America/Argentina/Buenos_Aires");i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}else if(r&&16===r.length){const e=iu(r,"America/Argentina/Buenos_Aires");i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}else{const e=iu((new Date).toISOString().slice(0,16),"America/Argentina/Buenos_Aires");i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))}const s=i.toISOString();try{if("venta"===h.type||"compra"===h.type){const e=c(c({},h),{},{detail:"",total:Number(t),price:Number(n),date:s});if("venta"===h.type){const e=await ru({plantId:h.plantId,quantity:h.quantity,price:Number(n),paymentMethod:h.paymentMethod,date:s,location:h.location,notes:h.notes});if(!e.ok)return _(e.error||"Error al registrar la venta"),ne({type:"error",text:e.error||"Error al registrar la venta"}),void C(!0);ne({type:"success",text:"Movimiento registrado correctamente"}),C(!1)}else e.quantity=Number(h.quantity),e.price=Number(n),await wc(Ml(Ec,"movements"),e),ne({type:"success",text:"Movimiento registrado correctamente"}),C(!1)}else{let e=c(c({},h),{},{total:Number(t),price:n?Number(n):void 0,date:s});delete e.quantity,await wc(Ml(Ec,"movements"),e),ne({type:"success",text:"Movimiento registrado correctamente"}),C(!1)}d({type:"venta",detail:"",plantId:"",quantity:1,price:"",total:"",paymentMethod:"efectivo",date:(new Date).toISOString().slice(0,16),location:"",notes:""})}catch(a){_("Error al registrar el movimiento"),ne({type:"error",text:"Error al registrar el movimiento"}),C(!0)}},F=M.getDate(),V=l.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return!isNaN(t.getTime())&&(t.getDate()===F&&t.getMonth()===D&&t.getFullYear()===P)})),z=V.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(t.total||0)),0),B=V.filter((e=>"compra"===e.type)).reduce(((e,t)=>e+(t.total||0)),0),U=V.filter((e=>"egreso"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),H=V.filter((e=>"egreso"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),W=V.filter((e=>"venta"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),q=V.filter((e=>"venta"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),K=V.filter((e=>"compra"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Y=V.filter((e=>"compra"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),Q=V.filter((e=>"ingreso"===e.type&&"efectivo"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),G=V.filter((e=>"ingreso"===e.type&&"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>e+(t.total||0)),0),$=Q+W-K-U,X=G+q-Y-H,J=$+X,Z=V.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.quantity)||0)),0);(0,i.useEffect)((()=>{const e=()=>x(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const ee=v,te=()=>{var e;return(0,Cc.jsxs)("form",{onSubmit:j,className:"bg-white p-4 rounded-lg shadow space-y-4",children:[(0,Cc.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),(0,Cc.jsx)("select",{name:"type",value:h.type,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:su.map((e=>(0,Cc.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Detalle"}),(0,Cc.jsx)("input",{name:"detail",value:"venta"===h.type?"":h.detail,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:"venta"===h.type,placeholder:"venta"===h.type?"Solo para ingresos/egresos/compras":""})]}),("venta"===h.type||"compra"===h.type)&&(0,Cc.jsx)("div",{children:(0,Cc.jsx)(Ic,{plants:a,value:h.plantId?String(h.plantId):"",onChange:e=>{e&&a.some((t=>String(t.id)===String(e)))?d((t=>c(c({},t),{},{plantId:String(e)}))):d((e=>c(c({},e),{},{plantId:""}))),p(!1),m("")},onBlur:()=>{p(!1),m("")},onSelect:()=>{p(!1),m(""),setTimeout((()=>{const e=document.activeElement;e&&e.scrollIntoView&&e.scrollIntoView({block:"center",behavior:"smooth"})}),100)},required:"venta"===h.type,label:"Producto",disabled:"venta"!==h.type&&"compra"!==h.type})}),("venta"===h.type||"compra"===h.type&&h.plantId)&&(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad"}),(0,Cc.jsx)("input",{type:"number",name:"quantity",min:"1",value:h.quantity,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Precio"}),(0,Cc.jsx)("input",{type:"number",name:"price",min:"0",value:h.price,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Total"}),(0,Cc.jsx)("input",{type:"number",name:"total",min:"0",value:"ingreso"===h.type||"egreso"===h.type?h.price:h.total,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Se calcula autom\xe1ticamente",disabled:"ingreso"===h.type||"egreso"===h.type})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\xe9todo de Pago"}),(0,Cc.jsx)("select",{name:"paymentMethod",value:h.paymentMethod,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:au.map((e=>(0,Cc.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),("venta"!==h.type||!ee)&&(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha"}),(0,Cc.jsx)("input",{type:"date",name:"date",value:(null===(e=h.date)||void 0===e?void 0:e.slice(0,10))||"",onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Lugar"}),(0,Cc.jsx)("input",{name:"location",value:h.location,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Cc.jsxs)("div",{className:"md:col-span-2",children:[(0,Cc.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notas"}),(0,Cc.jsx)("input",{name:"notes",value:h.notes,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]}),(0,Cc.jsx)("button",{type:"submit",className:"mt-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Registrar Movimiento"}),w&&(0,Cc.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mb-2 text-center",children:w}),f&&(0,Cc.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-4 rounded mb-4",children:[(0,Cc.jsxs)("p",{className:"mb-2",children:["\xbfDeseas agregar ",(0,Cc.jsx)("b",{children:g})," como nuevo producto al inventario?"]}),(0,Cc.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 mr-2",onClick:()=>{b(!0),p(!1)},children:"S\xed, agregar producto"}),(0,Cc.jsx)("button",{className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",onClick:()=>p(!1),children:"No, gracias"})]}),y&&(0,Cc.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:[(0,Cc.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Nuevo Producto"}),(0,Cc.jsx)(Pc,{initialData:{name:g,basePrice:"",purchasePrice:"",stock:"",type:"interior"},onSubmit:()=>{b(!1)},onCancel:()=>b(!1)})]})]})},ne=e=>{S(e),C("error"===e.type),"success"===e.type&&(window.innerWidth<768&&window.scrollTo({top:0,behavior:"smooth"}),setTimeout((()=>S(null)),4e3))};return(0,i.useEffect)((()=>{"venta"!==h.type&&"compra"!==h.type&&h.plantId&&d((e=>c(c({},e),{},{plantId:""})))}),[h.type]),r?(0,Cc.jsxs)("div",{className:"space-y-6",children:[ee&&"function"===typeof s&&s({cajaFisicaDia:$,cajaMPDia:X,totalGeneralDia:J,ventasEfectivoDia:W,ventasMPDia:q,totalVentasDia:z,totalComprasDia:B,cantidadProductosVendidosDia:Z,movementsToday:V}),te()]}):n?(0,Cc.jsxs)("div",{className:"space-y-6",children:[(0,Cc.jsxs)("div",{className:"flex flex-col items-center mb-4 w-full",children:[(0,Cc.jsxs)("div",{className:"w-full max-w-xl bg-gradient-to-br from-pink-100 via-white to-pink-200 rounded-lg shadow border border-pink-300 py-4 px-3",children:[(0,Cc.jsx)("h2",{className:"text-2xl font-black text-black text-center tracking-wide mb-1 font-sans",children:"Movimientos de Caja"}),(0,Cc.jsx)("h3",{className:"text-lg font-bold text-pink-700 text-center uppercase tracking-wider mb-2",children:"Ventas Diarias"}),(0,Cc.jsx)("hr",{className:"border-t-2 border-pink-400 w-1/2 mx-auto my-2"})]}),(0,Cc.jsxs)("div",{className:"w-full max-w-xl flex flex-row justify-between items-center mt-2",children:[(0,Cc.jsx)("button",{onClick:A,className:"px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 rounded border border-blue-300 font-semibold",children:"Recargar"}),(0,Cc.jsx)("div",{className:"text-base text-green-700 font-bold px-2 border-2 border-purple-300 rounded-lg bg-white shadow-sm",children:M.toLocaleString("es-AR",{month:"long",year:"numeric"})})]})]}),0===I.length?(0,Cc.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No hay movimientos registrados este mes."}):(0,Cc.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[(0,Cc.jsx)("thead",{className:"bg-gray-50",children:(0,Cc.jsxs)("tr",{children:[(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Fecha"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Tipo"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Detalle"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Producto"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Cantidad"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Precio"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Total"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"M\xe9todo"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Lugar"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Notas"})]})}),(0,Cc.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map(((e,t)=>{var n;return(0,Cc.jsxs)("tr",{className:"compra"===e.type?"bg-red-50":"egreso"===e.type?"bg-yellow-50":"ingreso"===e.type?"bg-green-50":"",children:[(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.date?new Date(e.date).toLocaleDateString():"-"}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.type}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:"venta"===e.type||"compra"===e.type?"":e.detail}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:("venta"===e.type||"compra"===e.type)&&((null===(n=a.find((t=>t.id===Number(e.plantId))))||void 0===n?void 0:n.name)||e.detail)||"-"}),(0,Cc.jsx)("td",{className:"px-2 py-1 text-right",children:"venta"===e.type||"compra"===e.type?e.quantity:""}),(0,Cc.jsx)("td",{className:"px-2 py-1 text-right",children:e.price?"$".concat(e.price):""}),(0,Cc.jsx)("td",{className:"px-2 py-1 text-right",children:e.total?"$".concat(e.total):""}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.paymentMethod}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.location}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.notes})]},e.id||t)}))})]})]}):(0,Cc.jsxs)("div",{className:"space-y-6",children:[k&&("success"===k.type?(0,Cc.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg text-white text-center transition-all duration-300 bg-green-600 animate-slide-down",style:{marginBottom:64},children:k.text}):(0,Cc.jsxs)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-4 py-2 rounded shadow-lg text-white text-center transition-all duration-300 bg-red-600 flex flex-col items-center gap-2 animate-slide-down",style:{marginBottom:64},children:[(0,Cc.jsx)("span",{children:k.text}),(0,Cc.jsx)("button",{className:"mt-1 px-3 py-1 bg-white text-red-700 rounded font-semibold border border-red-300 hover:bg-red-50",onClick:()=>S(null),children:"Aceptar"})]})),(0,Cc.jsxs)("div",{className:"flex flex-col items-center mb-4 w-full",children:[(0,Cc.jsxs)("div",{className:"w-full max-w-xl bg-gradient-to-br from-pink-100 via-white to-pink-200 rounded-lg shadow border border-pink-300 py-4 px-3",children:[(0,Cc.jsx)("h2",{className:"text-2xl font-black text-black text-center tracking-wide mb-1 font-sans",children:"Movimientos de Caja"}),(0,Cc.jsx)("h3",{className:"text-lg font-bold text-pink-700 text-center uppercase tracking-wider mb-2",children:"Ventas Diarias"}),(0,Cc.jsx)("hr",{className:"border-t-2 border-pink-400 w-1/2 mx-auto my-2"})]}),(0,Cc.jsxs)("div",{className:"w-full max-w-xl flex flex-row justify-between items-center mt-2",children:[(0,Cc.jsx)("button",{onClick:A,className:"px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 rounded border border-blue-300 font-semibold",children:"Recargar"}),(0,Cc.jsx)("div",{className:"text-base text-green-700 font-bold px-2 border-2 border-purple-300 rounded-lg bg-white shadow-sm",children:M.toLocaleString("es-AR",{month:"long",year:"numeric"})})]})]}),!n&&te(),(0,Cc.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[(0,Cc.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Hist\xf3rico de Movimientos del Mes"}),(0,Cc.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:0===I.length?(0,Cc.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No hay movimientos registrados este mes."}):(0,Cc.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[(0,Cc.jsx)("thead",{className:"bg-gray-50",children:(0,Cc.jsxs)("tr",{children:[(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Fecha"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Tipo"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Detalle"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Producto"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Cantidad"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Precio"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Total"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"M\xe9todo"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Lugar"}),(0,Cc.jsx)("th",{className:"px-2 py-1",children:"Notas"})]})}),(0,Cc.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map((e=>{var t,n,i;return(0,Cc.jsxs)("tr",{className:"compra"===e.type?"bg-red-50":"egreso"===e.type?"bg-yellow-50":"ingreso"===e.type?"bg-green-50":"",children:[(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.date?new Date(e.date).toLocaleString("es-AR",{timeZone:"America/Argentina/Buenos_Aires",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):""}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:(null===(t=su.find((t=>t.value===e.type)))||void 0===t?void 0:t.label)||e.type}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:"venta"===e.type?"":e.detail}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:"venta"===e.type&&((null===(n=a.find((t=>t.id===Number(e.plantId))))||void 0===n?void 0:n.name)||e.detail)||"-"}),(0,Cc.jsx)("td",{className:"px-2 py-1 text-right",children:"venta"===e.type||"compra"===e.type?e.quantity:""}),(0,Cc.jsx)("td",{className:"px-2 py-1 text-right",children:e.price?"$".concat(e.price):""}),(0,Cc.jsx)("td",{className:"px-2 py-1 text-right",children:e.total?"$".concat(e.total):""}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:(null===(i=au.find((t=>t.value===e.paymentMethod)))||void 0===i?void 0:i.label)||e.paymentMethod}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.location}),(0,Cc.jsx)("td",{className:"px-2 py-1",children:e.notes})]},e.id)}))})]})})]})]})},lu=e=>{const[t,n]=(0,i.useState)([]);(0,i.useEffect)((()=>{const e=_c(Ml(Ec,"movements"),(e=>{const t=new Date,i=t.getDate(),r=t.getMonth(),s=t.getFullYear(),a=e.docs.map((e=>c({id:e.id},e.data()))),o=a.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return!isNaN(t.getTime())&&(("compra"===e.type||"egreso"===e.type)&&t.getDate()===i&&t.getMonth()===r&&t.getFullYear()===s)}));n(o)}));return()=>e()}),[]);const r={sucursal:{bg:"bg-blue-50",border:"border-blue-400",text:"text-blue-700"},deposito:{bg:"bg-yellow-50",border:"border-yellow-400",text:"text-yellow-700"},online:{bg:"bg-purple-50",border:"border-purple-400",text:"text-purple-700"},"":{bg:"bg-green-50",border:"border-green-400",text:"text-green-700"}};e.lugar||e.location;return(0,Cc.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Cc.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Cc.jsx)(ou,c(c({},e),{},{showOnlyForm:!0,renderTotals:e=>(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsxs)("div",{className:"mt-6 w-full max-w-xl mx-auto flex flex-wrap gap-2 sm:gap-4 justify-center",children:[(0,Cc.jsxs)("div",{className:"flex-1 min-w-[110px] bg-green-100 rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border border-green-300",children:[(0,Cc.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"Efectivo"}),(0,Cc.jsxs)("span",{className:"text-lg sm:text-2xl font-bold text-green-700 truncate",children:["$",e.cajaFisicaDia.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Cc.jsxs)("div",{className:"flex-1 min-w-[110px] bg-blue-100 rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border border-blue-300",children:[(0,Cc.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"Mercado Pago"}),(0,Cc.jsxs)("span",{className:"text-lg sm:text-2xl font-bold text-blue-700 truncate",children:["$",e.cajaMPDia.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,Cc.jsxs)("div",{className:"flex-1 min-w-[110px] bg-yellow-100 rounded-lg shadow p-2 sm:p-4 flex flex-col items-center border border-yellow-300",children:[(0,Cc.jsx)("span",{className:"text-gray-500 text-xs sm:text-sm",children:"Total"}),(0,Cc.jsxs)("span",{className:"text-lg sm:text-2xl font-bold text-yellow-700 truncate",children:["$",e.totalGeneralDia.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(0,Cc.jsx)("div",{className:"mt-4 w-full max-w-xl mx-auto flex flex-row gap-4 justify-center",children:(0,Cc.jsxs)("div",{className:"flex-1 bg-purple-100 rounded-lg shadow p-4 flex flex-col items-center border border-purple-300",children:[(0,Cc.jsx)("span",{className:"text-gray-500 text-sm",children:"Art\xedculos vendidos hoy"}),(0,Cc.jsx)("span",{className:"text-2xl font-bold text-purple-700",children:e.cantidadProductosVendidosDia})]})})]})})),(0,Cc.jsx)("div",{className:"mt-8 w-full max-w-xl mx-auto",children:t.length>0&&(0,Cc.jsxs)("div",{className:"rounded-lg bg-red-50 border border-red-200 shadow-sm p-2 mt-2",children:[(0,Cc.jsx)("div",{className:"text-xs font-semibold text-red-700 mb-2 text-center",children:"Compras y egresos de hoy"}),(0,Cc.jsxs)("ul",{className:"divide-y divide-red-100",children:[(0,Cc.jsxs)("li",{className:"flex flex-row items-center justify-between px-1 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded mb-1",children:[(0,Cc.jsx)("span",{className:"w-14 text-left",children:"Fecha"}),(0,Cc.jsx)("span",{className:"w-20 text-center",children:"Total"}),(0,Cc.jsx)("span",{className:"w-14 text-center",children:"M\xe9todo"}),(0,Cc.jsx)("span",{className:"flex-1 px-2 text-left",children:"Lugar"}),(0,Cc.jsx)("span",{className:"max-w-[80px] text-left",children:"Nota"})]}),t.map(((e,t)=>{var n;return(0,Cc.jsxs)("li",{className:"flex flex-row items-center justify-between px-1 py-1 text-xs",children:[(0,Cc.jsx)("span",{className:"text-gray-700 w-14 text-left",children:new Date(e.date).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit"})}),(0,Cc.jsxs)("span",{className:"font-semibold text-red-700 w-20 text-center",children:["$",null===(n=e.total)||void 0===n?void 0:n.toLocaleString("es-AR",{minimumFractionDigits:2})]}),(0,Cc.jsx)("span",{className:"text-gray-700 w-14 text-center",children:"efectivo"===e.paymentMethod?"Efectivo":"mercadoPago"===e.paymentMethod?"MP":"-"}),(0,Cc.jsx)("span",{className:"text-gray-600 flex-1 px-2 truncate text-left",children:e.location||"-"}),(0,Cc.jsx)("span",{className:"text-gray-500 max-w-[80px] truncate text-left ml-2",children:e.notes||"-"})]},e.id||t)}))]})]})})]})})},cu=e=>{const[t,n]=(0,i.useState)(window.innerWidth<768);return(0,i.useEffect)((()=>{const e=()=>n(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),t?(0,Cc.jsx)(lu,c({},e)):(0,Cc.jsxs)("div",{className:"max-w-4xl mx-auto p-4",children:[(0,Cc.jsx)("h2",{className:"text-2xl font-bold mb-4 text-blue-800",children:"Caja y Movimientos"}),(0,Cc.jsx)(ou,c({},e))]})};function uu(e){return e+.5|0}const hu=(e,t,n)=>Math.max(Math.min(e,n),t);function du(e){return hu(uu(2.55*e),0,255)}function fu(e){return hu(uu(255*e),0,255)}function pu(e){return hu(uu(e/2.55)/100,0,1)}function gu(e){return hu(uu(100*e),0,100)}const mu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yu=[..."0123456789ABCDEF"],bu=e=>yu[15&e],vu=e=>yu[(240&e)>>4]+yu[15&e],xu=e=>(240&e)>>4===(15&e);function wu(e){var t=(e=>xu(e.r)&&xu(e.g)&&xu(e.b)&&xu(e.a))(e)?bu:vu;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const _u=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ku(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Su(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function Eu(e,t,n){const i=ku(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function Cu(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),a=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=a>.5?c/(2-r-s):c/(r+s),o=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),o=60*o+.5),[0|o,l||0,a]}function Tu(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(fu)}function Nu(e,t,n){return Tu(ku,e,t,n)}function Mu(e){return(e%360+360)%360}function Du(e){const t=_u.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?du(+t[5]):fu(+t[5]));const r=Mu(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Tu(Eu,e,t,n)}(r,s,a):"hsv"===t[1]?function(e,t,n){return Tu(Su,e,t,n)}(r,s,a):Nu(r,s,a),{r:n[0],g:n[1],b:n[2],a:i}}const Pu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Iu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Au;function Lu(e){Au||(Au=function(){const e={},t=Object.keys(Iu),n=Object.keys(Pu);let i,r,s,a,o;for(i=0;i<t.length;i++){for(a=o=t[i],r=0;r<n.length;r++)s=n[r],o=o.replace(s,Pu[s]);s=parseInt(Iu[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),Au.transparent=[0,0,0,0]);const t=Au[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Ou=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Ru=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,ju=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Fu(e,t,n){if(e){let i=Cu(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=Nu(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Vu(e,t){return e?Object.assign(t||{},e):e}function zu(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=fu(e[3]))):(t=Vu(e,{r:0,g:0,b:0,a:1})).a=fu(t.a),t}function Bu(e){return"r"===e.charAt(0)?function(e){const t=Ou.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?du(e):hu(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?du(n):hu(n,0,255)),i=255&(t[4]?du(i):hu(i,0,255)),r=255&(t[6]?du(r):hu(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):Du(e)}class Uu{constructor(e){if(e instanceof Uu)return e;const t=typeof e;let n;"object"===t?n=zu(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*mu[e[1]],g:255&17*mu[e[2]],b:255&17*mu[e[3]],a:5===n?17*mu[e[4]]:255}:7!==n&&9!==n||(t={r:mu[e[1]]<<4|mu[e[2]],g:mu[e[3]]<<4|mu[e[4]],b:mu[e[5]]<<4|mu[e[6]],a:9===n?mu[e[7]]<<4|mu[e[8]]:255})),t}(e)||Lu(e)||Bu(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Vu(this._rgb);return e&&(e.a=pu(e.a)),e}set rgb(e){this._rgb=zu(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(pu(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?wu(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Cu(e),n=t[0],i=gu(t[1]),r=gu(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(pu(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,a=2*s-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=ju(pu(e.r)),r=ju(pu(e.g)),s=ju(pu(e.b));return{r:fu(Ru(i+n*(ju(pu(t.r))-i))),g:fu(Ru(r+n*(ju(pu(t.g))-r))),b:fu(Ru(s+n*(ju(pu(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Uu(this.rgb)}alpha(e){return this._rgb.a=fu(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=uu(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Fu(this._rgb,2,e),this}darken(e){return Fu(this._rgb,2,-e),this}saturate(e){return Fu(this._rgb,1,e),this}desaturate(e){return Fu(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Cu(e);n[0]=Mu(n[0]+t),n=Nu(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Hu(){}const Wu=(()=>{let e=0;return()=>e++})();function qu(e){return null===e||void 0===e}function Ku(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Yu(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Qu(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Gu(e,t){return Qu(e)?e:t}function $u(e,t){return"undefined"===typeof e?t:e}const Xu=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ju(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Zu(e,t,n,i){let r,s,a;if(Ku(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Yu(e))for(a=Object.keys(e),s=a.length,r=0;r<s;r++)t.call(n,e[a[r]],a[r])}function eh(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function th(e){if(Ku(e))return e.map(th);if(Yu(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=th(e[n[r]]);return t}return e}function nh(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function ih(e,t,n,i){if(!nh(e))return;const r=t[e],s=n[e];Yu(r)&&Yu(s)?rh(r,s,i):t[e]=th(s)}function rh(e,t,n){const i=Ku(t)?t:[t],r=i.length;if(!Yu(e))return e;const s=(n=n||{}).merger||ih;let a;for(let o=0;o<r;++o){if(a=i[o],!Yu(a))continue;const t=Object.keys(a);for(let i=0,r=t.length;i<r;++i)s(t[i],e,a,n)}return e}function sh(e,t){return rh(e,t,{merger:ah})}function ah(e,t,n){if(!nh(e))return;const i=t[e],r=n[e];Yu(i)&&Yu(r)?sh(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=th(r))}const oh={"":e=>e,x:e=>e.x,y:e=>e.y};function lh(e,t){const n=oh[t]||(oh[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function ch(e){return e.charAt(0).toUpperCase()+e.slice(1)}const uh=e=>"undefined"!==typeof e,hh=e=>"function"===typeof e,dh=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const fh=Math.PI,ph=2*fh,gh=ph+fh,mh=Number.POSITIVE_INFINITY,yh=fh/180,bh=fh/2,vh=fh/4,xh=2*fh/3,wh=Math.log10,_h=Math.sign;function kh(e,t,n){return Math.abs(e-t)<n}function Sh(e){const t=Math.round(e);e=kh(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(wh(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Eh(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ch(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Th(e){return e*(fh/180)}function Nh(e){return e*(180/fh)}function Mh(e){if(!Qu(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Dh(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*fh&&(s+=ph),{angle:s,distance:r}}function Ph(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ih(e,t){return(e-t+gh)%ph-fh}function Ah(e){return(e%ph+ph)%ph}function Lh(e,t,n,i){const r=Ah(e),s=Ah(t),a=Ah(n),o=Ah(s-r),l=Ah(a-r),c=Ah(r-s),u=Ah(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function Oh(e,t,n){return Math.max(t,Math.min(n,e))}function Rh(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function jh(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Fh=(e,t,n,i)=>jh(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),Vh=(e,t,n)=>jh(e,n,(i=>e[i][t]>=n));const zh=["push","pop","shift","splice","unshift"];function Bh(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(zh.forEach((t=>{delete e[t]})),delete e._chartjs)}function Uh(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Hh="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Wh(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];n=s,i||(i=!0,Hh.call(window,(()=>{i=!1,e.apply(t,n)})))}}const qh=e=>"start"===e?"left":"end"===e?"right":"center",Kh=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Yh(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(r=Math.min(Fh(l,u,h).lo,n?i:Fh(t,u,a.getPixelForValue(h)).lo),c){const e=l.slice(0,r+1).reverse().findIndex((e=>!qu(e[o.axis])));r-=Math.max(0,e)}r=Oh(r,0,i-1)}if(p){let e=Math.max(Fh(l,a.axis,d,!0).hi+1,n?0:Fh(t,u,a.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!qu(e[o.axis])));e+=Math.max(0,t)}s=Oh(e,r,i)-r}else s=i-r}return{start:r,count:s}}function Qh(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Gh=e=>0===e||1===e,$h=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ph/n),Xh=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ph/n)+1,Jh={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*bh),easeOutSine:e=>Math.sin(e*bh),easeInOutSine:e=>-.5*(Math.cos(fh*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Gh(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Gh(e)?e:$h(e,.075,.3),easeOutElastic:e=>Gh(e)?e:Xh(e,.075,.3),easeInOutElastic(e){const t=.1125;return Gh(e)?e:e<.5?.5*$h(2*e,t,.45):.5+.5*Xh(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Jh.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Jh.easeInBounce(2*e):.5*Jh.easeOutBounce(2*e-1)+.5};function Zh(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function ed(e){return Zh(e)?e:new Uu(e)}function td(e){return Zh(e)?e:new Uu(e).saturate(.5).darken(.1).hexString()}const nd=["x","y","borderWidth","radius","tension"],id=["color","borderColor","backgroundColor"];const rd=new Map;function sd(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=rd.get(n);return i||(i=new Intl.NumberFormat(e,t),rd.set(n,i)),i}(t,n).format(e)}const ad={values:e=>Ku(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=wh(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),sd(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(wh(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?ad.numeric.call(this,e,t,n):""}};var od={formatters:ad};const ld=Object.create(null),cd=Object.create(null);function ud(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function hd(e,t,n){return"string"===typeof t?rh(ud(e,t),n):rh(ud(e,""),t)}class dd{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>td(t.backgroundColor),this.hoverBorderColor=(e,t)=>td(t.borderColor),this.hoverColor=(e,t)=>td(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return hd(this,e,t)}get(e){return ud(this,e)}describe(e,t){return hd(cd,e,t)}override(e,t){return hd(ld,e,t)}route(e,t,n,i){const r=ud(this,e),s=ud(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[i];return Yu(e)?Object.assign({},t,e):$u(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach((e=>e(this)))}}var fd=new dd({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:id},numbers:{type:"number",properties:nd}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:od.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function pd(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function gd(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||Ku(h)){if(Ku(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Ku(d)||(a=pd(e,r,s,a,d))}else a=pd(e,r,s,a,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return a}function md(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function yd(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function bd(e,t,n,i){vd(e,t,n,i,null)}function vd(e,t,n,i,r){let s,a,o,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*yh;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,g,0,0,ph):e.arc(n,i,g,0,ph),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=xh,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=xh,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+vh)*l,h=Math.cos(m+vh)*(r?r/2-c:l),o=Math.sin(m+vh)*l,d=Math.sin(m+vh)*(r?r/2-c:l),e.arc(n-h,i-o,c,m-fh,m-bh),e.arc(n+d,i-a,c,m-bh,m),e.arc(n+h,i+o,c,m,m+bh),e.arc(n-d,i+a,c,m+bh,m+fh),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=vh;case"rectRot":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+d,i-a),e.lineTo(n+h,i+o),e.lineTo(n-d,i+a),e.closePath();break;case"crossRot":m+=vh;case"cross":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"star":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a),m+=vh,h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function xd(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function wd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function _d(e){e.restore()}function kd(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Sd(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Ed(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Cd(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Td(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=Ku(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),qu(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&Cd(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),qu(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),Ed(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function Nd(e,t){const{x:n,y:i,w:r,h:s,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*fh,fh,!0),e.lineTo(n,i+s-a.bottomLeft),e.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,fh,bh,!0),e.lineTo(n+r-a.bottomRight,i+s),e.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,bh,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-bh,!0),e.lineTo(n+a.topLeft,i)}const Md=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Dd=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Pd(e,t){const n=(""+e).match(Md);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Id=e=>+e||0;function Ad(e,t){const n={},i=Yu(t),r=i?Object.keys(t):t,s=Yu(e)?i?n=>$u(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=Id(s(a));return n}function Ld(e){return Ad(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Od(e){return Ad(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Rd(e){const t=Ld(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function jd(e,t){e=e||{},t=t||fd.font;let n=$u(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=$u(e.style,t.style);i&&!(""+i).match(Dd)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:$u(e.family,t.family),lineHeight:Pd($u(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:$u(e.weight,t.weight),string:""};return r.string=function(e){return!e||qu(e.size)||qu(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Fd(e,t,n,i){let r,s,a,o=!0;for(r=0,s=e.length;r<s;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&Ku(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function Vd(e,t){return Object.assign(Object.create(e),t)}function zd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Xd("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>zd([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>qd(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=Xd(Hd(s,e),n),"undefined"!==typeof r)return Wd(e,r)?Gd(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Jd(e).includes(t),ownKeys:e=>Jd(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Bd(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Ud(e,i),setContext:t=>Bd(e,t,n,i),override:r=>Bd(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>qd(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=e;let o=i[t];hh(o)&&a.isScriptable(t)&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||i);o.delete(e),Wd(e,l)&&(l=Gd(r._scopes,r,e,l));return l}(t,o,e,n));Ku(o)&&o.length&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(Yu(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Gd(i,r,e,l);t.push(Bd(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));Wd(t,o)&&(o=Bd(o,r,s&&s[t],a));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function Ud(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:hh(n)?n:()=>n,isIndexable:hh(i)?i:()=>i}}const Hd=(e,t)=>e?e+ch(t):t,Wd=(e,t)=>Yu(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function qd(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function Kd(e,t,n){return hh(e)?e(t,n):e}const Yd=(e,t)=>!0===e?t:"string"===typeof e?lh(t,e):void 0;function Qd(e,t,n,i,r){for(const s of t){const t=Yd(n,s);if(t){e.add(t);const s=Kd(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Gd(e,t,n,i){const r=t._rootScopes,s=Kd(t._fallback,n,i),a=[...e,...r],o=new Set;o.add(i);let l=$d(o,a,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=$d(o,a,s,l,i),null!==l))&&zd(Array.from(o),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Ku(r)&&Yu(n))return n;return r||{}}(t,n,i))))}function $d(e,t,n,i,r){for(;n;)n=Qd(e,t,n,i,r);return n}function Xd(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Jd(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Zd(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={r:r.parse(lh(u,s),c)};return a}const ef=Number.EPSILON||1e-14,tf=(e,t)=>t<e.length&&!e[t].skip&&e[t],nf=e=>"x"===e?"y":"x";function rf(e,t,n,i){const r=e.skip?t:e,s=t,a=n.skip?t:n,o=Ph(s,r),l=Ph(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(a.x-r.x),y:s.y-h*(a.y-r.y)},next:{x:s.x+d*(a.x-r.x),y:s.y+d*(a.y-r.y)}}}function sf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=nf(t),i=e.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=tf(e,0);for(a=0;a<i;++a)if(o=l,l=c,c=tf(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?_h(r[a-1])!==_h(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const i=e.length;let r,s,a,o,l,c=tf(e,0);for(let u=0;u<i-1;++u)l=c,c=tf(e,u+1),l&&c&&(kh(t[u],0,ef)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*t[u],n[u+1]=s*a*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=nf(n),r=e.length;let s,a,o,l=tf(e,0);for(let c=0;c<r;++c){if(a=o,o=l,l=tf(e,c+1),!o)continue;const r=o[n],u=o[i];a&&(s=(r-a[n])/3,o["cp1".concat(n)]=r-s,o["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,o["cp2".concat(n)]=r+s,o["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function af(e,t,n){return Math.max(Math.min(e,n),t)}function of(e,t,n,i,r){let s,a,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)sf(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=rf(n,o,e[Math.min(s+1,a-(i?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,i,r,s,a,o=xd(e[0],t);for(n=0,i=e.length;n<i;++n)a=s,s=o,o=n<i-1&&xd(e[n+1],t),s&&(r=e[n],a&&(r.cp1x=af(r.cp1x,t.left,t.right),r.cp1y=af(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=af(r.cp2x,t.left,t.right),r.cp2y=af(r.cp2y,t.top,t.bottom)))}(e,n)}function lf(){return"undefined"!==typeof window&&"undefined"!==typeof document}function cf(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function uf(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const hf=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const df=["top","right","bottom","left"];function ff(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=df[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function pf(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=hf(n),s="border-box"===r.boxSizing,a=ff(r,"padding"),o=ff(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))a=r,o=s;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,o=i.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const gf=e=>Math.round(10*e)/10;function mf(e,t,n,i){const r=hf(e),s=ff(r,"margin"),a=uf(r.maxWidth,e,"clientWidth")||mh,o=uf(r.maxHeight,e,"clientHeight")||mh,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&cf(e);if(s){const e=s.getBoundingClientRect(),a=hf(s),o=ff(a,"border","width"),l=ff(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,i=uf(a.maxWidth,s,"clientWidth"),r=uf(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||mh,maxHeight:r||mh}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=ff(r,"border","width"),t=ff(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=gf(Math.min(c,a,l.maxWidth)),u=gf(Math.min(u,o,l.maxHeight)),c&&!u&&(u=gf(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=gf(Math.floor(u*i))),{width:c,height:u}}function yf(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(e.currentDevicePixelRatio=i,a.height=r,a.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const bf=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};lf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function vf(e,t){const n=function(e,t){return hf(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function xf(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function wf(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function _f(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=xf(e,r,n),o=xf(r,s,n),l=xf(s,t,n),c=xf(a,o,n),u=xf(o,l,n);return xf(c,u,n)}function kf(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Sf(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Ef(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Cf(e){return"angle"===e?{between:Lh,compare:Ih,normalize:Ah}:{between:Rh,compare:(e,t)=>e-t,normalize:e=>e}}function Tf(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function Nf(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=Cf(i),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:a,normalize:o}=Cf(i),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(t[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,b=!1,v=null;const x=()=>b||l(r,y,g)&&0!==o(r,y),w=()=>!b||0===o(s,g)||l(s,y,g);for(let _=u,k=u;_<=h;++_)m=t[_%a],m.skip||(g=c(m[i]),g!==y&&(b=l(g,r,s),null===v&&x()&&(v=0===o(g,r)?_:k),null!==v&&w()&&(p.push(Tf({start:v,end:_,loop:d,count:a,style:f})),v=null),k=_,y=g));return null!==v&&p.push(Tf({start:v,end:h,loop:d,count:a,style:f})),p}function Mf(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=Nf(i[r],e.points,t);s.length&&n.push(...s)}return n}function Df(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=Pf(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,i,r){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,h=t%l)}}for(const p of t){h=o?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=Pf(i.setContext(Vd(r,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),If(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,i):t}function Pf(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function If(e,t){if(!t)return!1;const n=[],i=function(e,t){return Zh(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Af(e,t,n){return e.options.clip?e[n]:t[n]}function Lf(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Af(n,t,"left"),right:Af(n,t,"right"),top:Af(i,t,"top"),bottom:Af(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class Of{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=Hh.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Rf=new Of;const jf="transparent",Ff={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=ed(e||jf),r=i.valid&&ed(t||jf);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Vf{constructor(e,t,n,i){const r=t[n];i=Fd([e.to,i,r,e.from]);const s=Fd([e.from,r,i]);this._active=!0,this._fn=e.fn||Ff[e.type||typeof s],this._easing=Jh[e.easing]||Jh.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Fd([e.to,t,i,e.from]),this._from=Fd([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=r:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class zf{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Yu(e))return;const t=Object.keys(fd.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!Yu(r))return;const s={};for(const e of t)s[e]=r[e];(Ku(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new Vf(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Rf.add(this._chart,n),!0):void 0}}function Bf(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function Uf(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Hf(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,i.all)continue;break}c=e.values[l],Qu(c)&&(s||0===t||_h(t)===_h(c))&&(t+=c)}return u||i.all?t:0}function Wf(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function qf(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function Kf(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function Yf(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,i),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=qf(r,u,n),d[o]=s,d._top=Kf(d,a,!0,i.type),d._bottom=Kf(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[o]=s}}function Qf(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function Gf(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const $f=e=>"reset"===e||"none"===e,Xf=(e,t)=>t?e:Object.assign({},e);class Jf{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Gf(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=$u(n.xAxisID,Qf(e,"x")),s=t.yAxisID=$u(n.yAxisID,Qf(e,"y")),a=t.rAxisID=$u(n.rAxisID,Qf(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,s,a),c=t.vAxisID=i(o,s,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Bh(this._data,this),e._stacked&&Gf(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Yu(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){Bh(n,this);const e=this._cachedMeta;Gf(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),zh.forEach((e=>{const t="_onData"+ch(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const a=n.apply(this,r);return i._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...r)})),a}})})))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=Wf(t.vScale,t),t.stack!==n.stack&&(i=!0,Gf(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(Yf(this,t._parsed),t._stacked=Wf(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,a=r.axis;let o,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Ku(i[e])?this.parseArrayData(n,i,e,t):Yu(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&Yf(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,a=r.axis,o=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[a]:c||r.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(lh(d,a),h),y:s.parse(lh(d,o),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return Hf({keys:Uf(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,s=Hf(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Uf(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const t=d[a.axis];return!Qu(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,o),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],Qu(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Yu(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}($u(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=Bf(e,n),r=Bf(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,o),c=a;c<a+o;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return Vd(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Vd(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,a=r[s],o=this.enableOptionSharing&&uh(n);if(a)return Xf(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(fd.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,t)),u);return f.$shared&&(f.$shared=o,r[s]=Object.freeze(Xf(f,o))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),a=r[s];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(s,this.getContext(e,n,t))}const l=new zf(i,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||$f(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){$f(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!$f(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(r),a=e;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&Gf(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Zf(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Uh(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let i,r,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(uh(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return o}function ep(e,t,n,i){return Ku(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function tp(e,t,n,i){const r=e.iScale,s=e.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=o||r.parse(a[c],c),l.push(ep(d,h,s,c));return l}function np(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function ip(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[rp(u,a,o,l)]=!0,r=c)),s[rp(r,a,o,l)]=!0,e.borderSkipped=s}function rp(e,t,n,i){var r,s,a;return i?(a=n,e=sp(e=(r=e)===(s=t)?a:r===a?s:r,n,t)):e=sp(e,t,n),e}function sp(e,t,n){return"start"===e?t:"end"===e?n:e}function ap(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}o(Jf,"defaults",{}),o(Jf,"datasetElementType",null),o(Jf,"dataElementType",null);class op extends Jf{parsePrimitiveData(e,t,n,i){return tp(e,t,n,i)}parseArrayData(e,t,n,i){return tp(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=t[h],f={},f[r.axis]=r.parse(lh(p,l),h),u.push(ep(lh(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,a=np(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=r||qu(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||np(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const m=g.options||e[d].options;ip(g,m,p,s),ap(g,m,c.ratio),this.updateElement(e[d],d,g,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),i=t&&t[e.vScale.axis];if(qu(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||Zf(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,a=r||0,o=this.getParsed(e),l=o._custom,c=np(l);let u,h,d=o[t.axis],f=0,p=n?this.applyStack(t,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&_h(d)!==_h(l.barEnd)&&(f=0),f+=d);const g=qu(r)||c?f:r;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?_h(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,a)*s,d===a&&(m-=h/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(o._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(a)){const e=_h(h)*t.getLineWidthForValue(a)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=$u(i.maxBarThickness,1/0);let a,o;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let a=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n):function(e,t,n,i){const r=n.barThickness;let s,a;return qu(r)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[e]-s/2}}(e,t,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=l.start+l.chunk*c+l.chunk/2,o=Math.min(s,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}o(op,"id","bar"),o(op,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(op,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class lp extends Jf{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=$u(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=$u(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,t.active?"active":i),r&&(d.options.radius=0)),this.updateElement(t,h,d,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=$u(n&&n._custom,r),i}}o(lp,"id","bubble"),o(lp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(lp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class cp extends Jf{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,a=e=>+n[e];if(Yu(n[e])){const{key:e="value"}=this._parsing;a=t=>+lh(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=a(r)}}_getRotation(){return Th(this.options.rotation-90)}_getCircumference(){return Th(this.options.circumference)}_getRotationExtents(){let e=ph,t=-ph;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let i=1,r=1,s=0,a=0;if(t<ph){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(e,t,i)=>Lh(e,o,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>Lh(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n),g=f(0,c,h),m=f(bh,u,d),y=p(fh,c,h),b=p(fh+bh,u,d);i=(g-y)/2,r=(m-b)/2,s=-(g+y)/2,a=-(m+b)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(d,h,o),y=(n.width-s)/f,b=(n.height-s)/p,v=Math.max(Math.min(y,b)/2,0),x=Xu(this.options.radius,v),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,i.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/ph)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+n;++g){const t=this._circumference(g,r),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=t,this.updateElement(n,g,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ph*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=sd(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,a,o;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,a=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max($u(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(cp,"id","doughnut"),o(cp,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(cp,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),o(cp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class up extends Jf{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=Yh(t,i,s);this._drawStart=a,this._drawCount=o,Qh(t)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,a,o,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=Eh(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,y=t+n,b=e.length;let v=t>0&&this.getParsed(t-1);for(let x=0;x<b;++x){const n=e[x],f=m?n:{};if(x<t||x>=y){f.skip=!0;continue}const b=this.getParsed(x),w=qu(b[d]),_=f[h]=s.getPixelForValue(b[h],x),k=f[d]=r||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,b,o):b[d],x);f.skip=isNaN(_)||isNaN(k)||w,f.stop=x>0&&Math.abs(b[h]-v[h])>g,p&&(f.parsed=b,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":i)),m||this.updateElement(n,x,f,i),v=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}o(up,"id","line"),o(up,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(up,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class hp extends Jf{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=sd(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return Zd.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*fh;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,i,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":i)};this.updateElement(t,h,m,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Th(this.resolveDataElementOptions(e,t).angle||n):0}}o(hp,"id","polarArea"),o(hp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(hp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class dp extends cp{}o(dp,"id","pie"),o(dp,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class fp extends Jf{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return Zd.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":i),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,i)}}}o(fp,"id","radar"),o(fp,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(fp,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class pp extends Jf{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=Yh(t,n,i);if(this._drawStart=r,this._drawCount=s,Qh(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=Eh(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let b=t>0&&this.getParsed(t-1);for(let v=t;v<t+n;++v){const t=e[v],n=this.getParsed(v),c=y?t:{},p=qu(n[f]),x=c[d]=s.getPixelForValue(n[d],v),w=c[f]=r||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],v);c.skip=isNaN(x)||isNaN(w)||p,c.stop=v>0&&Math.abs(n[d]-b[d])>m,g&&(c.parsed=n,c.raw=l.data[v]),h&&(c.options=u||this.resolveDataElementOptions(v,t.active?"active":i)),y||this.updateElement(t,v,c,i),b=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}o(pp,"id","scatter"),o(pp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(pp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function gp(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mp{static override(e){Object.assign(mp.prototype,e)}constructor(e){o(this,"options",void 0),this.options=e||{}}init(){}formats(){return gp()}parse(){return gp()}format(){return gp()}add(){return gp()}diff(){return gp()}startOf(){return gp()}endOf(){return gp()}}var yp=mp;function bp(e,t,n,i){const{controller:r,data:s,_sorted:a}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?Vh:Fh;if(!i){const i=a(s,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,s=n.slice(0,i.lo+1).reverse().findIndex((e=>!qu(e[t.axis])));i.lo-=Math.max(0,s);const a=n.slice(i.hi).findIndex((e=>!qu(e[t.axis])));i.hi+=Math.max(0,a)}return i}if(r._sharedOptions){const e=s[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=a(s,t,n-i),r=a(s,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function vp(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=bp(s[o],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function xp(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return vp(e,n,t,(function(n,a,o){(r||xd(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:a,index:o})}),!0),s}function wp(e,t,n,i,r,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return vp(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=o(t,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})})),a}function _p(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?wp(e,t,n,i,r,s):function(e,t,n,i){let r=[];return vp(e,n,t,(function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],i),{angle:l}=Dh(e,{x:t.x,y:t.y});Lh(l,a,o)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function kp(e,t,n,i,r){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return vp(e,n,t,((e,i,l)=>{e[a]&&e[a](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,r))})),i&&!o?[]:s}var Sp={evaluateInteractionItems:vp,modes:{index(e,t,n,i){const r=pf(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?xp(e,r,s,i,a):_p(e,r,s,!1,i,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,i){const r=pf(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?xp(e,r,s,i,a):_p(e,r,s,!1,i,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,i)=>xp(e,pf(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=pf(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return _p(e,r,s,n.intersect,i,a)},x:(e,t,n,i)=>kp(e,pf(t,e),"x",n.intersect,i),y:(e,t,n,i)=>kp(e,pf(t,e),"y",n.intersect,i)}};const Ep=["left","top","right","bottom"];function Cp(e,t){return e.filter((e=>e.pos===t))}function Tp(e,t){return e.filter((e=>-1===Ep.indexOf(e.pos)&&e.box.axis===t))}function Np(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Mp(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!Ep.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&t.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:a&&t.availableHeight)}return n}function Dp(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Pp(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Ip(e,t,n,i){const{pos:r,box:s}=n,a=e.maxPadding;if(!Yu(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&Pp(a,s.getPadding());const o=Math.max(0,t.outerWidth-Dp(a,e,"left","right")),l=Math.max(0,t.outerHeight-Dp(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Ap(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function Lp(e,t,n,i){const r=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,Ap(o.horizontal,t));const{same:a,other:h}=Ip(t,n,o,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(o)}return c&&Lp(r,t,n,i)||u}function Op(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Rp(e,t,n,i){const r=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=t.w*c,s=l.size||e.height;uh(l.start)&&(a=l.start),e.fullSize?Op(e,r.left,a,n.outerWidth-r.right-r.left,s):Op(e,t.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*c,a=l.size||e.width;uh(l.start)&&(s=l.start),e.fullSize?Op(e,s,r.top,a,n.outerHeight-r.bottom-r.top):Op(e,s,t.top+l.placed,a,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=a}var jp={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=Rd(e.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,i,r,s,a,o;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=Np(t.filter((e=>e.box.fullSize)),!0),i=Np(Cp(t,"left"),!0),r=Np(Cp(t,"right")),s=Np(Cp(t,"top"),!0),a=Np(Cp(t,"bottom")),o=Tp(t,"x"),l=Tp(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:Cp(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Zu(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},r);Pp(d,Rd(i));const f=Object.assign({maxPadding:d,w:s,h:a,x:r.left,y:r.top},r),p=Mp(l.concat(c),h);Lp(o.fullSize,f,h,p),Lp(l,f,h,p),Lp(c,f,h,p)&&Lp(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Rp(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Rp(o.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Zu(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Fp{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class Vp extends Fp{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const zp="$chartjs",Bp={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Up=e=>null===e||""===e;const Hp=!!bf&&{passive:!0};function Wp(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Hp)}function qp(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Kp(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||qp(n.addedNodes,i),t=t&&!qp(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Yp(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||qp(n.removedNodes,i),t=t&&!qp(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Qp=new Map;let Gp=0;function $p(){const e=window.devicePixelRatio;e!==Gp&&(Gp=e,Qp.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Xp(e,t,n){const i=e.canvas,r=i&&cf(i);if(!r)return;const s=Wh(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),a=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return a.observe(r),function(e,t){Qp.size||window.addEventListener("resize",$p),Qp.set(e,t)}(e,s),a}function Jp(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Qp.delete(e),Qp.size||window.removeEventListener("resize",$p)}(e)}function Zp(e,t,n){const i=e.canvas,r=Wh((t=>{null!==e.ctx&&n(function(e,t){const n=Bp[e.type]||e.type,{x:i,y:r}=pf(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,Hp)}(i,t,r),r}class eg extends Fp{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[zp]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Up(r)){const t=vf(e,"width");void 0!==t&&(e.width=t)}if(Up(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=vf(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[zp])return!1;const n=t[zp].initial;["height","width"].forEach((e=>{const i=n[e];qu(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[zp],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:Kp,detach:Yp,resize:Xp}[t]||Zp;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Jp,detach:Jp,resize:Jp}[t]||Wp)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return mf(e,t,n,i)}isAttached(e){const t=e&&cf(e);return!(!t||!t.isConnected)}}class tg{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Eh(this.x)&&Eh(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}function ng(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return function(e,t,n,i){let r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===a&&(t.push(e[r]),s++,a=n[s*i])}(t,c,s,a/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(a>0){let e,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(ig(t,c,u,qu(i)?0:o-i,o),e=0,n=a-1;e<n;e++)ig(t,c,u,s[e],s[e+1]);return ig(t,c,u,l,qu(i)?t.length:l+i),c}return ig(t,c,u),c}function ig(e,t,n,i,r){const s=$u(i,0),a=Math.min($u(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}o(tg,"defaults",{}),o(tg,"defaultRoutes",void 0);const rg=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,sg=(e,t)=>Math.min(t||e,e);function ag(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function og(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-o||c>a+o)))return c}function lg(e){return e.drawTicks?e.tickLength:0}function cg(e,t){if(!e.display)return 0;const n=jd(e.font,t),i=Rd(e.padding);return(Ku(e.text)?e.text.length:1)*n.lineHeight+i.height}function ug(e,t,n){let i=qh(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class hg extends tg{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Gu(e,Number.POSITIVE_INFINITY),t=Gu(t,Number.NEGATIVE_INFINITY),n=Gu(n,Number.POSITIVE_INFINITY),i=Gu(i,Number.NEGATIVE_INFINITY),{min:Gu(e,n),max:Gu(t,i),minDefined:Qu(e),maxDefined:Qu(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Gu(n,Gu(i,n)),max:Gu(i,Gu(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ju(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Xu(t,(r-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?ag(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=ng(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ju(this.options.afterUpdate,[this])}beforeSetDimensions(){Ju(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ju(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ju(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ju(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Ju(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Ju(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ju(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=sg(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,a,o,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Oh(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),a=this.maxHeight-lg(e.grid)-t.padding-cg(e.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=Nh(Math.min(Math.asin(Oh((c.highest.height+6)/s,-1,1)),Math.asin(Oh(a/o,-1,1))-Math.asin(Oh(h/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ju(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ju(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=cg(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=lg(r)+s):(e.height=this.maxHeight,e.width=lg(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=Th(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ju(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)qu(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=ag(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],a=[],o=Math.floor(t/sg(t,n));let l,c,u,h,d,f,p,g,m,y,b,v=0,x=0;for(l=0;l<t;l+=o){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,qu(h)||Ku(h)){if(Ku(h))for(c=0,u=h.length;c<u;++c)b=h[c],qu(b)||Ku(b)||(m=pd(i,p.data,p.gc,m,b),y+=g)}else m=pd(i,p.data,p.gc,m,h),y=g;s.push(m),a.push(y),v=Math.max(m,v),x=Math.max(y,x)}!function(e,t){Zu(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(r,t);const w=s.indexOf(v),_=a.indexOf(x),k=e=>({width:s[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Oh(this._alignToPixels?md(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Vd(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Vd(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Th(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:a}=i,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=lg(r),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return md(n,e,f)};let m,y,b,v,x,w,_,k,S,E,C,T;if("top"===s)m=g(this.bottom),w=this.bottom-u,k=m-p,E=g(e.top)+p,T=e.bottom;else if("bottom"===s)m=g(this.top),E=e.top,T=g(e.bottom)-p,w=m+p,k=this.top+u;else if("left"===s)m=g(this.right),x=this.right-u,_=m-p,S=g(e.left)+p,C=e.right;else if("right"===s)m=g(this.left),S=e.left,C=g(e.right)-p,x=m+p,_=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(Yu(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}E=e.top,T=e.bottom,w=m+p,k=w+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(Yu(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}x=m-p,_=x-u,S=e.left,C=e.right}const N=$u(i.ticks.maxTicksLimit,c),M=Math.max(1,Math.ceil(c/N));for(y=0;y<c;y+=M){const e=this.getContext(y),t=r.setContext(e),i=a.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;b=og(this,y,o),void 0!==b&&(v=md(n,b,s),l?x=_=S=C=v:w=k=E=T=v,h.push({tx1:x,ty1:w,tx2:_,ty2:k,x1:S,y1:E,x2:C,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,h=lg(n.grid),d=h+c,f=u?-c:d,p=-Th(this.labelRotation),g=[];let m,y,b,v,x,w,_,k,S,E,C,T,N="middle";if("top"===i)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,x=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,x=e.x}else if("x"===t){if("center"===i)w=(e.top+e.bottom)/2+d;else if(Yu(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)+d}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)x=(e.left+e.right)/2-d;else if(Yu(i)){const e=Object.keys(i)[0],t=i[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===o?N="top":"end"===o&&(N="bottom"));const M=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){b=a[m],v=b.label;const e=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,S=this._resolveTickFontOptions(m),E=S.lineHeight,C=Ku(v)?v.length:1;const t=C/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let h,d=_;if(s?(x=k,"inner"===_&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===i?"near"===l||0!==p?-C*E+E/2:"center"===l?-M.highest.height/2-t*E+E:-M.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?M.highest.height/2-t*E:M.highest.height-C*E,u&&(T*=-1),0===p||e.showLabelBackdrop||(x+=E/2*Math.sin(p))):(w=k,T=(1-C)*E/2),e.showLabelBackdrop){const t=Rd(e.backdropPadding),n=M.heights[m],i=M.widths[m];let r=T-t.top,s=0-t.left;switch(N){case"middle":r-=n/2;break;case"bottom":r-=n}switch(_){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:v,font:S,textOffset:T,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:N,translation:[x,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Th(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=md(e,this.left,s)-s/2,c=md(e,this.right,a)+a/2,u=h=o):(u=md(e,this.top,s)-s/2,h=md(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&wd(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;Td(t,r.label,0,r.textOffset,n,e)}n&&_d(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=jd(n.font),s=Rd(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||Yu(t)?(o+=s.bottom,Ku(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=a-r,m=o-s;if(e.isHorizontal()){if(d=Kh(i,s,o),Yu(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:rg(e,n,t);h=o-s}else{if(Yu(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:rg(e,n,t);f=Kh(i,a,r),p="left"===n?-bh:bh}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,t,a);Td(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:ug(a,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=$u(e.grid&&e.grid.z,-1),i=$u(e.border&&e.border.z,0);return this._isVisible()&&this.draw===hg.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return jd(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dg{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=rh(Object.create(null),[n?fd.get(n):{},fd.get(t),e.defaults]);fd.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");fd.route(s,r,l,o)}))}(t,e.defaultRoutes);e.descriptors&&fd.describe(t,e.descriptors)}(e,s,n),this.override&&fd.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in fd[i]&&(delete fd[i][n],this.override&&delete ld[n])}}class fg{constructor(){this.controllers=new dg(Jf,"datasets",!0),this.elements=new dg(tg,"elements"),this.plugins=new dg(Object,"plugins"),this.scales=new dg(hg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Zu(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=ch(e);Ju(n["before"+i],[],n),t[e](n),Ju(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var pg=new fg;class gg{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Ju(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){qu(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=$u(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(pg.plugins.items);for(let s=0;s<i.length;s++)n.push(pg.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const a=[],o=e.getContext();for(const l of r){const t=l.id,r=mg(n[t],i);null!==r&&a.push({plugin:l,options:yg(e.config,{plugin:l,local:s[t]},r,o)})}return a}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function mg(e,t){return t||!1!==e?!0===e?{}:e:null}function yg(e,t,n,i){let{plugin:r,local:s}=t;const a=e.pluginScopeKeys(r),o=e.getOptionScopes(n,a);return s&&r.defaults&&o.push(r.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bg(e,t){const n=fd.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function vg(e){if("x"===e||"y"===e||"r"===e)return e}function xg(e){if(vg(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&vg(e[0].toLowerCase());if(t)return t}var r;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function wg(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function _g(e,t){const n=ld[e.type]||{scales:{}},i=t.scales||{},r=bg(e.type,t),s=Object.create(null);return Object.keys(i).forEach((t=>{const a=i[t];if(!Yu(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=xg(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return wg(e,"x",n[0])||wg(e,"y",n[0])}return{}}(t,e),fd.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};s[t]=sh(Object.create(null),[{axis:o},a,c[o],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,a=n.indexAxis||bg(r,t),o=(ld[r]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),sh(s[r],[{axis:t},i[r],o[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];sh(t,[fd.scales[t.type],fd.scale])})),s}function kg(e){const t=e.options||(e.options={});t.plugins=$u(t.plugins,{}),t.scales=_g(e,t)}function Sg(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Eg=new Map,Cg=new Set;function Tg(e,t){let n=Eg.get(e);return n||(n=t(),Eg.set(e,n),Cg.add(n)),n}const Ng=(e,t,n)=>{const i=lh(t,n);void 0!==i&&e.add(i)};class Mg{constructor(e){this._config=function(e){return(e=e||{}).data=Sg(e.data),kg(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Sg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Tg(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return Tg("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return Tg("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return Tg("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>Ng(o,e,t)))),t.forEach((e=>Ng(o,i,e))),t.forEach((e=>Ng(o,ld[r]||{},e))),t.forEach((e=>Ng(o,fd,e))),t.forEach((e=>Ng(o,cd,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Cg.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,ld[t]||{},fd.datasets[t]||{},{type:t},fd,cd]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:a}=Dg(this._resolverCache,e,i);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=Ud(e);for(const r of t){const t=n(r),s=i(r),a=(s||t)&&e[r];if(t&&(hh(a)||Pg(a))||s&&Ku(a))return!0}return!1}(s,t)){r.$shared=!1;o=Bd(s,n=hh(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=Dg(this._resolverCache,e,n);return Yu(t)?Bd(r,t,void 0,i):r}}function Dg(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:zd(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const Pg=e=>Yu(e)&&Object.getOwnPropertyNames(e).some((t=>hh(e[t])));const Ig=["top","bottom","left","right","chartArea"];function Ag(e,t){return"top"===e||"bottom"===e||-1===Ig.indexOf(e)&&"x"===t}function Lg(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Og(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ju(n&&n.onComplete,[e],t)}function Rg(e){const t=e.chart,n=t.options.animation;Ju(n&&n.onProgress,[e],t)}function jg(e){return lf()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Fg={},Vg=e=>{const t=jg(e);return Object.values(Fg).filter((e=>e.canvas===t)).pop()};function zg(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}class Bg{static register(){pg.add(...arguments),Ug()}static unregister(){pg.remove(...arguments),Ug()}constructor(e,t){const n=this.config=new Mg(t),i=jg(e),r=Vg(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!lf()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Vp:eg}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=Wu(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gg,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],Fg[this.id]=this,a&&o?(Rf.listen(this,"complete",Og),Rf.listen(this,"progress",Rg),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return qu(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return pg}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return yd(this.canvas,this.ctx),this}stop(){return Rf.stop(this),this}resize(e,t){Rf.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,yf(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),Ju(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Zu(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=xg(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),Zu(r,(t=>{const r=t.options,s=r.id,a=xg(s,r),o=$u(r.type,t.dtype);void 0!==r.position&&Ag(r.position,a)===Ag(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(pg.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),Zu(i,((e,t)=>{e||delete n[t]})),Zu(n,(e=>{jp.configure(this,e,e.options),jp.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Lg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||bg(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=pg.getController(s),{datasetElementType:i,dataElementType:a}=fd.datasets[s];Object.assign(t,{dataElementType:pg.getElement(a),datasetElementType:i&&pg.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Zu(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Zu(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Lg("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Zu(this.scales,(e=>{jp.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);dh(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){zg(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!dh(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;jp.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Zu(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,hh(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Rf.has(this)?this.attached&&!Rf.running(this)&&Rf.start(this):(this.draw(),Og({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=Lf(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&wd(t,i),e.controller.draw(),i&&_d(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return xd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=Sp.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Vd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);uh(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Rf.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),yd(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Fg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Zu(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){Zu(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Zu(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,a,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!eh(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),a=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,a=this._getActiveElements(e,i,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Ju(r.onHover,[e,a,this],this),o&&Ju(r.onClick,[e,a,this],this));const c=!eh(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function Ug(){return Zu(Bg.instances,(e=>e._plugins.invalidate()))}function Hg(e,t,n,i){const r=Ad(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,i*t/2),o=e=>{const t=(n-Math.min(s,e))*i/2;return Oh(e,0,Math.min(s,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Oh(r.innerStart,0,a),innerEnd:Oh(r.innerEnd,0,a)}}function Wg(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function qg(e,t,n,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const g=(p-Math.max(.001,p*h-n/fh)/h)/2,m=l+g+f,y=r-g-f,{outerStart:b,outerEnd:v,innerStart:x,innerEnd:w}=Hg(t,d,h,y-m),_=h-b,k=h-v,S=m+b/_,E=y-v/k,C=d+x,T=d+w,N=m+x/C,M=y-w/T;if(e.beginPath(),s){const t=(S+E)/2;if(e.arc(a,o,h,S,t),e.arc(a,o,h,t,E),v>0){const t=Wg(k,E,a,o);e.arc(t.x,t.y,v,E,y+bh)}const n=Wg(T,y,a,o);if(e.lineTo(n.x,n.y),w>0){const t=Wg(T,M,a,o);e.arc(t.x,t.y,w,y+bh,M+Math.PI)}const i=(y-w/d+(m+x/d))/2;if(e.arc(a,o,d,y-w/d,i,!0),e.arc(a,o,d,i,m+x/d,!0),x>0){const t=Wg(C,N,a,o);e.arc(t.x,t.y,x,N+Math.PI,m-bh)}const r=Wg(_,m,a,o);if(e.lineTo(r.x,r.y),b>0){const t=Wg(_,S,a,o);e.arc(t.x,t.y,b,m-bh,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*h+a,n=Math.sin(S)*h+o;e.lineTo(t,n);const i=Math.cos(E)*h+a,r=Math.sin(E)*h+o;e.lineTo(i,r)}e.closePath()}function Kg(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){qg(e,t,n,i,p,r);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(p=a+(o%ph||ph))}f&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(s,a,o,i-c,n+c),l>r?(c=r/l,e.arc(s,a,l,n+c,i-c,!0)):e.arc(s,a,r,n+bh,i-bh),e.closePath(),e.clip()}(e,t,p),s||(qg(e,t,n,i,p,r),e.stroke())}o(Bg,"defaults",fd),o(Bg,"instances",Fg),o(Bg,"overrides",ld),o(Bg,"registry",pg),o(Bg,"version","4.4.9"),o(Bg,"getChart",Vg);class Yg extends tg{constructor(e){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=Dh(i,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=$u(u,o-a),f=Lh(r,a,o)&&a!==o,p=d>=ph||f,g=Rh(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ph?Math.floor(n/ph):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(fh,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){qg(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%ph||ph))}qg(e,t,n,i,l,r),e.fill()}(e,this,o,r,s),Kg(e,this,o,r,s),e.restore()}}function Qg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=$u(n.borderCapStyle,t.borderCapStyle),e.setLineDash($u(n.borderDash,t.borderDash)),e.lineDashOffset=$u(n.borderDashOffset,t.borderDashOffset),e.lineJoin=$u(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=$u(n.borderWidth,t.borderWidth),e.strokeStyle=$u(n.borderColor,t.borderColor)}function Gg(e,t,n){e.lineTo(n.x,n.y)}function $g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:a,end:o}=t,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function Xg(e,t,n,i){const{points:r,options:s}=t,{count:a,start:o,loop:l,ilen:c}=$g(r,n,i),u=function(e){return e.stepped?kd:e.tension||"monotone"===e.cubicInterpolationMode?Sd:Gg}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(o+(g?c-h:h))%a],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=r[(o+(g?c:0))%a],u(e,f,d,g,s.stepped)),!!l}function Jg(e,t,n,i){const r=t.points,{count:s,start:a,ilen:o}=$g(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,y=0;const b=e=>(a+(c?o-e:e))%s,v=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=r[b(0)],e.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=r[b(u)],h.skip)continue;const t=h.x,n=h.y,i=0|t;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(v(),e.lineTo(t,n),d=i,y=0,f=p=n),g=n}v()}function Zg(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Jg:Xg}o(Yg,"id","arc"),o(Yg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),o(Yg,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(Yg,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const em="function"===typeof Path2D;function tm(e,t,n,i){em&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),Qg(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,a=Zg(t);for(const o of r)Qg(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class nm extends tg{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;of(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return Df(e,!0===i?[{start:a,end:o,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(a-1)%r,loop:i}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(n,a,o<a?o+r:o,!!e._fullLoop&&0===a&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=Mf(this,{property:t,start:i,end:i});if(!s.length)return;const a=[],o=function(e){return e.stepped?wf:e.tension||"monotone"===e.cubicInterpolationMode?_f:xf}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((i-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Zg(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=Zg(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)s&=r(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),tm(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function im(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}o(nm,"id","line"),o(nm,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(nm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(nm,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class rm extends tg{constructor(e){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return im(this,e,"x",t)}inYRange(e,t){return im(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!xd(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,bd(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function sm(e,t){const{x:n,y:i,base:r,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,h;return e.horizontal?(h=a/2,o=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,o=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function am(e,t,n,i){return e?0:Oh(t,n,i)}function om(e){const t=sm(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=Ld(i);return{t:am(r.top,s.top,0,n),r:am(r.right,s.right,0,t),b:am(r.bottom,s.bottom,0,n),l:am(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=Od(r),a=Math.min(t,n),o=e.borderSkipped,l=i||Yu(r);return{topLeft:am(!l||o.top||o.left,s.topLeft,0,a),topRight:am(!l||o.top||o.right,s.topRight,0,a),bottomLeft:am(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:am(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function lm(e,t,n,i){const r=null===t,s=null===n,a=e&&!(r&&s)&&sm(e,i);return a&&(r||Rh(t,a.left,a.right))&&(s||Rh(n,a.top,a.bottom))}function cm(e,t){e.rect(t.x,t.y,t.w,t.h)}function um(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+a,radius:e.radius}}o(rm,"id","point"),o(rm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(rm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class hm extends tg{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=om(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?Nd:cm;var o;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),a(e,um(s,t,r)),e.clip(),a(e,um(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,um(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return lm(this,e,t,n)}inXRange(e,t){return lm(this,e,null,t)}inYRange(e,t){return lm(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}o(hm,"id","bar"),o(hm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(hm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const dm=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class fm extends tg{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ju(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=jd(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=dm(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,i,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+a})),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+i.measureText(r).width}(i,e,t,n),a=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=pm(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,r,e,i);s>0&&d+m+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+a})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=kf(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=Kh(n,this.left+i,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,a=Kh(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+e+i,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+i}else{let r=0,a=Kh(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,a=Kh(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+i,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;wd(e,this),this._draw(),_d(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,a=fd.color,o=kf(e.rtl,this.left,this.width),l=jd(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=dm(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:Kh(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Kh(r,this.top+y+c,this.bottom-t[0].height),line:0},Sf(this.ctx,e.textDirection);const b=g+c;this.legendItems.forEach(((v,x)=>{i.strokeStyle=v.fontColor,i.fillStyle=v.fontColor;const w=i.measureText(v.text).width,_=o.textAlign(v.textAlign||(v.textAlign=s.textAlign)),k=f+h+w;let S=d.x,E=d.y;o.setWidth(this.width),m?x>0&&S+k+c>this.right&&(E=d.y+=b,d.line++,S=d.x=Kh(r,this.left+c,this.right-n[d.line])):x>0&&E+b>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,E=d.y=Kh(r,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=$u(n.lineWidth,1);if(i.fillStyle=$u(n.fillStyle,a),i.lineCap=$u(n.lineCap,"butt"),i.lineDashOffset=$u(n.lineDashOffset,0),i.lineJoin=$u(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=$u(n.strokeStyle,a),i.setLineDash($u(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,f/2);vd(i,a,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=Od(n.borderRadius);i.beginPath(),Object.values(l).some((e=>0!==e))?Nd(i,{x:a,y:s,w:f,h:p,radius:l}):i.rect(a,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(S),E,v),S=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+f+h,m?S+k:this.right,e.rtl),function(e,t,n){Td(i,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),E,v),m)d.x+=k+c;else if("string"!==typeof v.text){const e=l.lineHeight;d.y+=pm(v,e)+c}else d.y+=b})),Ef(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=jd(t.font),i=Rd(t.padding);if(!t.display)return;const r=kf(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=i.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=Kh(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+Kh(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=Kh(a,u,u+h);s.textAlign=r.textAlign(qh(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Td(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=jd(e.font),n=Rd(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Rh(e,this.left,this.right)&&Rh(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Rh(e,i.left,i.left+i.width)&&Rh(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Ju(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Ju(t.onHover,[e,n,this],this)}else n&&Ju(t.onClick,[e,n,this],this)}}function pm(e,t){return t*(e.text?e.text.length:0)}var gm={id:"legend",_element:fm,start(e,t,n){const i=e.legend=new fm({ctx:e.ctx,options:n,chart:e});jp.configure(e,i,n),jp.addBox(e,i)},stop(e){jp.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;jp.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=Rd(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class mm extends tg{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=Ku(n.text)?n.text.length:1;this._padding=Rd(n.padding);const r=i*jd(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=Kh(a,n,r),c=t+e,o=r-n):("left"===s.position?(l=n+e,c=Kh(a,i,t),u=-.5*fh):(l=r-e,c=Kh(a,t,i),u=.5*fh),o=i-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=jd(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(i);Td(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:qh(t.align),textBaseline:"middle",translation:[r,s]})}}var ym={id:"title",_element:mm,start(e,t,n){!function(e,t){const n=new mm({ctx:e.ctx,options:t,chart:e});jp.configure(e,n,t),jp.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;jp.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;jp.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const bm={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;const a=[...i].reduce(((e,t)=>e+t))/i.size;return{x:a,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=Ph(t,i.getCenterPoint());e<o&&(o=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function vm(e,t){return t&&(Ku(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function xm(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function wm(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:e,label:a,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function _m(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=jd(t.bodyFont),c=jd(t.titleFont),u=jd(t.footerFont),h=s.length,d=r.length,f=i.length,p=Rd(t.padding);let g=p.height,m=0,y=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let b=0;const v=function(e){m=Math.max(m,n.measureText(e).width+b)};return n.save(),n.font=c.string,Zu(e.title,v),n.font=l.string,Zu(e.beforeBody.concat(e.afterBody),v),b=t.displayColors?a+2+t.boxPadding:0,Zu(i,(e=>{Zu(e.before,v),Zu(e.lines,v),Zu(e.after,v)})),b=0,n.font=u.string,Zu(e.footer,v),n.restore(),m+=p.width,{width:m,height:g}}function km(e,t,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===e&&r+s+a>t.width||"right"===e&&r-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function Sm(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||km(e,t,n,i),yAlign:i}}function Em(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Od(a);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o);const g=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+r:"right"===o&&(p+=Math.max(h,f)+r),{x:Oh(p,0,i.width-t.width),y:Oh(g,0,i.height-t.height)}}function Cm(e,t,n){const i=Rd(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function Tm(e){return vm([],xm(e))}function Nm(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Mm={beforeTitle:Hu,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Hu,beforeBody:Hu,beforeLabel:Hu,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return qu(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Hu,afterBody:Hu,beforeFooter:Hu,footer:Hu,afterFooter:Hu};function Dm(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?Mm[t].call(n,i):r}class Pm extends tg{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new zf(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Vd(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=Dm(n,"beforeTitle",this,e),r=Dm(n,"title",this,e),s=Dm(n,"afterTitle",this,e);let a=[];return a=vm(a,xm(i)),a=vm(a,xm(r)),a=vm(a,xm(s)),a}getBeforeBody(e,t){return Tm(Dm(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Zu(e,(e=>{const t={before:[],lines:[],after:[]},r=Nm(n,e);vm(t.before,xm(Dm(r,"beforeLabel",this,e))),vm(t.lines,Dm(r,"label",this,e)),vm(t.after,xm(Dm(r,"afterLabel",this,e))),i.push(t)})),i}getAfterBody(e,t){return Tm(Dm(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=Dm(n,"beforeFooter",this,e),r=Dm(n,"footer",this,e),s=Dm(n,"afterFooter",this,e);let a=[];return a=vm(a,xm(i)),a=vm(a,xm(r)),a=vm(a,xm(s)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(wm(this.chart,t[a]));return e.filter&&(l=l.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(l=l.sort(((t,i)=>e.itemSort(t,i,n)))),Zu(l,(t=>{const n=Nm(e.callbacks,t);i.push(Dm(n,"labelColor",this,t)),r.push(Dm(n,"labelPointStyle",this,t)),s.push(Dm(n,"labelTextColor",this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=bm[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=_m(this,n),a=Object.assign({},e,t),o=Sm(this.chart,n,a),l=Em(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Od(a),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,b,v,x;return"center"===r?(v=d+p/2,"left"===i?(g=h,m=g-s,b=v+s,x=v-s):(g=h+f,m=g+s,b=v-s,x=v+s),y=g):(m="left"===i?h+Math.max(o,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(b=d,v=b-s,g=m-s,y=m+s):(b=d+p,v=b+s,g=m+s,y=m-s),x=b),{x1:g,x2:m,x3:y,y1:b,y2:v,y3:x}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,a,o;if(r){const l=kf(n.rtl,this.x,this.width);for(e.x=Cm(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=jd(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=jd(r.bodyFont),u=Cm(this,"left",r),h=i.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,bd(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,bd(e,t,n,c)}else{e.lineWidth=Yu(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=Od(s.borderRadius);Object.values(a).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Nd(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Nd(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=jd(n.bodyFont);let h=u.lineHeight,d=0;const f=kf(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+r},g=f.textAlign(s);let m,y,b,v,x,w,_;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=Cm(this,g,n),t.fillStyle=n.bodyColor,Zu(this.beforeBody,p),d=a&&"right"!==g?"center"===s?l/2+c:l+2+c:0,v=0,w=i.length;v<w;++v){for(m=i[v],y=this.labelTextColors[v],t.fillStyle=y,Zu(m.before,p),b=m.lines,a&&b.length&&(this._drawColorBox(t,e,v,f,n),h=Math.max(u.lineHeight,o)),x=0,_=b.length;x<_;++x)p(b[x]),h=u.lineHeight;Zu(m.after,p)}d=0,h=u.lineHeight,Zu(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,a;if(r){const o=kf(n.rtl,this.x,this.width);for(e.x=Cm(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=jd(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Od(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l-h,o),t.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+d,o+c),t.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=bm[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=_m(this,e),a=Object.assign({},n,this._size),o=Sm(t,e,a),l=Em(e,a,o,t);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Rd(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),Sf(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Ef(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!eh(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),a=this._positionChanged(s,e),o=t||!eh(s,r)||a;return o&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=bm[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}o(Pm,"positioners",bm);var Im={id:"tooltip",_element:Pm,positioners:bm,afterInit(e,t,n){n&&(e.tooltip=new Pm({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mm},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Am(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function Lm(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Om extends hg{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(qu(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Oh(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Am(n,e,$u(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return Lm.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Rm(e,t){const n=[],{bounds:i,step:r,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,f=c-1,{min:p,max:g}=t,m=!qu(s),y=!qu(a),b=!qu(l),v=(g-p)/(u+1);let x,w,_,k,S=Sh((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=Sh(k*S/f/d)*d),qu(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===i?(w=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(w=p,_=g),m&&y&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/r,S/1e3)?(k=Math.round(Math.min((a-s)/S,c)),S=(a-s)/k,w=s,_=a):b?(w=m?s:w,_=y?a:_,k=l-1,S=(_-w)/k):(k=(_-w)/S,k=kh(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const E=Math.max(Mh(S),Mh(w));x=Math.pow(10,qu(o)?E:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let C=0;for(m&&(h&&w!==s?(n.push({value:s}),w<s&&C++,kh(Math.round((w+C*S)*x)/x,s,jm(s,v,e))&&C++):w<s&&C++);C<k;++C){const e=Math.round((w+C*S)*x)/x;if(y&&e>a)break;n.push({value:e})}return y&&h&&_!==a?n.length&&kh(n[n.length-1].value,a,jm(a,v,e))?n[n.length-1].value=a:n.push({value:a}):y&&_!==a||n.push({value:_}),n}function jm(e,t,n){let{horizontal:i,minRotation:r}=n;const s=Th(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}o(Om,"id","category"),o(Om,"defaults",{ticks:{callback:Lm}});class Fm extends hg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return qu(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,a=e=>r=n?r:e;if(e){const e=_h(i),t=_h(r);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);a(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=Rm({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Ch(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return sd(e,this.chart.options.locale,this.options.ticks.format)}}class Vm extends Fm{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Qu(e)?e:0,this.max=Qu(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Th(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}o(Vm,"id","linear"),o(Vm,"defaults",{ticks:{callback:od.formatters.numeric}});const zm=e=>Math.floor(wh(e)),Bm=(e,t)=>Math.pow(10,zm(e)+t);function Um(e){return 1===e/Math.pow(10,zm(e))}function Hm(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function Wm(e,t){let{min:n,max:i}=t;n=Gu(e.min,n);const r=[],s=zm(n);let a=function(e,t){let n=zm(t-e);for(;Hm(e,t,n)>10;)n++;for(;Hm(e,t,n)<10;)n--;return Math.min(n,zm(e))}(n,i),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=Gu(e.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<i;)r.push({value:f,major:Um(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=Gu(e.max,f);return r.push({value:p,major:Um(p),significand:d}),r}class qm extends hg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Fm.prototype.parse.apply(this,[e,t]);if(0!==n)return Qu(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Qu(e)?Math.max(0,e):null,this.max=Qu(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qu(this._userMin)&&(this.min=e===Bm(this.min,0)?Bm(this.min,-1):Bm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(Bm(n,-1)),s(Bm(i,1)))),n<=0&&r(Bm(i,-1)),i<=0&&s(Bm(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=Wm({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Ch(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":sd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=wh(e),this._valueRange=wh(this.max)-wh(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(wh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Km(e){const t=e.ticks;if(t.display&&e.display){const e=Rd(t.backdropPadding);return $u(t.font&&t.font.size,fd.font.size)+e.height}return 0}function Ym(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Qm(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?fh/s:0;for(let h=0;h<s;h++){const s=a.setContext(e.getPointLabelContext(h));r[h]=s.padding;const d=e.getPointPosition(h,e.drawingArea+r[h],o),f=jd(s.font),p=(l=e.ctx,c=f,u=Ku(u=e._pointLabels[h])?u:[u],{w:gd(l,c.string,u),h:u.length*c.lineHeight});i[h]=p;const g=Ah(e.getIndexAngle(h)+o),m=Math.round(Nh(g));Gm(n,t,g,Ym(m,d.x,p.w,0,180),Ym(m,d.y,p.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:Km(s)/2,additionalAngle:a?fh/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=$m(e,u,l);i.push(r),"auto"===o&&(r.visible=Xm(r,c),r.visible&&(c=r))}return i}(e,i,r)}function Gm(e,t,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<t.l?(o=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function $m(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,i+r+a,s),c=Math.round(Nh(Ah(l.angle+bh))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function Xm(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(xd({x:n,y:i},t)||xd({x:n,y:s},t)||xd({x:r,y:i},t)||xd({x:r,y:s},t))}function Jm(e,t,n){const{left:i,top:r,right:s,bottom:a}=n,{backdropColor:o}=t;if(!qu(o)){const n=Od(t.borderRadius),l=Rd(t.backdropPadding);e.fillStyle=o;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=a-r+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),Nd(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function Zm(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,ph);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}o(qm,"id","logarithmic"),o(qm,"defaults",{ticks:{callback:od.formatters.logarithmic,major:{enabled:!0}}});class ey extends Fm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Rd(Km(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Qu(e)&&!isNaN(e)?e:0,this.max=Qu(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Km(this.options))}generateTickLabels(e){Fm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Ju(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?Qm(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return Ah(e*(ph/(this._pointLabels.length||1))+Th(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(qu(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(qu(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Vd(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-bh+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Zm(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));Jm(n,s,t);const a=jd(s.font),{x:o,y:l,textAlign:c}=t;Td(n,e._pointLabels[r],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!i||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),Zm(e,n,a,i),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}})),n.display){for(e.save(),a=s-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=jd(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=o.backdropColor;const t=Rd(o.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}Td(e,i.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),e.restore()}drawTitle(){}}o(ey,"id","radialLinear"),o(ey,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:od.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),o(ey,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(ey,"descriptors",{angleLines:{_fallback:"grid"}});const ty={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ny=Object.keys(ty);function iy(e,t){return e-t}function ry(e,t){if(qu(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof i&&(a=i(a)),Qu(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!Eh(s)&&!0!==s?n.startOf(a,r):n.startOf(a,"isoWeek",s)),+a)}function sy(e,t,n,i){const r=ny.length;for(let s=ny.indexOf(e);s<r-1;++s){const e=ty[ny[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return ny[s]}return ny[r-1]}function ay(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=jh(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function oy(e,t,n){const i=[],r={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],r[o]=a,i.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=n[o],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class ly extends hg{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new yp(e.adapters.date);i.init(t),sh(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:ry(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),i=Qu(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Qu(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?sy(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=ny.length-1;s>=ny.indexOf(n);s--){const n=ny[s];if(ty[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return ny[n?ny.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=ny.indexOf(e)+1,n=ny.length;t<n;++t)if(ty[ny[t]].common)return ny[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),oy(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=Oh(i,0,s),r=Oh(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||sy(r.minUnit,t,n,this._getLabelCapacity(t)),a=$u(i.ticks.stepSize,1),o="week"===s&&r.isoWeekday,l=Eh(o)||!0===o,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",o)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,a,s),h++)ay(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||ay(c,u,f),Object.keys(c).sort(iy).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Ju(s,[e,t,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=Th(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,oy(this,[e],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(ry(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Uh(e.sort(iy))}}function cy(e,t,n){let i,r,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=Fh(e,"pos",t)),({pos:i,time:s}=e[o]),({pos:r,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=Fh(e,"time",t)),({time:i,pos:s}=e[o]),({time:r,pos:a}=e[l]));const c=r-i;return c?s+(a-s)*(t-i)/c:s}o(ly,"id","time"),o(ly,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class uy extends ly{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=cy(t,this.min),this._tableRange=cy(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],o=i[s-1],l=i[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(a-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(cy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return cy(this._table,n*this._tableRange+this._minPos,!0)}}o(uy,"id","timeseries"),o(uy,"defaults",ly.defaults);const hy=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],dy="label";function fy(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function py(e,t){e.labels=t}function gy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dy;const i=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):c({},t)}))}function my(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dy;const n={labels:[],datasets:[]};return py(n,e.labels),gy(n,e.datasets,t),n}function yy(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:u,plugins:h=[],fallbackContent:d,updateMode:f}=e,p=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,hy),g=(0,i.useRef)(null),m=(0,i.useRef)(null),y=()=>{g.current&&(m.current=new Bg(g.current,{type:o,data:my(l,a),options:u&&c({},u),plugins:h}),fy(t,m.current))},b=()=>{fy(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,i.useEffect)((()=>{!s&&m.current&&u&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,u)}),[s,u]),(0,i.useEffect)((()=>{!s&&m.current&&py(m.current.config.data,l.labels)}),[s,l.labels]),(0,i.useEffect)((()=>{!s&&m.current&&l.datasets&&gy(m.current.config.data,l.datasets,a)}),[s,l.datasets]),(0,i.useEffect)((()=>{m.current&&(s?(b(),setTimeout(y)):m.current.update(f))}),[s,u,l.labels,l.datasets,f]),(0,i.useEffect)((()=>{m.current&&(b(),setTimeout(y))}),[o]),(0,i.useEffect)((()=>(y(),()=>b())),[]),i.createElement("canvas",c({ref:g,role:"img",height:n,width:r},p),d)}const by=(0,i.forwardRef)(yy);function vy(e,t){return Bg.register(t),(0,i.forwardRef)(((t,n)=>i.createElement(by,c(c({},t),{},{ref:n,type:e}))))}const xy=vy("bar",op);Bg.register(Om,Vm,hm,ym,Im,gm);const wy=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)([]);(0,i.useEffect)((()=>{const e=_c(Ml(Ec,"sales"),(e=>{t(e.docs.map((e=>c({id:e.id},e.data()))))})),n=_c(Ml(Ec,"purchases"),(e=>{r(e.docs.map((e=>c({id:e.id},e.data()))))})),i=_c(Ml(Ec,"plants"),(e=>{a(e.docs.map((e=>c({id:e.id},e.data()))))}));return()=>{e(),n(),i()}}),[]);const o=Array(12).fill(0),l=Array(12).fill(0);e.forEach((e=>{if(!e.date)return;const t=new Date(e.date);o[t.getMonth()]+=e.total||0})),n.forEach((e=>{if(!e.date)return;const t=new Date(e.date);l[t.getMonth()]+=e.total||0}));const u={labels:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],datasets:[{label:"Ventas",data:o,backgroundColor:"rgba(34,197,94,0.7)"},{label:"Compras",data:l,backgroundColor:"rgba(239,68,68,0.7)"}]};return(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Reportes y Estad\xedsticas"}),(0,Cc.jsx)("div",{className:"mb-8",children:(0,Cc.jsx)(xy,{data:u,options:{responsive:!0,plugins:{legend:{position:"top"}}}})}),(0,Cc.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Cc.jsxs)("div",{className:"bg-green-100 rounded p-4",children:[(0,Cc.jsx)("div",{className:"font-bold",children:"Total Ventas"}),(0,Cc.jsxs)("div",{className:"text-2xl text-green-700",children:["$",e.reduce(((e,t)=>e+(t.total||0)),0).toFixed(2)]})]}),(0,Cc.jsxs)("div",{className:"bg-red-100 rounded p-4",children:[(0,Cc.jsx)("div",{className:"font-bold",children:"Total Compras"}),(0,Cc.jsxs)("div",{className:"text-2xl text-red-700",children:["$",n.reduce(((e,t)=>e+(t.total||0)),0).toFixed(2)]})]}),(0,Cc.jsxs)("div",{className:"bg-blue-100 rounded p-4",children:[(0,Cc.jsx)("div",{className:"font-bold",children:"Stock Total"}),(0,Cc.jsx)("div",{className:"text-2xl text-blue-700",children:s.reduce(((e,t)=>e+(t.stock||0)),0)})]})]})]})},_y=JSON.parse('[{"id":1,"name":"Lengua de suegra Grande","basePrice":1500,"purchasePrice":7500,"stock":5,"type":"interior","image":""},{"id":2,"name":"Florales","basePrice":600,"purchasePrice":1500,"stock":5,"type":"interior","image":""},{"id":3,"name":"Croton","basePrice":9000,"purchasePrice":31000,"stock":5,"type":"interior","image":""},{"id":4,"name":"Croton Mediano","basePrice":7000,"purchasePrice":15000,"stock":5,"type":"interior","image":""},{"id":5,"name":"Croton Mini","basePrice":2833.33,"purchasePrice":7000,"stock":5,"type":"interior","image":""},{"id":6,"name":"Jazmin del Cabo","basePrice":3700,"purchasePrice":10000,"stock":5,"type":"interior","image":""},{"id":7,"name":"Ala de Angel","basePrice":600,"purchasePrice":400,"stock":5,"type":"interior","image":""},{"id":8,"name":"Ala de Angel Grande","basePrice":4000,"purchasePrice":15000,"stock":5,"type":"interior","image":""},{"id":9,"name":"Palo de Agua","basePrice":3000,"purchasePrice":7000,"stock":5,"type":"interior","image":""},{"id":10,"name":"Palo de Agua Grande","basePrice":5500,"purchasePrice":14500,"stock":5,"type":"interior","image":""},{"id":11,"name":"Helecho","basePrice":4800,"purchasePrice":10000,"stock":5,"type":"interior","image":""},{"id":12,"name":"Potus","basePrice":4300,"purchasePrice":9000,"stock":5,"type":"interior","image":""},{"id":13,"name":"Potus Variegado","basePrice":6500,"purchasePrice":11000,"stock":5,"type":"interior","image":""},{"id":14,"name":"Potus Limon","basePrice":5500,"purchasePrice":11000,"stock":5,"type":"interior","image":""},{"id":15,"name":"Filodendro Peruviano","basePrice":4500,"purchasePrice":9000,"stock":5,"type":"interior","image":""},{"id":16,"name":"Oreja de Elefante","basePrice":4500,"purchasePrice":13000,"stock":5,"type":"interior","image":""},{"id":17,"name":"Calathea Makoyana","basePrice":10000,"purchasePrice":23000,"stock":5,"type":"interior","image":""},{"id":18,"name":"Asplenium","basePrice":4600,"purchasePrice":13500,"stock":5,"type":"interior","image":""},{"id":19,"name":"Tripode Mini","basePrice":2300,"purchasePrice":6000,"stock":5,"type":"interior","image":""},{"id":20,"name":"Tripode Mediano","basePrice":2300,"purchasePrice":6500,"stock":5,"type":"interior","image":""},{"id":21,"name":"Tripode Grande","basePrice":2300,"purchasePrice":7000,"stock":5,"type":"interior","image":""},{"id":22,"name":"Mariana","basePrice":5000,"purchasePrice":20000,"stock":5,"type":"interior","image":""},{"id":23,"name":"Mariana Mini","basePrice":2000,"purchasePrice":7000,"stock":5,"type":"interior","image":""},{"id":24,"name":"Calathea Mil Rayas","basePrice":6500,"purchasePrice":15000,"stock":5,"type":"interior","image":""},{"id":25,"name":"Gomero Rosado","basePrice":18000,"purchasePrice":36000,"stock":5,"type":"interior","image":""},{"id":26,"name":"Gomero Variegado","basePrice":18000,"purchasePrice":36000,"stock":5,"type":"interior","image":""},{"id":27,"name":"Gomero Negro","basePrice":8000,"purchasePrice":36000,"stock":5,"type":"interior","image":""},{"id":28,"name":"Filodendro imperial","basePrice":7333.33,"purchasePrice":23000,"stock":5,"type":"interior","image":""},{"id":29,"name":"Filodendro imperial Elegant","basePrice":9166.67,"purchasePrice":7000,"stock":5,"type":"interior","image":""},{"id":30,"name":"Filodendro imperial Mini","basePrice":5250.01,"purchasePrice":17000,"stock":5,"type":"interior","image":""},{"id":31,"name":"Calathea Zebrina Mediana","basePrice":1,"purchasePrice":1,"stock":5,"type":"interior","image":""},{"id":32,"name":"Calathea Zebrina Mini","basePrice":1,"purchasePrice":1,"stock":5,"type":"interior","image":""},{"id":33,"name":"Alocasia Amasonica","basePrice":7000,"purchasePrice":25000,"stock":5,"type":"interior","image":""},{"id":34,"name":"Calathea Tricolor","basePrice":5750,"purchasePrice":20000,"stock":5,"type":"interior","image":""},{"id":35,"name":"Calathea Tricolor Mini","basePrice":4025,"purchasePrice":12000,"stock":5,"type":"interior","image":""},{"id":36,"name":"Filodendro Cordatum","basePrice":4000,"purchasePrice":9000,"stock":5,"type":"interior","image":""},{"id":37,"name":"Costilla de Adan","basePrice":7500,"purchasePrice":19000,"stock":5,"type":"interior","image":""},{"id":38,"name":"Rubra","basePrice":3900,"purchasePrice":15000,"stock":5,"type":"interior","image":""},{"id":39,"name":"Palmito","basePrice":1,"purchasePrice":1,"stock":5,"type":"interior","image":""},{"id":40,"name":"Filodendro Sanguineo","basePrice":4200,"purchasePrice":9000,"stock":5,"type":"interior","image":""},{"id":41,"name":"Filodendro Sanguineo Lemon","basePrice":4500,"purchasePrice":11000,"stock":5,"type":"interior","image":""},{"id":42,"name":"Tropic","basePrice":6750,"purchasePrice":25000,"stock":5,"type":"interior","image":""},{"id":43,"name":"Afelandra","basePrice":6800,"purchasePrice":18000,"stock":5,"type":"interior","image":""},{"id":44,"name":"Ficus Trenzado","basePrice":10000,"purchasePrice":24000,"stock":5,"type":"interior","image":""},{"id":45,"name":"Spatifilium","basePrice":5400,"purchasePrice":15000,"stock":5,"type":"interior","image":""},{"id":46,"name":"Aglonema","basePrice":5000,"purchasePrice":13000,"stock":5,"type":"interior","image":""},{"id":47,"name":"Aglonema Grande","basePrice":8500,"purchasePrice":23000,"stock":5,"type":"interior","image":""},{"id":48,"name":"Fitonia","basePrice":4200,"purchasePrice":9000,"stock":5,"type":"interior","image":""},{"id":49,"name":"Mariana Mini","basePrice":2266.67,"purchasePrice":7000,"stock":5,"type":"interior","image":""},{"id":50,"name":"Calathea Makoyana Mini","basePrice":2833.33,"purchasePrice":7000,"stock":5,"type":"interior","image":""},{"id":51,"name":"Tierra 25 dm3","basePrice":1800,"purchasePrice":4000,"stock":5,"type":"insumo","image":""},{"id":52,"name":"Potus Variegado Mini","basePrice":2800,"purchasePrice":5500,"stock":5,"type":"interior","image":""},{"id":53,"name":"Calathea Mil Rayas Mini","basePrice":4500,"purchasePrice":12000,"stock":5,"type":"interior","image":""},{"id":54,"name":"Rubra Mini","basePrice":3000,"purchasePrice":9000,"stock":5,"type":"interior","image":""},{"id":55,"name":"Calathea Zappu","basePrice":3000,"purchasePrice":9000,"stock":5,"type":"interior","image":""},{"id":56,"name":"Potus Mini","basePrice":2750,"purchasePrice":9000,"stock":5,"type":"interior","image":""}]'),ky=()=>{const[e,t]=(0,i.useState)(!1);return(0,Cc.jsx)("div",{className:"p-4",children:(0,Cc.jsx)("button",{onClick:async()=>{t(!0);try{const e=(await function(e){e=_l(e,Cl);const t=_l(e.firestore,Al),n=Ll(t),i=new bc(t);return uc(e._query),gl(n,e._query).then((n=>new mc(t,i,e,n)))}(Ml(Ec,"plants"))).docs.map((e=>xc(Dl(Ec,"plants",e.id))));await Promise.all(e);for(const t of _y){const e=c(c({},t),{},{id:t.id.toString()});await vc(Dl(Ml(Ec,"plants"),e.id),e)}alert("\xa1Plantas actualizadas en Firestore! Si no ves los cambios, recarga la p\xe1gina.")}catch(e){alert("Error al actualizar plantas en Firestore: "+e.message),console.error(e)}t(!1)},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",disabled:e,children:e?"Actualizando...":"Actualizar plantas en Firestore"})})},Sy=e=>(0,Cc.jsx)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:(0,Cc.jsx)("div",{className:"bg-white rounded-lg shadow p-3",children:(0,Cc.jsx)(ou,c(c({},e),{},{showOnlySalesOfDay:!0}))})});Bg.register(Om,Vm,hm,ym,Im,gm);const Ey=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]);(0,i.useEffect)((()=>{const e=_c(Ml(Ec,"movements"),(e=>{t(e.docs.map((e=>c({id:e.id},e.data()))))})),n=_c(Ml(Ec,"plants"),(e=>{r(e.docs.map((e=>c({id:e.id},e.data()))))}));return()=>{e(),n()}}),[]);const s=new Date,a=e.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()})),o=a.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),l=a.filter((e=>"compra"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),u=a.filter((e=>"egreso"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),h=a.filter((e=>"ingreso"===e.type)).reduce(((e,t)=>e+(Number(t.total)||0)),0),d=a.filter((e=>"efectivo"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),f=a.filter((e=>"mercadoPago"===e.paymentMethod)).reduce(((e,t)=>"venta"===t.type||"ingreso"===t.type?e+(Number(t.total)||0):"compra"===t.type||"egreso"===t.type?e-(Number(t.total)||0):e),0),p=a.filter((e=>"venta"===e.type)).reduce(((e,t)=>e+(Number(t.quantity)||0)),0),g={};a.filter((e=>"venta"===e.type)).forEach((e=>{e.plantId&&(g[e.plantId]=(g[e.plantId]||0)+(Number(e.quantity)||0))}));const m=Object.entries(g).map((e=>{var t;let[i,r]=e;return{name:(null===(t=n.find((e=>String(e.id)===String(i))))||void 0===t?void 0:t.name)||"Producto eliminado",qty:r}})).sort(((e,t)=>t.qty-e.qty)).slice(0,10),y=n.filter((e=>Number(e.stock)<=5)).sort(((e,t)=>e.stock-t.stock)).slice(0,10),b={labels:m.map((e=>e.name)),datasets:[{label:"Cantidad vendida",data:m.map((e=>e.qty)),backgroundColor:"rgba(34,197,94,0.7)",borderColor:"rgba(34,197,94,1)",borderWidth:1}]},v=s.getMonth(),x=s.getFullYear(),w=e.filter((e=>{if(!e.date)return!1;const t=new Date(e.date);return t.getMonth()===v&&t.getFullYear()===x})),_={};w.filter((e=>"venta"===e.type)).forEach((e=>{e.plantId&&(_[e.plantId]=(_[e.plantId]||0)+(Number(e.quantity)||0))}));const k=Object.entries(_).map((e=>{var t;let[i,r]=e;return{name:(null===(t=n.find((e=>String(e.id)===String(i))))||void 0===t?void 0:t.name)||"Producto eliminado",qty:r}})).sort(((e,t)=>t.qty-e.qty)).slice(0,10),S={labels:k.map((e=>e.name)),datasets:[{label:"Cantidad vendida",data:k.map((e=>e.qty)),backgroundColor:"rgba(59,130,246,0.7)",borderColor:"rgba(59,130,246,1)",borderWidth:1}]};return(0,Cc.jsxs)("div",{className:"relative min-h-screen bg-gray-50 pb-24",children:[(0,Cc.jsxs)("div",{className:"rounded-lg shadow bg-white p-3",children:[(0,Cc.jsx)("div",{className:"font-semibold text-green-700 mb-2",children:"Totales del d\xeda"}),(0,Cc.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center text-sm",children:[(0,Cc.jsxs)("div",{className:"bg-green-100 rounded px-3 py-1",children:["Ventas: ",(0,Cc.jsx)("b",{children:o.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Cc.jsxs)("div",{className:"bg-red-100 rounded px-3 py-1",children:["Compras: ",(0,Cc.jsx)("b",{children:l.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Cc.jsxs)("div",{className:"bg-orange-100 rounded px-3 py-1",children:["Egresos: ",(0,Cc.jsx)("b",{children:u.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Cc.jsxs)("div",{className:"bg-lime-100 rounded px-3 py-1",children:["Ingresos: ",(0,Cc.jsx)("b",{children:h.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Cc.jsxs)("div",{className:"bg-blue-100 rounded px-3 py-1",children:["Caja Efectivo: ",(0,Cc.jsx)("b",{children:d.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Cc.jsxs)("div",{className:"bg-purple-100 rounded px-3 py-1",children:["Caja MP: ",(0,Cc.jsx)("b",{children:f.toLocaleString("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2,maximumFractionDigits:2})})]}),(0,Cc.jsxs)("div",{className:"bg-gray-100 rounded px-3 py-1",children:["Productos vendidos: ",(0,Cc.jsx)("b",{children:p})]})]})]}),(0,Cc.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Cc.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Productos m\xe1s vendidos hoy"}),0===m.length?(0,Cc.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay ventas registradas hoy."}):(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsx)(xy,{data:b,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Productos vendidos hoy"}},scales:{x:{title:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Cantidad"}}}},height:220}),(0,Cc.jsx)("ul",{className:"text-sm mt-2",children:m.map(((e,t)=>(0,Cc.jsxs)("li",{className:0===t?"font-bold text-green-700":"",children:[e.name,": ",e.qty]},e.name)))})]})]}),(0,Cc.jsxs)("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[(0,Cc.jsx)("div",{className:"font-semibold text-blue-700 mb-2",children:"Productos m\xe1s vendidos del mes"}),0===k.length?(0,Cc.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay ventas registradas este mes."}):(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsx)(xy,{data:S,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Productos vendidos este mes"}},scales:{x:{title:{display:!1}},y:{beginAtZero:!0,title:{display:!0,text:"Cantidad"}}}},height:220}),(0,Cc.jsx)("ul",{className:"text-sm mt-2",children:k.map(((e,t)=>(0,Cc.jsxs)("li",{className:0===t?"font-bold text-blue-700":"",children:[e.name,": ",e.qty]},e.name)))})]})]}),(0,Cc.jsxs)("div",{className:"bg-white rounded-lg shadow p-3",children:[(0,Cc.jsx)("div",{className:"font-semibold text-orange-700 mb-2",children:"Productos a reponer (bajo stock)"}),0===y.length?(0,Cc.jsx)("div",{className:"text-gray-400 text-sm",children:"No hay productos con bajo stock."}):(0,Cc.jsx)("ul",{className:"text-sm",children:y.map((e=>(0,Cc.jsxs)("li",{children:[e.name," ",(0,Cc.jsxs)("span",{className:"text-gray-500",children:["(",e.stock," en stock)"]})]},e.id)))})]})]})},Cy=n.p+"static/media/logo.002f0bc12656d05ad8e3.png",Ty=Cy,Ny=[{key:"inventory",label:"Inventario",icon:"\ud83d\udce6",color:"bg-green-100",onClick:null},{key:"cash",label:"Caja Diaria",icon:"\ud83d\udcb0",color:"bg-yellow-100",onClick:null},{key:"sales",label:"Ventas",icon:"\ud83d\uded2",color:"bg-blue-100",onClick:null},{key:"reports",label:"Reportes",icon:"\ud83d\udcca",color:"bg-purple-100",onClick:null}],My=e=>{let{onModuleClick:t,businessName:n="Mundo Floral",logoUrl:i=Ty,modulesConfig:r}=e;const s=r||Ny;return(0,Cc.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white pb-24",children:[(0,Cc.jsxs)("header",{className:"sticky top-0 z-20 bg-gradient-to-b from-green-50 to-white/95 backdrop-blur px-4 py-1.5 shadow-md flex items-center justify-between rounded-xl mx-2 mt-2",children:[(0,Cc.jsxs)("div",{className:"flex items-center",children:[(0,Cc.jsx)("div",{className:"bg-white p-1 rounded-full border border-green-100",children:(0,Cc.jsx)("img",{src:i,alt:"Logo",className:"h-9 w-9 object-contain"})}),(0,Cc.jsx)("span",{className:"text-lg font-bold text-green-700 tracking-tight ml-2",children:n})]}),(0,Cc.jsx)("p",{className:"text-sm text-gray-600 bg-white/80 px-3 py-0.5 rounded-full border border-green-50",children:"Sistema de Gesti\xf3n"})]}),(0,Cc.jsx)("div",{className:"h-3"}),(0,Cc.jsx)("div",{className:"grid grid-cols-2 gap-4 px-4 mt-2",children:s.map((e=>(0,Cc.jsxs)("button",{className:"flex flex-col items-center justify-center rounded-xl shadow-md border border-gray-100 p-5 ".concat(e.color," hover:scale-102 transition-transform active:scale-98"),onClick:()=>t&&t(e.key),children:[(0,Cc.jsx)("span",{className:"text-3xl mb-2",children:e.icon}),(0,Cc.jsx)("span",{className:"text-base font-medium text-gray-700",children:e.label})]},e.key)))}),(0,Cc.jsxs)("footer",{className:"fixed bottom-0 left-0 right-0 mx-2 mb-1 text-center text-xs text-gray-400 py-2 bg-white/80 backdrop-blur border-t border-gray-100 rounded-t-xl shadow-md",children:["\xa9 ",(new Date).getFullYear()," ",n]})]})},Dy=()=>{const[e,t]=(0,i.useState)("home"),n=e=>e?(0,Cc.jsxs)("div",{className:"sticky top-0 z-20 bg-white/90 backdrop-blur py-1.5 px-3 shadow-md flex justify-between items-center rounded-xl mx-2 mt-2 mb-3 border border-gray-100",children:[(0,Cc.jsx)("button",{className:"text-sm font-medium text-green-700 flex items-center bg-green-50 px-2 py-1 rounded-full border border-green-100",onClick:()=>t("home"),children:"\u2190 Inicio"}),(0,Cc.jsx)("h1",{className:"text-base font-bold text-gray-700",children:e}),(0,Cc.jsx)("div",{className:"w-16"})," "]}):null,r=(e,t)=>({active:"flex-1 flex flex-col items-center py-2 text-base font-semibold ".concat(t," text-white rounded-t-lg transition-all duration-200"),inactive:"flex-1 flex flex-col items-center py-2 text-base font-semibold bg-gray-50 text-gray-700 hover:bg-gray-100 rounded-t-lg transition-all duration-200"});return(0,Cc.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,Cc.jsxs)("div",{className:"max-w-2xl mx-auto pt-2 pb-28 px-2",children:["home"===e&&(0,Cc.jsx)(My,{onModuleClick:e=>{switch(e){case"inventory":t("inventario");break;case"cash":t("caja");break;case"sales":t("ventas");break;case"reports":t("reportes");break;default:t("home")}},businessName:"Mundo Floral",logoUrl:Cy}),"ventas"===e&&(0,Cc.jsxs)(Cc.Fragment,{children:[n("Movimientos de Caja"),(0,Cc.jsx)(Sy,{})]}),"caja"===e&&(0,Cc.jsxs)(Cc.Fragment,{children:[n("Caja Diaria"),(0,Cc.jsx)(lu,{hideTitleInView:!0})]}),"inventario"===e&&(0,Cc.jsxs)(Cc.Fragment,{children:[n("Inventario"),(0,Cc.jsx)(Nc,{})]}),"reportes"===e&&(0,Cc.jsxs)(Cc.Fragment,{children:[n("Reportes"),(0,Cc.jsx)(Ey,{})]})]}),"home"!==e&&(0,Cc.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white flex z-50 shadow-md border-t border-gray-100",children:[(0,Cc.jsxs)("button",{className:"ventas"===e?r(0,"bg-blue-600").active:r().inactive,onClick:()=>t("ventas"),children:[(0,Cc.jsx)("span",{className:"text-xl",children:"\ud83d\uded2"}),(0,Cc.jsx)("span",{className:"text-xs mt-0.5",children:"Ventas"})]}),(0,Cc.jsxs)("button",{className:"caja"===e?r(0,"bg-green-600").active:r().inactive,onClick:()=>t("caja"),children:[(0,Cc.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"}),(0,Cc.jsx)("span",{className:"text-xs mt-0.5",children:"Caja"})]}),(0,Cc.jsxs)("button",{className:"inventario"===e?r(0,"bg-yellow-600").active:r().inactive,onClick:()=>t("inventario"),children:[(0,Cc.jsx)("span",{className:"text-xl",children:"\ud83d\udce6"}),(0,Cc.jsx)("span",{className:"text-xs mt-0.5",children:"Inventario"})]}),(0,Cc.jsxs)("button",{className:"reportes"===e?r(0,"bg-gray-800").active:r().inactive,onClick:()=>t("reportes"),children:[(0,Cc.jsx)("span",{className:"text-xl",children:"\ud83d\udcca"}),(0,Cc.jsx)("span",{className:"text-xs mt-0.5",children:"Reportes"})]}),(0,Cc.jsxs)("button",{className:r(0,"").inactive+" bg-gray-200 hover:bg-gray-300",onClick:()=>t("home"),children:[(0,Cc.jsx)("span",{className:"text-xl",children:"\ud83c\udfe0"}),(0,Cc.jsx)("span",{className:"text-xs mt-0.5",children:"Inicio"})]})]})]})},Py=()=>{const[e,t]=i.useState(window.innerWidth<768),[n,r]=i.useState("inventory");if(i.useEffect((()=>{const e=()=>t(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e)return(0,Cc.jsx)(Dy,{});return(0,Cc.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:(0,Cc.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,Cc.jsxs)("header",{className:"text-center",children:[(0,Cc.jsx)("h1",{className:"text-3xl font-bold text-green-700",children:"Mundo Floral (mfloralok)"}),(0,Cc.jsx)("p",{className:"text-gray-600",children:"Sistema de gesti\xf3n para tu vivero digital"}),(0,Cc.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["\xa9 ",(new Date).getFullYear()," Mundo Floral. Todos los derechos reservados."]})]}),(0,Cc.jsxs)("nav",{className:"flex justify-center gap-4 my-4",children:[(0,Cc.jsx)("button",{className:"px-3 py-1 rounded ".concat("inventory"===n?"bg-green-200":"bg-gray-200"),onClick:()=>r("inventory"),children:"Inventario"}),(0,Cc.jsx)("button",{className:"px-3 py-1 rounded ".concat("cash"===n?"bg-green-200":"bg-gray-200"),onClick:()=>r("cash"),children:"Caja"}),(0,Cc.jsx)("button",{className:"px-3 py-1 rounded ".concat("reports"===n?"bg-green-200":"bg-gray-200"),onClick:()=>r("reports"),children:"Reportes"})]}),(0,Cc.jsxs)("main",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,Cc.jsx)("div",{className:"mb-4",children:(0,Cc.jsx)(ky,{})}),(()=>{switch(n){case"inventory":return(0,Cc.jsx)(Dc,{});case"cash":return(0,Cc.jsx)(cu,{});case"reports":return(0,Cc.jsx)(wy,{});default:return(0,Cc.jsx)("div",{className:"text-center text-gray-500",children:"Seleccione un m\xf3dulo."})}})()]})]})})},Iy=document.getElementById("root");if(!Iy)throw new Error("No se encontr\xf3 el elemento root en el HTML.");(0,r.H)(Iy).render((0,Cc.jsx)(i.StrictMode,{children:(0,Cc.jsx)(Py,{})}))})();
//# sourceMappingURL=main.130f4cc1.js.map